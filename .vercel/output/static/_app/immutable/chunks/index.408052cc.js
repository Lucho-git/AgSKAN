import{c as j}from"./index.38921fa9.js";new TextEncoder;const D=new TextDecoder,$=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r},U=e=>{let t=e;t instanceof Uint8Array&&(t=D.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return $(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},M=U;var J=Object.create,b=Object.defineProperty,K=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,L=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,I=(e,t)=>function(){return t||(0,e[O(e)[0]])((t={exports:{}}).exports,t),t.exports},B=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of O(t))!R.call(e,a)&&a!==r&&b(e,a,{get:()=>t[a],enumerable:!(o=K(t,a))||o.enumerable});return e},E=(e,t,r)=>(r=e!=null?J(L(e)):{},B(t||!e||!e.__esModule?b(r,"default",{value:e,enumerable:!0}):r,e)),x=I({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(e){e.parse=o,e.serialize=a;var t=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(n,_){if(typeof n!="string")throw new TypeError("argument str must be a string");for(var h={},i=_||{},w=i.decode||c,u=0;u<n.length;){var s=n.indexOf("=",u);if(s===-1)break;var f=n.indexOf(";",u);if(f===-1)f=n.length;else if(f<s){u=n.lastIndexOf(";",s-1)+1;continue}var v=n.slice(u,s).trim();if(h[v]===void 0){var g=n.slice(s+1,f).trim();g.charCodeAt(0)===34&&(g=g.slice(1,-1)),h[v]=d(g,w)}u=f+1}return h}function a(n,_,h){var i=h||{},w=i.encode||l;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!r.test(n))throw new TypeError("argument name is invalid");var u=w(_);if(u&&!r.test(u))throw new TypeError("argument val is invalid");var s=n+"="+u;if(i.maxAge!=null){var f=i.maxAge-0;if(isNaN(f)||!isFinite(f))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(f)}if(i.domain){if(!r.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain="+i.domain}if(i.path){if(!r.test(i.path))throw new TypeError("option path is invalid");s+="; Path="+i.path}if(i.expires){var v=i.expires;if(!p(v)||isNaN(v.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+v.toUTCString()}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.priority){var g=typeof i.priority=="string"?i.priority.toLowerCase():i.priority;switch(g){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(i.sameSite){var P=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(P){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function c(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function l(n){return encodeURIComponent(n)}function p(n){return t.call(n)==="[object Date]"||n instanceof Date}function d(n,_){try{return _(n)}catch{return n}}}}),y=E(x()),A=E(x());function S(e){if(!e)return null;try{const t=JSON.parse(e);if(!t)return null;if(t.constructor.name==="Object")return t;if(t.constructor.name!=="Array")throw new Error(`Unexpected format: ${t.constructor.name}`);const[r,o,a]=t[0].split("."),c=M(o),l=new TextDecoder,{exp:p,sub:d,...n}=JSON.parse(l.decode(c));return{expires_at:p,expires_in:p-Math.round(Date.now()/1e3),token_type:"bearer",access_token:t[0],refresh_token:t[1],provider_token:t[2],provider_refresh_token:t[3],user:{id:d,factors:t[4],...n}}}catch(t){return console.warn("Failed to parse cookie string:",t),null}}function H(e){var t;return JSON.stringify([e.access_token,e.refresh_token,e.provider_token,e.provider_refresh_token,((t=e.user)==null?void 0:t.factors)??null])}function k(){return typeof window<"u"&&typeof window.document<"u"}var C={path:"/",sameSite:"lax",maxAge:60*60*24*365*1e3};function T(e){return new RegExp(".{1,"+e+"}","g")}var N=3180,X=T(N);function z(e,t,r){const o=r!==void 0?T(r):X;if(Math.ceil(t.length/(r??N))===1)return[{name:e,value:t}];const c=[],l=t.match(o);return l==null||l.forEach((p,d)=>{const n=`${e}.${d}`;c.push({name:n,value:p})}),c}function F(e,t=()=>null){let r=[];for(let o=0;;o++){const a=`${e}.${o}`,c=t(a);if(!c)break;r.push(c)}return r.length?r.join(""):null}var W=class{constructor(e){this.cookieOptions={...C,...e,maxAge:C.maxAge}}getItem(e){const t=this.getCookie(e);if(e.endsWith("-code-verifier")&&t)return t;if(t)return JSON.stringify(S(t));const r=F(e,o=>this.getCookie(o));return r!==null?JSON.stringify(S(r)):null}setItem(e,t){if(e.endsWith("-code-verifier")){this.setCookie(e,t);return}let r=JSON.parse(t);const o=H(r);z(e,o).forEach(c=>{this.setCookie(c.name,c.value)})}removeItem(e){this._deleteSingleCookie(e),this._deleteChunkedCookies(e)}_deleteSingleCookie(e){this.getCookie(e)&&this.deleteCookie(e)}_deleteChunkedCookies(e,t=0){for(let r=t;;r++){const o=`${e}.${r}`;if(this.getCookie(o)===void 0)break;this.deleteCookie(o)}}},G=class extends W{constructor(e){super(e)}getCookie(e){return k()?(0,y.parse)(document.cookie)[e]:null}setCookie(e,t){if(!k())return null;document.cookie=(0,y.serialize)(e,t,{...this.cookieOptions,httpOnly:!1})}deleteCookie(e){if(!k())return null;document.cookie=(0,y.serialize)(e,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function Z(e,t,r){var o;const a=k();return j(e,t,{...r,auth:{flowType:"pkce",autoRefreshToken:a,detectSessionInUrl:a,persistSession:!0,storage:r.auth.storage,...(o=r.auth)!=null&&o.storageKey?{storageKey:r.auth.storageKey}:{}}})}A.parse;A.serialize;/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/var Q=class extends G{constructor(e=null,t){super(t),this.serverSession=e}getItem(e){return k()?super.getItem(e):JSON.stringify(this.serverSession)}},m;function Y({supabaseUrl:e,supabaseKey:t,event:r,serverSession:o,options:a,cookieOptions:c}){var l;const p=k();if(p&&m)return m;const d=Z(e,t,{...a,global:{fetch:r.fetch,...a==null?void 0:a.global,headers:{...(l=a==null?void 0:a.global)==null?void 0:l.headers,"X-Client-Info":"@supabase/auth-helpers-sveltekit@0.10.7"}},auth:{storage:new Q(o,c)}});return p&&(m=d),d}export{Y as c};
