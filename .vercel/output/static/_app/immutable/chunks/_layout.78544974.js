import{a as _,P as m}from"./public.d2f41676.js";import{c as h}from"./index.408052cc.js";import{R as P}from"./control.c2cf8273.js";function u(e,a){return new P(e,a.toString())}new TextEncoder;const S=async({fetch:e,data:a,depends:i,url:s})=>{i("supabase:auth");const o=h({supabaseUrl:_,supabaseKey:m,event:{fetch:e},serverSession:a.session}),{data:{session:f}}=await o.auth.getSession(),t=a.profile,n="/account/create_profile",c="/account/user_survey",p="/account/select_plan";if(t&&!r(t)&&s.pathname!==n)throw u(303,n);if(t&&r(t)&&!l(t)&&s.pathname!==c&&s.pathname!==p)throw console.log("Redict to survey"),u(303,c);return{supabase:o,session:f,profile:t}},r=e=>!(!e||!e.full_name),l=e=>!(!e||!e.survey_completed),v=Object.freeze(Object.defineProperty({__proto__:null,_hasFullProfile:r,_hasSurveyCompleted:l,load:S},Symbol.toStringTag,{value:"Module"}));export{v as _,r as a,l as b,u as r};
