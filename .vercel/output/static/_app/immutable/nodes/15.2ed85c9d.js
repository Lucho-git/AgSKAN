import{s as K,a as T,e as b,B as H,z as L,h as d,d as V,c as v,g as N,i as w,j as y,l as M,C as Q,E as R,t as B,b as D,f as I,k as h,x as W,n as q}from"../chunks/scheduler.ccf898a6.js";import{S as X,i as Z,t as U,a as J,b as $,d as tt,m as et,e as st}from"../chunks/index.7272c3b3.js";import{p as at}from"../chunks/stores.54c459da.js";import{S as nt}from"../chunks/settings_module.c7b7ec2c.js";function lt(i){var Y,j;let t,e,s,l,u,a=((j=(Y=i[2])==null?void 0:Y.user)==null?void 0:j.email)+"",f,m,C,o,g,n,c,_,S,P,E,r;function O(p,x){return p[4]?rt:it}let F=O(i)(i);return{c(){t=b("div"),e=b("div"),F.c(),s=T(),l=b("div"),u=B("The button below will send you an email at "),f=B(a),m=B(` which will\r
        allow you to set your password.`),C=T(),o=b("button"),g=B("Send Set Password Email"),c=T(),_=b("div"),S=B(`Sent email! Please check your inbox and use the link to set your\r
        password.`),this.h()},l(p){t=v(p,"DIV",{class:!0});var x=D(t);e=v(x,"DIV",{class:!0});var k=D(e);F.l(k),s=V(k),l=v(k,"DIV",{});var A=D(l);u=I(A,"The button below will send you an email at "),f=I(A,a),m=I(A,` which will\r
        allow you to set your password.`),A.forEach(d),C=V(k),o=v(k,"BUTTON",{class:!0});var z=D(o);g=I(z,"Send Set Password Email"),z.forEach(d),c=V(k),_=v(k,"DIV",{class:!0});var G=D(_);S=I(G,`Sent email! Please check your inbox and use the link to set your\r
        password.`),G.forEach(d),k.forEach(d),x.forEach(d),this.h()},h(){w(o,"class",n="btn btn-outline btn-wide "+(i[1]?"hidden":"")),w(_,"class",P="success alert alert-success "+(i[1]?"":"hidden")),w(e,"class","flex flex-col gap-y-4"),w(t,"class","card p-6 pb-7 mt-8 max-w-xl flex flex-col md:flex-row shadow max-w-md")},m(p,x){y(p,t,x),h(t,e),F.m(e,null),h(e,s),h(e,l),h(l,u),h(l,f),h(l,m),h(e,C),h(e,o),h(o,g),i[7](o),h(e,c),h(e,_),h(_,S),E||(r=W(o,"click",i[5]),E=!0)},p(p,x){x&2&&n!==(n="btn btn-outline btn-wide "+(p[1]?"hidden":""))&&w(o,"class",n),x&2&&P!==(P="success alert alert-success "+(p[1]?"":"hidden"))&&w(_,"class",P)},i:q,o:q,d(p){p&&d(t),F.d(),i[7](null),E=!1,r()}}}function ot(i){let t,e;return t=new nt({props:{title:"Change Password",editable:!0,saveButtonTitle:"Change Password",successTitle:"Password Changed",successBody:"On next sign in, use your new password.",formTarget:"/account/api?/updatePassword",fields:[{id:"newPassword1",label:"New Password",initialValue:"",inputType:"password"},{id:"newPassword2",label:"Confirm New Password",initialValue:"",inputType:"password"},{id:"currentPassword",label:"Current Password",initialValue:"",inputType:"password"}]}}),{c(){$(t.$$.fragment)},l(s){tt(t.$$.fragment,s)},m(s,l){et(t,s,l),e=!0},p:q,i(s){e||(U(t.$$.fragment,s),e=!0)},o(s){J(t.$$.fragment,s),e=!1},d(s){st(t,s)}}}function it(i){let t,e="Change Password By Email";return{c(){t=b("div"),t.textContent=e,this.h()},l(s){t=v(s,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-wb4o62"&&(t.textContent=e),this.h()},h(){w(t,"class","font-bold")},m(s,l){y(s,t,l)},d(s){s&&d(t)}}}function rt(i){let t,e="Set Password By Email",s,l,u=`You use oAuth to sign in ("Sign in with Github" or similar). You can\r
          continue to access your account using only oAuth if you like!`;return{c(){t=b("div"),t.textContent=e,s=T(),l=b("div"),l.textContent=u,this.h()},l(a){t=v(a,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-e40ftg"&&(t.textContent=e),s=V(a),l=v(a,"DIV",{"data-svelte-h":!0}),N(l)!=="svelte-kym5a6"&&(l.textContent=u),this.h()},h(){w(t,"class","font-bold")},m(a,f){y(a,t,f),y(a,s,f),y(a,l,f)},d(a){a&&(d(t),d(s),d(l))}}}function ut(i){let t,e,s="Change Password",l,u,a,f,m;const C=[ot,lt],o=[];function g(n,c){return n[3]?0:1}return u=g(i),a=o[u]=C[u](i),{c(){t=T(),e=b("h1"),e.textContent=s,l=T(),a.c(),f=H(),this.h()},l(n){L("svelte-cgsnq8",document.head).forEach(d),t=V(n),e=v(n,"H1",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-56i6u3"&&(e.textContent=s),l=V(n),a.l(n),f=H(),this.h()},h(){document.title="Change Password",w(e,"class","text-2xl font-bold mb-6")},m(n,c){y(n,t,c),y(n,e,c),y(n,l,c),o[u].m(n,c),y(n,f,c),m=!0},p(n,[c]){a.p(n,c)},i(n){m||(U(a),m=!0)},o(n){J(a),m=!1},d(n){n&&(d(t),d(e),d(l),d(f)),o[u].d(n)}}}function ct(i,t,e){var _,S,P,E;let s;M(i,at,r=>e(8,s=r)),Q("adminSection").set("settings");let{data:u}=t,{session:a,supabase:f}=u,m=!!((S=(_=a==null?void 0:a.user)==null?void 0:_.amr)!=null&&S.find(r=>r.method==="password")),C=!!((E=(P=a==null?void 0:a.user)==null?void 0:P.amr)!=null&&E.find(r=>r.method==="oauth")),o,g=!1,n=()=>{e(0,o.disabled=!0,o),e(0,o.textContent="Sending...",o);let r=a==null?void 0:a.user.email;r&&f.auth.resetPasswordForEmail(r,{redirectTo:`${s.url.origin}/auth/callback?next=%2Faccount%2Fsettings%2Freset_password`}).then(O=>{e(1,g=!O.error)})};function c(r){R[r?"unshift":"push"](()=>{o=r,e(0,o)})}return i.$$set=r=>{"data"in r&&e(6,u=r.data)},[o,g,a,m,C,n,u,c]}class pt extends X{constructor(t){super(),Z(this,t,ct,ut,K,{data:6})}}export{pt as component};
