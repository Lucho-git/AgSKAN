import{a as Ee,r as Pe}from"../chunks/_layout.78544974.js";import{s as Ie,a as N,e as o,t as $,z as xe,h as f,d as C,c as i,b as P,g as Y,f as ee,i as e,j as z,k as t,F as Le,n as Ne,A as Me}from"../chunks/scheduler.ccf898a6.js";import{S as Te,i as De}from"../chunks/index.7272c3b3.js";/* empty css                    */import{e as Ve,a as He}from"../chunks/forms.232fd95d.js";async function Se({parent:s}){const n=await s();if(Ee(n==null?void 0:n.profile))throw Pe(303,"/account/user_survey");return n}const Ue=Object.freeze(Object.defineProperty({__proto__:null,load:Se},Symbol.toStringTag,{value:"Module"}));function Ce(s){var _;let n,c,m,u=((_=s[0])==null?void 0:_.errorMessage)+"",h;return{c(){n=o("div"),c=N(),m=o("p"),h=$(u),this.h()},l(d){n=i(d,"DIV",{class:!0}),P(n).forEach(f),c=C(d),m=i(d,"P",{class:!0});var l=P(m);h=ee(l,u),l.forEach(f),this.h()},h(){e(n,"class","mt-4"),e(m,"class","text-red-700 text-sm font-bold text-center mt-3")},m(d,l){z(d,n,l),z(d,c,l),z(d,m,l),t(m,h)},p(d,l){var b;l&1&&u!==(u=((b=d[0])==null?void 0:b.errorMessage)+"")&&Me(h,u)},d(d){d&&(f(n),f(c),f(m))}}}function Ae(s){var be,we,ye;let n,c,m,u,h,_="Create Profile",d,l,b,I,R='<span class="label-text">Name</span>',B,r,M,q,te,T,D,fe='<span class="label-text">Company Name</span>',le,y,W,F,ae,V,H,pe='<span class="label-text">Company Website</span>',se,g,G,O,re,J,j,x,K,ne,E,oe,ve=((we=(be=s[2])==null?void 0:be.user)==null?void 0:we.email)+"",ie,ue,de,me,S,_e="Sign out",ce,he,p=((ye=s[0])==null?void 0:ye.errorMessage)&&Ce(s);return{c(){n=N(),c=o("div"),m=o("div"),u=o("div"),h=o("h1"),h.textContent=_,d=N(),l=o("form"),b=o("div"),I=o("label"),I.innerHTML=R,B=N(),r=o("input"),te=N(),T=o("div"),D=o("label"),D.innerHTML=fe,le=N(),y=o("input"),ae=N(),V=o("div"),H=o("label"),H.innerHTML=pe,se=N(),g=o("input"),re=N(),p&&p.c(),J=N(),j=o("div"),x=o("input"),ne=N(),E=o("div"),oe=$("You are logged in as "),ie=$(ve),ue=$(`.\r
        `),de=o("br"),me=N(),S=o("a"),S.textContent=_e,this.h()},l(a){xe("svelte-uj7g5q",document.head).forEach(f),n=C(a),c=i(a,"DIV",{class:!0});var A=P(c);m=i(A,"DIV",{class:!0});var U=P(m);u=i(U,"DIV",{});var L=P(u);h=i(L,"H1",{class:!0,"data-svelte-h":!0}),Y(h)!=="svelte-1vtnms7"&&(h.textContent=_),d=C(L),l=i(L,"FORM",{class:!0,method:!0,action:!0});var w=P(l);b=i(w,"DIV",{class:!0});var Q=P(b);I=i(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(I)!=="svelte-g3q01w"&&(I.innerHTML=R),B=C(Q),r=i(Q,"INPUT",{id:!0,name:!0,type:!0,placeholder:!0,class:!0}),Q.forEach(f),te=C(w),T=i(w,"DIV",{class:!0});var X=P(T);D=i(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(D)!=="svelte-16532ax"&&(D.innerHTML=fe),le=C(X),y=i(X,"INPUT",{id:!0,name:!0,type:!0,placeholder:!0,class:!0}),X.forEach(f),ae=C(w),V=i(w,"DIV",{class:!0});var Z=P(V);H=i(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(H)!=="svelte-1fqkhyk"&&(H.innerHTML=pe),se=C(Z),g=i(Z,"INPUT",{id:!0,name:!0,type:!0,placeholder:!0,class:!0}),Z.forEach(f),re=C(w),p&&p.l(w),J=C(w),j=i(w,"DIV",{class:!0});var ge=P(j);x=i(ge,"INPUT",{type:!0,class:!0}),ge.forEach(f),w.forEach(f),ne=C(L),E=i(L,"DIV",{class:!0});var k=P(E);oe=ee(k,"You are logged in as "),ie=ee(k,ve),ue=ee(k,`.\r
        `),de=i(k,"BR",{}),me=C(k),S=i(k,"A",{class:!0,href:!0,"data-svelte-h":!0}),Y(S)!=="svelte-le6ier"&&(S.textContent=_e),k.forEach(f),L.forEach(f),U.forEach(f),A.forEach(f),this.h()},h(){var a,v,A;document.title="Create Profile",e(h,"class","text-2xl font-bold mb-6"),e(I,"for","fullName"),e(I,"class","label"),e(r,"id","fullName"),e(r,"name","fullName"),e(r,"type","text"),e(r,"placeholder","Your full name"),e(r,"class",M=(s[6](s[0],"fullName")?"input-error":"")+" mt-1 input input-bordered w-full max-w-xs border-2 border-primary"),r.value=q=((a=s[0])==null?void 0:a.fullName)??s[3],r.required=!0,e(b,"class","mt-4"),e(D,"for","companyName"),e(D,"class","label"),e(y,"id","companyName"),e(y,"name","companyName"),e(y,"type","text"),e(y,"placeholder","Homewood Farms"),e(y,"class",W=(s[6](s[0],"companyName")?"input-error":"")+" mt-1 input input-bordered w-full max-w-xs"),y.value=F=((v=s[0])==null?void 0:v.companyName)??s[4],e(T,"class","mt-4"),e(H,"for","website"),e(H,"class","label"),e(g,"id","website"),e(g,"name","website"),e(g,"type","text"),e(g,"placeholder","Company.com"),e(g,"class",G=(s[6](s[0],"website")?"input-error":"")+" mt-1 input input-bordered w-full max-w-xs"),g.value=O=((A=s[0])==null?void 0:A.website)??s[5],e(V,"class","mt-4"),e(x,"type","submit"),e(x,"class","btn btn-primary mt-3 btn-wide"),x.value=K=s[1]?"...":"Create Profile",x.disabled=s[1],e(j,"class","mt-4"),e(l,"class","form-widget"),e(l,"method","POST"),e(l,"action","/account/api?/updateProfile"),e(S,"class","underline"),e(S,"href","/account/sign_out"),e(E,"class","text-sm text-slate-800 mt-14"),e(m,"class","flex flex-col w-64 lg:w-80"),e(c,"class","text-center content-center max-w-lg mx-auto min-h-[100vh] mb-12 flex items-center place-content-center")},m(a,v){z(a,n,v),z(a,c,v),t(c,m),t(m,u),t(u,h),t(u,d),t(u,l),t(l,b),t(b,I),t(b,B),t(b,r),t(l,te),t(l,T),t(T,D),t(T,le),t(T,y),t(l,ae),t(l,V),t(V,H),t(V,se),t(V,g),t(l,re),p&&p.m(l,null),t(l,J),t(l,j),t(j,x),t(u,ne),t(u,E),t(E,oe),t(E,ie),t(E,ue),t(E,de),t(E,me),t(E,S),ce||(he=Le(Ve.call(null,l,s[7])),ce=!0)},p(a,[v]){var A,U,L,w;v&1&&M!==(M=(a[6](a[0],"fullName")?"input-error":"")+" mt-1 input input-bordered w-full max-w-xs border-2 border-primary")&&e(r,"class",M),v&1&&q!==(q=((A=a[0])==null?void 0:A.fullName)??a[3])&&r.value!==q&&(r.value=q),v&1&&W!==(W=(a[6](a[0],"companyName")?"input-error":"")+" mt-1 input input-bordered w-full max-w-xs")&&e(y,"class",W),v&1&&F!==(F=((U=a[0])==null?void 0:U.companyName)??a[4])&&y.value!==F&&(y.value=F),v&1&&G!==(G=(a[6](a[0],"website")?"input-error":"")+" mt-1 input input-bordered w-full max-w-xs")&&e(g,"class",G),v&1&&O!==(O=((L=a[0])==null?void 0:L.website)??a[5])&&g.value!==O&&(g.value=O),(w=a[0])!=null&&w.errorMessage?p?p.p(a,v):(p=Ce(a),p.c(),p.m(l,J)):p&&(p.d(1),p=null),v&2&&K!==(K=a[1]?"...":"Create Profile")&&(x.value=K),v&2&&(x.disabled=a[1])},i:Ne,o:Ne,d(a){a&&(f(n),f(c)),p&&p.d(),ce=!1,he()}}}function ke(s,n,c){let{data:m}=n,{form:u}=n,{session:h,profile:_}=m,d=!1,l=(_==null?void 0:_.full_name)??"",b=(_==null?void 0:_.company_name)??"",I=(_==null?void 0:_.website)??"";const R=(r,M)=>((r==null?void 0:r.errorFields)??[]).includes(M),B=()=>(c(1,d=!0),async({update:r,result:M})=>{console.log("Form submitted"),await r({reset:!1}),console.log("Form updated"),await He(M),console.log("Action applied"),c(1,d=!1),console.log("handleSubmit completed")});return s.$$set=r=>{"data"in r&&c(8,m=r.data),"form"in r&&c(0,u=r.form)},s.$$.update=()=>{s.$$.dirty&1&&u&&console.log("Form result:",u)},[u,d,h,l,b,I,R,B,m]}class Ye extends Te{constructor(n){super(),De(this,n,ke,Ae,Ie,{data:8,form:0})}}export{Ye as component,Ue as universal};
