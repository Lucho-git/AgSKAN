import{P as g}from"./scheduler.BVGjjnGO.js";import{w as S}from"./index.BnUP_WGm.js";function q(...s){return s.filter(Boolean).join(" ")}const y=typeof document<"u";function b(s){const i=S(s);function p(d){y&&i.set(d)}function r(d){y&&i.update(d)}return{subscribe:i.subscribe,set:p,update:r}}let h=0;function _(){const s=b([]),i=b([]);function p(e){s.update(t=>[e,...t])}function r(e){const{message:t,...n}=e,o=typeof e?.id=="number"||e.id&&e.id?.length>0?e.id:h++,f=e.dismissable===void 0?!0:e.dismissable,u=e.type===void 0?"default":e.type;return g(s).find(m=>m.id===o)?s.update(m=>m.map(a=>a.id===o?{...a,...e,id:o,title:t,dismissable:f,type:u,updated:!0}:{...a,updated:!1})):p({...n,id:o,title:t,dismissable:f,type:u}),o}function d(e){if(e===void 0){s.update(t=>t.map(n=>({...n,dismiss:!0})));return}return s.update(t=>t.map(n=>n.id===e?{...n,dismiss:!0}:n)),e}function w(e){if(e===void 0){s.set([]);return}return s.update(t=>t.filter(n=>n.id!==e)),e}function x(e,t){return r({...t,type:"default",message:e})}function I(e,t){return r({...t,type:"error",message:e})}function T(e,t){return r({...t,type:"success",message:e})}function v(e,t){return r({...t,type:"info",message:e})}function E(e,t){return r({...t,type:"warning",message:e})}function H(e,t){return r({...t,type:"loading",message:e})}function P(e,t){if(!t)return;let n;t.loading!==void 0&&(n=r({...t,promise:e,type:"loading",message:t.loading}));const o=e instanceof Promise?e:e();let f=n!==void 0;return o.then(u=>{if(u&&typeof u.ok=="boolean"&&!u.ok){f=!1;const l=typeof t.error=="function"?t.error(`HTTP error! status: ${u.status}`):t.error;r({id:n,type:"error",message:l})}else if(t.success!==void 0){f=!1;const l=typeof t.success=="function"?t.success(u):t.success;r({id:n,type:"success",message:l})}}).catch(u=>{if(t.error!==void 0){f=!1;const l=typeof t.error=="function"?t.error(u):t.error;r({id:n,type:"error",message:l})}}).finally(()=>{f&&(d(n),n=void 0),t.finally?.()}),n}function $(e,t){const n=t?.id||h++;return r({component:e,id:n,...t}),n}function j(e){i.update(t=>t.filter(n=>n.toastId!==e))}function k(e){if(g(i).find(n=>n.toastId===e.toastId)===void 0){i.update(n=>[e,...n]);return}i.update(n=>n.map(o=>o.toastId===e.toastId?e:o))}function B(){s.set([]),i.set([])}return{create:r,addToast:p,dismiss:d,remove:w,message:x,error:I,success:T,info:v,warning:E,loading:H,promise:P,custom:$,removeHeight:j,setHeight:k,reset:B,toasts:s,heights:i}}const c=_();function C(s,i){return c.create({message:s,...i})}const D=C,z=Object.assign(D,{success:c.success,info:c.info,warning:c.warning,error:c.error,custom:c.custom,message:c.message,promise:c.promise,dismiss:c.dismiss,loading:c.loading}),A=s=>({subscribe:s});export{c as a,q as c,z as t,A as u};
