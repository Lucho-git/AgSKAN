import{s as z,n as T,d as o,i as y,a as w,b as h,r as H,f as j,c as b,e as x,g as M,k as C,j as k,l as U,K as B,q as N,w as S,h as O,z as q,t as A}from"../chunks/DjMlahvE.js";import{S as K,i as R}from"../chunks/KhAD1Hhl.js";import{p as Y}from"../chunks/1ZeRG0_x.js";import{s as F}from"../chunks/BaPH9Oqq.js";const G=!1,J=async({params:u})=>({token:u.token}),re=Object.freeze(Object.defineProperty({__proto__:null,load:J,prerender:G},Symbol.toStringTag,{value:"Module"}));function Q(u){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>There was an error processing your request. Please try again
              later.</span>`;return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-5zknmj"&&(e.innerHTML=t),this.h()},h(){h(e,"class","alert alert-error")},m(s,n){y(s,e,n)},p:T,d(s){s&&o(e)}}}function W(u){let e,t,s,n="Receive important updates",d,l,g,m,f,p=u[2]?"Processing...":"Update Preferences",i,a,_,E,P,c=u[3]&&L();return{c(){e=k("div"),t=k("label"),s=k("span"),s.textContent=n,d=C(),l=k("input"),g=C(),m=k("div"),f=k("button"),i=A(p),a=C(),c&&c.c(),_=q(),this.h()},l(r){e=b(r,"DIV",{class:!0});var v=x(e);t=b(v,"LABEL",{class:!0});var I=x(t);s=b(I,"SPAN",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-1046da"&&(s.textContent=n),d=j(I),l=b(I,"INPUT",{type:!0,class:!0}),I.forEach(o),v.forEach(o),g=j(r),m=b(r,"DIV",{class:!0});var D=x(m);f=b(D,"BUTTON",{class:!0});var V=x(f);i=O(V,p),V.forEach(o),D.forEach(o),a=j(r),c&&c.l(r),_=q(),this.h()},h(){h(s,"class","label-text"),h(l,"type","checkbox"),h(l,"class","checkbox"),h(t,"class","label cursor-pointer"),h(e,"class","form-control"),h(f,"class","btn btn-primary w-full sm:w-auto"),f.disabled=u[2],h(m,"class","card-actions justify-center mt-6")},m(r,v){y(r,e,v),w(e,t),w(t,s),w(t,d),w(t,l),l.checked=u[0],y(r,g,v),y(r,m,v),w(m,f),w(f,i),y(r,a,v),c&&c.m(r,v),y(r,_,v),E||(P=[S(l,"change",u[5]),S(f,"click",u[4])],E=!0)},p(r,v){v&1&&(l.checked=r[0]),v&4&&p!==(p=r[2]?"Processing...":"Update Preferences")&&N(i,p),v&4&&(f.disabled=r[2]),r[3]?c||(c=L(),c.c(),c.m(_.parentNode,_)):c&&(c.d(1),c=null)},d(r){r&&(o(e),o(g),o(m),o(a),o(_)),c&&c.d(r),E=!1,B(P)}}}function L(u){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Your email preferences have been updated successfully.</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-w42y8"&&(e.innerHTML=t),this.h()},h(){h(e,"class","alert alert-success mt-4")},m(s,n){y(s,e,n)},d(s){s&&o(e)}}}function X(u){let e,t,s,n,d,l,g="Manage Email Preferences",m;function f(a,_){return a[1]?Q:W}let p=f(u),i=p(u);return{c(){e=C(),t=k("div"),s=k("div"),n=k("div"),d=k("div"),l=k("h1"),l.textContent=g,m=C(),i.c(),this.h()},l(a){H("svelte-102ykcq",document.head).forEach(o),e=j(a),t=b(a,"DIV",{class:!0});var E=x(t);s=b(E,"DIV",{class:!0});var P=x(s);n=b(P,"DIV",{class:!0});var c=x(n);d=b(c,"DIV",{class:!0});var r=x(d);l=b(r,"H1",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-p9mq6q"&&(l.textContent=g),m=j(r),i.l(r),r.forEach(o),c.forEach(o),P.forEach(o),E.forEach(o),this.h()},h(){document.title="Manage Email Preferences",h(l,"class","card-title text-2xl font-bold mb-6 justify-center"),h(d,"class","card-body"),h(n,"class","card bg-base-100 shadow-xl"),h(s,"class","container mx-auto px-4 max-w-2xl"),h(t,"class","flex justify-center items-center min-h-screen bg-base-200")},m(a,_){y(a,e,_),y(a,t,_),w(t,s),w(s,n),w(n,d),w(d,l),w(d,m),i.m(d,null)},p(a,[_]){p===(p=f(a))&&i?i.p(a,_):(i.d(1),i=p(a),i&&(i.c(),i.m(d,null)))},i:T,o:T,d(a){a&&(o(e),o(t)),i.d()}}}function Z(u,e,t){let s;U(u,Y,p=>t(6,s=p));let n=!0,d=!1,l=!1,g=!1;async function m(){t(2,l=!0),t(3,g=!1);const{token:p}=s.params,{data:i,error:a}=await F.from("email_subscribers").update({is_subscribed:n}).match({unsubscribe_token:p});a?(console.error("Error updating preferences:",a),t(1,d=!0)):t(3,g=!0),t(2,l=!1)}function f(){n=this.checked,t(0,n)}return[n,d,l,g,m,f]}class ae extends K{constructor(e){super(),R(this,e,Z,X,z,{})}}export{ae as component,re as universal};
