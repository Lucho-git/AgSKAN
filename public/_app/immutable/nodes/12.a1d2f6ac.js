import{_ as ts}from"../chunks/preload-helper.a4192956.js";import{r as aa,e as Wo}from"../chunks/index.3feb4388.js";import{u as Ya,C as Zo,I as Xo}from"../chunks/input.bdb2cda4.js";import{c as es}from"../chunks/connectedMapStore.d86a965d.js";import{s as Yo}from"../chunks/sessionStore.b46579ea.js";import{P as Qa,s as qi,r as sr,O as Ti,l as qr,v as rs,a as jt,e as Yt,f as Ht,c as Qt,g as Ma,i as yt,j as bt,n as or,d as ut,E as Ka,F as Ja,b as re,k as he,z as is,A as as,a6 as ns,G as Qo,t as Gr,h as jr,w as ur,_ as pe,q as Ko}from"../chunks/scheduler.0ff5556b.js";import{s as tn}from"../chunks/supabaseClient.998d708c.js";import{e as vi,g as Jo}from"../chunks/index.d1b3dc0f.js";import{S as Gi,i as ji,c as wt,a as At,m as Dt,t as mt,b as pt,d as Ct,h as ss,g as wa,e as Aa}from"../chunks/index.e3d1f712.js";import{e as Si,u as tu,o as eu}from"../chunks/each.1577e3f3.js";import{g as ru}from"../chunks/navigation.22654e78.js";import{C as os}from"../chunks/card.84024428.js";import{C as iu,a as au,b as nu}from"../chunks/card-title.acdfdd9f.js";import{g as us,C as su,a as ou,b as uu}from"../chunks/carousel-item.fc51e4cd.js";import{g as hs,a as ls}from"../chunks/spread.8a54911c.js";import{A as hu}from"../chunks/arrow-left.fe80054f.js";import{c as Ii}from"../chunks/utils.ce6287f2.js";import"../chunks/index.d7bd5d03.js";import{B as hr}from"../chunks/button.4eb00373.js";import{A as lu}from"../chunks/arrow-right.4a7b62ee.js";import{t as en,e as rn}from"../chunks/index.abbb3c7d.js";import{t as an}from"../chunks/Toaster.svelte_svelte_type_style_lang.7b1bf8eb.js";import{f as cu,I as fu}from"../chunks/fileApi.1fa0edcf.js";import{X as cs}from"../chunks/x.add80b09.js";import{C as fs}from"../chunks/check.3a781958.js";function _i(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ds={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(i,a,n){function o(h,d){if(!a[h]){if(!i[h]){var l=typeof _i=="function"&&_i;if(!d&&l)return l(h,!0);if(s)return s(h,!0);var f=new Error("Cannot find module '"+h+"'");throw f.code="MODULE_NOT_FOUND",f}var c=a[h]={exports:{}};i[h][0].call(c.exports,function(g){var p=i[h][1][g];return o(p||g)},c,c.exports,r,i,a,n)}return a[h].exports}for(var s=typeof _i=="function"&&_i,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(r,i,a){var n=r("./utils"),o=r("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var h,d,l,f,c,g,p,_=[],y=0,E=u.length,M=E,C=n.getTypeOf(u)!=="string";y<u.length;)M=E-y,l=C?(h=u[y++],d=y<E?u[y++]:0,y<E?u[y++]:0):(h=u.charCodeAt(y++),d=y<E?u.charCodeAt(y++):0,y<E?u.charCodeAt(y++):0),f=h>>2,c=(3&h)<<4|d>>4,g=1<M?(15&d)<<2|l>>6:64,p=2<M?63&l:64,_.push(s.charAt(f)+s.charAt(c)+s.charAt(g)+s.charAt(p));return _.join("")},a.decode=function(u){var h,d,l,f,c,g,p=0,_=0,y="data:";if(u.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var E,M=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&M--,u.charAt(u.length-2)===s.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|M):new Array(0|M);p<u.length;)h=s.indexOf(u.charAt(p++))<<2|(f=s.indexOf(u.charAt(p++)))>>4,d=(15&f)<<4|(c=s.indexOf(u.charAt(p++)))>>2,l=(3&c)<<6|(g=s.indexOf(u.charAt(p++))),E[_++]=h,c!==64&&(E[_++]=d),g!==64&&(E[_++]=l);return E}},{"./support":30,"./utils":32}],2:[function(r,i,a){var n=r("./external"),o=r("./stream/DataWorker"),s=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function h(d,l,f,c,g){this.compressedSize=d,this.uncompressedSize=l,this.crc32=f,this.compression=c,this.compressedContent=g}h.prototype={getContentWorker:function(){var d=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),l=this;return d.on("end",function(){if(this.streamInfo.data_length!==l.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(d,l,f){return d.pipe(new s).pipe(new u("uncompressedSize")).pipe(l.compressWorker(f)).pipe(new u("compressedSize")).withStreamInfo("compression",l)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,i,a){var n=r("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},a.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,i,a){var n=r("./utils"),o=function(){for(var s,u=[],h=0;h<256;h++){s=h;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;u[h]=s}return u}();i.exports=function(s,u){return s!==void 0&&s.length?n.getTypeOf(s)!=="string"?function(h,d,l,f){var c=o,g=f+l;h^=-1;for(var p=f;p<g;p++)h=h>>>8^c[255&(h^d[p])];return-1^h}(0|u,s,s.length,0):function(h,d,l,f){var c=o,g=f+l;h^=-1;for(var p=f;p<g;p++)h=h>>>8^c[255&(h^d.charCodeAt(p))];return-1^h}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(r,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(r,i,a){var n=null;n=typeof Promise<"u"?Promise:r("lie"),i.exports={Promise:n}},{lie:37}],7:[function(r,i,a){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),s=r("./utils"),u=r("./stream/GenericWorker"),h=n?"uint8array":"array";function d(l,f){u.call(this,"FlateWorker/"+l),this._pako=null,this._pakoAction=l,this._pakoOptions=f,this.meta={}}a.magic="\b\0",s.inherits(d,u),d.prototype.processChunk=function(l){this.meta=l.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(h,l.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var l=this;this._pako.onData=function(f){l.push({data:f,meta:l.meta})}},a.compressWorker=function(l){return new d("Deflate",l)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,i,a){function n(c,g){var p,_="";for(p=0;p<g;p++)_+=String.fromCharCode(255&c),c>>>=8;return _}function o(c,g,p,_,y,E){var M,C,w=c.file,T=c.compression,N=E!==h.utf8encode,O=s.transformTo("string",E(w.name)),k=s.transformTo("string",h.utf8encode(w.name)),L=w.comment,H=s.transformTo("string",E(L)),D=s.transformTo("string",h.utf8encode(L)),P=k.length!==w.name.length,v=D.length!==L.length,z="",rt="",G="",ot=w.dir,F=w.date,J={crc32:0,compressedSize:0,uncompressedSize:0};g&&!p||(J.crc32=c.crc32,J.compressedSize=c.compressedSize,J.uncompressedSize=c.uncompressedSize);var R=0;g&&(R|=8),N||!P&&!v||(R|=2048);var I=0,it=0;ot&&(I|=16),y==="UNIX"?(it=798,I|=function(Z,It){var $t=Z;return Z||($t=It?16893:33204),(65535&$t)<<16}(w.unixPermissions,ot)):(it=20,I|=function(Z){return 63&(Z||0)}(w.dosPermissions)),M=F.getUTCHours(),M<<=6,M|=F.getUTCMinutes(),M<<=5,M|=F.getUTCSeconds()/2,C=F.getUTCFullYear()-1980,C<<=4,C|=F.getUTCMonth()+1,C<<=5,C|=F.getUTCDate(),P&&(rt=n(1,1)+n(d(O),4)+k,z+="up"+n(rt.length,2)+rt),v&&(G=n(1,1)+n(d(H),4)+D,z+="uc"+n(G.length,2)+G);var Q="";return Q+=`
\0`,Q+=n(R,2),Q+=T.magic,Q+=n(M,2),Q+=n(C,2),Q+=n(J.crc32,4),Q+=n(J.compressedSize,4),Q+=n(J.uncompressedSize,4),Q+=n(O.length,2),Q+=n(z.length,2),{fileRecord:l.LOCAL_FILE_HEADER+Q+O+z,dirRecord:l.CENTRAL_FILE_HEADER+n(it,2)+Q+n(H.length,2)+"\0\0\0\0"+n(I,4)+n(_,4)+O+z+H}}var s=r("../utils"),u=r("../stream/GenericWorker"),h=r("../utf8"),d=r("../crc32"),l=r("../signature");function f(c,g,p,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=p,this.encodeFileName=_,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,u),f.prototype.push=function(c){var g=c.meta.percent||0,p=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,u.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:p?(g+100*(p-_-1))/p:100}}))},f.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var g=this.streamFiles&&!c.file.dir;if(g){var p=o(c,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(c){this.accumulate=!1;var g=this.streamFiles&&!c.file.dir,p=o(c,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),g)this.push({data:function(_){return l.DATA_DESCRIPTOR+n(_.crc32,4)+n(_.compressedSize,4)+n(_.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var c=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var p=this.bytesWritten-c,_=function(y,E,M,C,w){var T=s.transformTo("string",w(C));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(y,2)+n(y,2)+n(E,4)+n(M,4)+n(T.length,2)+T}(this.dirRecords.length,p,c,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(c){this._sources.push(c);var g=this;return c.on("data",function(p){g.processChunk(p)}),c.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),c.on("error",function(p){g.error(p)}),this},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(c){var g=this._sources;if(!u.prototype.error.call(this,c))return!1;for(var p=0;p<g.length;p++)try{g[p].error(c)}catch{}return!0},f.prototype.lock=function(){u.prototype.lock.call(this);for(var c=this._sources,g=0;g<c.length;g++)c[g].lock()},i.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,i,a){var n=r("../compressions"),o=r("./ZipFileWorker");a.generateWorker=function(s,u,h){var d=new o(u.streamFiles,h,u.platform,u.encodeFileName),l=0;try{s.forEach(function(f,c){l++;var g=function(E,M){var C=E||M,w=n[C];if(!w)throw new Error(C+" is not a valid compression method !");return w}(c.options.compression,u.compression),p=c.options.compressionOptions||u.compressionOptions||{},_=c.dir,y=c.date;c._compressWorker(g,p).withStreamInfo("file",{name:f,dir:_,date:y,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(d)}),d.entriesCount=l}catch(f){d.error(f)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,i,a){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(n.prototype=r("./object")).loadAsync=r("./load"),n.support=r("./support"),n.defaults=r("./defaults"),n.version="3.10.1",n.loadAsync=function(o,s){return new n().loadAsync(o,s)},n.external=r("./external"),i.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,i,a){var n=r("./utils"),o=r("./external"),s=r("./utf8"),u=r("./zipEntries"),h=r("./stream/Crc32Probe"),d=r("./nodejsUtils");function l(f){return new o.Promise(function(c,g){var p=f.decompressed.getContentWorker().pipe(new h);p.on("error",function(_){g(_)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}i.exports=function(f,c){var g=this;return c=n.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),d.isNode&&d.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",f,!0,c.optimizedBinaryString,c.base64).then(function(p){var _=new u(c);return _.load(p),_}).then(function(p){var _=[o.Promise.resolve(p)],y=p.files;if(c.checkCRC32)for(var E=0;E<y.length;E++)_.push(l(y[E]));return o.Promise.all(_)}).then(function(p){for(var _=p.shift(),y=_.files,E=0;E<y.length;E++){var M=y[E],C=M.fileNameStr,w=n.resolve(M.fileNameStr);g.file(w,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:c.createFolders}),M.dir||(g.file(w).unsafeOriginalName=C)}return _.zipComment.length&&(g.comment=_.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,i,a){var n=r("../utils"),o=r("../stream/GenericWorker");function s(u,h){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}n.inherits(s,o),s.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(d){h.push({data:d,meta:{percent:0}})}).on("error",function(d){h.isPaused?this.generatedError=d:h.error(d)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,i,a){var n=r("readable-stream").Readable;function o(s,u,h){n.call(this,u),this._helper=s;var d=this;s.on("data",function(l,f){d.push(l)||d._helper.pause(),h&&h(f)}).on("error",function(l){d.emit("error",l)}).on("end",function(){d.push(null)})}r("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(r,i,a){function n(w,T,N){var O,k=s.getTypeOf(T),L=s.extend(N||{},d);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(w=y(w)),L.createFolders&&(O=_(w))&&E.call(this,O,!0);var H=k==="string"&&L.binary===!1&&L.base64===!1;N&&N.binary!==void 0||(L.binary=!H),(T instanceof l&&T.uncompressedSize===0||L.dir||!T||T.length===0)&&(L.base64=!1,L.binary=!0,T="",L.compression="STORE",k="string");var D=null;D=T instanceof l||T instanceof u?T:g.isNode&&g.isStream(T)?new p(w,T):s.prepareContent(w,T,L.binary,L.optimizedBinaryString,L.base64);var P=new f(w,D,L);this.files[w]=P}var o=r("./utf8"),s=r("./utils"),u=r("./stream/GenericWorker"),h=r("./stream/StreamHelper"),d=r("./defaults"),l=r("./compressedObject"),f=r("./zipObject"),c=r("./generate"),g=r("./nodejsUtils"),p=r("./nodejs/NodejsStreamInputAdapter"),_=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var T=w.lastIndexOf("/");return 0<T?w.substring(0,T):""},y=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},E=function(w,T){return T=T!==void 0?T:d.createFolders,w=y(w),this.files[w]||n.call(this,w,null,{dir:!0,createFolders:T}),this.files[w]};function M(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var T,N,O;for(T in this.files)O=this.files[T],(N=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&w(N,O)},filter:function(w){var T=[];return this.forEach(function(N,O){w(N,O)&&T.push(O)}),T},file:function(w,T,N){if(arguments.length!==1)return w=this.root+w,n.call(this,w,T,N),this;if(M(w)){var O=w;return this.filter(function(L,H){return!H.dir&&O.test(L)})}var k=this.files[this.root+w];return k&&!k.dir?k:null},folder:function(w){if(!w)return this;if(M(w))return this.filter(function(k,L){return L.dir&&w.test(k)});var T=this.root+w,N=E.call(this,T),O=this.clone();return O.root=N.name,O},remove:function(w){w=this.root+w;var T=this.files[w];if(T||(w.slice(-1)!=="/"&&(w+="/"),T=this.files[w]),T&&!T.dir)delete this.files[w];else for(var N=this.filter(function(k,L){return L.name.slice(0,w.length)===w}),O=0;O<N.length;O++)delete this.files[N[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var T,N={};try{if((N=s.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");s.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var O=N.comment||this.comment||"";T=c.generateWorker(this,N,O)}catch(k){(T=new u("error")).error(k)}return new h(T,N.type||"string",N.mimeType)},generateAsync:function(w,T){return this.generateInternalStream(w).accumulate(T)},generateNodeStream:function(w,T){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(T)}};i.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,i,a){i.exports=r("stream")},{stream:void 0}],17:[function(r,i,a){var n=r("./DataReader");function o(s){n.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}r("../utils").inherits(o,n),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),h=s.charCodeAt(1),d=s.charCodeAt(2),l=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===u&&this.data[f+1]===h&&this.data[f+2]===d&&this.data[f+3]===l)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),h=s.charCodeAt(1),d=s.charCodeAt(2),l=s.charCodeAt(3),f=this.readData(4);return u===f[0]&&h===f[1]&&d===f[2]&&l===f[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,i,a){var n=r("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,h=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=s,h},readString:function(s){return n.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},i.exports=o},{"../utils":32}],19:[function(r,i,a){var n=r("./Uint8ArrayReader");function o(s){n.call(this,s)}r("../utils").inherits(o,n),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,i,a){var n=r("./DataReader");function o(s){n.call(this,s)}r("../utils").inherits(o,n),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,i,a){var n=r("./ArrayReader");function o(s){n.call(this,s)}r("../utils").inherits(o,n),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,i,a){var n=r("../utils"),o=r("../support"),s=r("./ArrayReader"),u=r("./StringReader"),h=r("./NodeBufferReader"),d=r("./Uint8ArrayReader");i.exports=function(l){var f=n.getTypeOf(l);return n.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new h(l):o.uint8array?new d(n.transformTo("uint8array",l)):new s(n.transformTo("array",l)):new u(l)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,i,a){var n=r("./GenericWorker"),o=r("../utils");function s(u){n.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,n),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},i.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(r,i,a){var n=r("./GenericWorker"),o=r("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(s,n),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},i.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,i,a){var n=r("../utils"),o=r("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}n.inherits(s,o),s.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}o.prototype.processChunk.call(this,u)},i.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(r,i,a){var n=r("../utils"),o=r("./GenericWorker");function s(u){o.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(d){h.dataIsReady=!0,h.data=d,h.max=d&&d.length||0,h.type=n.getTypeOf(d),h.isPaused||h._tickAndRepeat()},function(d){h.error(d)})}n.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(r,i,a){function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=n},{}],29:[function(r,i,a){var n=r("../utils"),o=r("./ConvertWorker"),s=r("./GenericWorker"),u=r("../base64"),h=r("../support"),d=r("../external"),l=null;if(h.nodestream)try{l=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(g,p){return new d.Promise(function(_,y){var E=[],M=g._internalType,C=g._outputType,w=g._mimeType;g.on("data",function(T,N){E.push(T),p&&p(N)}).on("error",function(T){E=[],y(T)}).on("end",function(){try{var T=function(N,O,k){switch(N){case"blob":return n.newBlob(n.transformTo("arraybuffer",O),k);case"base64":return u.encode(O);default:return n.transformTo(N,O)}}(C,function(N,O){var k,L=0,H=null,D=0;for(k=0;k<O.length;k++)D+=O[k].length;switch(N){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(H=new Uint8Array(D),k=0;k<O.length;k++)H.set(O[k],L),L+=O[k].length;return H;case"nodebuffer":return Buffer.concat(O);default:throw new Error("concat : unsupported type '"+N+"'")}}(M,E),w);_(T)}catch(N){y(N)}E=[]}).resume()})}function c(g,p,_){var y=p;switch(p){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=p,this._mimeType=_,n.checkSupport(y),this._worker=g.pipe(new o(y)),g.lock()}catch(E){this._worker=new s("error"),this._worker.error(E)}}c.prototype={accumulate:function(g){return f(this,g)},on:function(g,p){var _=this;return g==="data"?this._worker.on(g,function(y){p.call(_,y.data,y.meta)}):this._worker.on(g,function(){n.delay(p,arguments,_)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:this._outputType!=="nodebuffer"},g)}},i.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var n=new ArrayBuffer(0);try{a.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!r("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(r,i,a){for(var n=r("./utils"),o=r("./support"),s=r("./nodejsUtils"),u=r("./stream/GenericWorker"),h=new Array(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;h[254]=h[254]=1;function l(){u.call(this,"utf-8 decode"),this.leftOver=null}function f(){u.call(this,"utf-8 encode")}a.utf8encode=function(c){return o.nodebuffer?s.newBufferFrom(c,"utf-8"):function(g){var p,_,y,E,M,C=g.length,w=0;for(E=0;E<C;E++)(64512&(_=g.charCodeAt(E)))==55296&&E+1<C&&(64512&(y=g.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),E++),w+=_<128?1:_<2048?2:_<65536?3:4;for(p=o.uint8array?new Uint8Array(w):new Array(w),E=M=0;M<w;E++)(64512&(_=g.charCodeAt(E)))==55296&&E+1<C&&(64512&(y=g.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),E++),_<128?p[M++]=_:(_<2048?p[M++]=192|_>>>6:(_<65536?p[M++]=224|_>>>12:(p[M++]=240|_>>>18,p[M++]=128|_>>>12&63),p[M++]=128|_>>>6&63),p[M++]=128|63&_);return p}(c)},a.utf8decode=function(c){return o.nodebuffer?n.transformTo("nodebuffer",c).toString("utf-8"):function(g){var p,_,y,E,M=g.length,C=new Array(2*M);for(p=_=0;p<M;)if((y=g[p++])<128)C[_++]=y;else if(4<(E=h[y]))C[_++]=65533,p+=E-1;else{for(y&=E===2?31:E===3?15:7;1<E&&p<M;)y=y<<6|63&g[p++],E--;1<E?C[_++]=65533:y<65536?C[_++]=y:(y-=65536,C[_++]=55296|y>>10&1023,C[_++]=56320|1023&y)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),n.applyFromCharCode(C)}(c=n.transformTo(o.uint8array?"uint8array":"array",c))},n.inherits(l,u),l.prototype.processChunk=function(c){var g=n.transformTo(o.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var p=g;(g=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),g.set(p,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var _=function(E,M){var C;for((M=M||E.length)>E.length&&(M=E.length),C=M-1;0<=C&&(192&E[C])==128;)C--;return C<0||C===0?M:C+h[E[C]]>M?C:M}(g),y=g;_!==g.length&&(o.uint8array?(y=g.subarray(0,_),this.leftOver=g.subarray(_,g.length)):(y=g.slice(0,_),this.leftOver=g.slice(_,g.length))),this.push({data:a.utf8decode(y),meta:c.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=l,n.inherits(f,u),f.prototype.processChunk=function(c){this.push({data:a.utf8encode(c.data),meta:c.meta})},a.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,i,a){var n=r("./support"),o=r("./base64"),s=r("./nodejsUtils"),u=r("./external");function h(p){return p}function d(p,_){for(var y=0;y<p.length;++y)_[y]=255&p.charCodeAt(y);return _}r("setimmediate"),a.newBlob=function(p,_){a.checkSupport("blob");try{return new Blob([p],{type:_})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(p),y.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(p,_,y){var E=[],M=0,C=p.length;if(C<=y)return String.fromCharCode.apply(null,p);for(;M<C;)_==="array"||_==="nodebuffer"?E.push(String.fromCharCode.apply(null,p.slice(M,Math.min(M+y,C)))):E.push(String.fromCharCode.apply(null,p.subarray(M,Math.min(M+y,C)))),M+=y;return E.join("")},stringifyByChar:function(p){for(var _="",y=0;y<p.length;y++)_+=String.fromCharCode(p[y]);return _},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(p){var _=65536,y=a.getTypeOf(p),E=!0;if(y==="uint8array"?E=l.applyCanBeUsed.uint8array:y==="nodebuffer"&&(E=l.applyCanBeUsed.nodebuffer),E)for(;1<_;)try{return l.stringifyByChunk(p,y,_)}catch{_=Math.floor(_/2)}return l.stringifyByChar(p)}function c(p,_){for(var y=0;y<p.length;y++)_[y]=p[y];return _}a.applyFromCharCode=f;var g={};g.string={string:h,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return g.string.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:function(p){return d(p,s.allocBuffer(p.length))}},g.array={string:f,array:h,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return s.newBufferFrom(p)}},g.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return c(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:h,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return s.newBufferFrom(new Uint8Array(p))}},g.uint8array={string:f,array:function(p){return c(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:h,nodebuffer:function(p){return s.newBufferFrom(p)}},g.nodebuffer={string:f,array:function(p){return c(p,new Array(p.length))},arraybuffer:function(p){return g.nodebuffer.uint8array(p).buffer},uint8array:function(p){return c(p,new Uint8Array(p.length))},nodebuffer:h},a.transformTo=function(p,_){if(_=_||"",!p)return _;a.checkSupport(p);var y=a.getTypeOf(_);return g[y][p](_)},a.resolve=function(p){for(var _=p.split("/"),y=[],E=0;E<_.length;E++){var M=_[E];M==="."||M===""&&E!==0&&E!==_.length-1||(M===".."?y.pop():y.push(M))}return y.join("/")},a.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":n.nodebuffer&&s.isBuffer(p)?"nodebuffer":n.uint8array&&p instanceof Uint8Array?"uint8array":n.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(p){if(!n[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(p){var _,y,E="";for(y=0;y<(p||"").length;y++)E+="\\x"+((_=p.charCodeAt(y))<16?"0":"")+_.toString(16).toUpperCase();return E},a.delay=function(p,_,y){setImmediate(function(){p.apply(y||null,_||[])})},a.inherits=function(p,_){function y(){}y.prototype=_.prototype,p.prototype=new y},a.extend=function(){var p,_,y={};for(p=0;p<arguments.length;p++)for(_ in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],_)&&y[_]===void 0&&(y[_]=arguments[p][_]);return y},a.prepareContent=function(p,_,y,E,M){return u.Promise.resolve(_).then(function(C){return n.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(w,T){var N=new FileReader;N.onload=function(O){w(O.target.result)},N.onerror=function(O){T(O.target.error)},N.readAsArrayBuffer(C)}):C}).then(function(C){var w=a.getTypeOf(C);return w?(w==="arraybuffer"?C=a.transformTo("uint8array",C):w==="string"&&(M?C=o.decode(C):y&&E!==!0&&(C=function(T){return d(T,n.uint8array?new Uint8Array(T.length):new Array(T.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,i,a){var n=r("./reader/readerFor"),o=r("./utils"),s=r("./signature"),u=r("./zipEntry"),h=r("./support");function d(l){this.files=[],this.loadOptions=l}d.prototype={checkSignature:function(l){if(!this.reader.readAndCheckSignature(l)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(l)+")")}},isSignature:function(l,f){var c=this.reader.index;this.reader.setIndex(l);var g=this.reader.readString(4)===f;return this.reader.setIndex(c),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var l=this.reader.readData(this.zipCommentLength),f=h.uint8array?"uint8array":"array",c=o.transformTo(f,l);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var l,f,c,g=this.zip64EndOfCentralSize-44;0<g;)l=this.reader.readInt(2),f=this.reader.readInt(4),c=this.reader.readData(f),this.zip64ExtensibleData[l]={id:l,length:f,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var l,f;for(l=0;l<this.files.length;l++)f=this.files[l],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var l;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(l=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(l);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var l=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(l<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(l);var f=l;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(l=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(l),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var g=f-c;if(0<g)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(l){this.reader=n(l)},load:function(l){this.prepareReader(l),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,i,a){var n=r("./reader/readerFor"),o=r("./utils"),s=r("./compressedObject"),u=r("./crc32"),h=r("./utf8"),d=r("./compressions"),l=r("./support");function f(c,g){this.options=c,this.loadOptions=g}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var g,p;if(c.skip(22),this.fileNameLength=c.readInt(2),p=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(_){for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)&&d[y].magic===_)return d[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,g,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var g=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(g),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var g,p,_,y=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<y;)g=c.readInt(2),p=c.readInt(2),_=c.readData(p),this.extraFields[g]={id:g,length:p,value:_};c.setIndex(y)},handleUTF8:function(){var c=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var p=o.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var y=o.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var g=n(c.value);return g.readInt(1)!==1||u(this.fileName)!==g.readInt(4)?null:h.utf8decode(g.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var g=n(c.value);return g.readInt(1)!==1||u(this.fileComment)!==g.readInt(4)?null:h.utf8decode(g.readData(c.length-5))}return null}},i.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,i,a){function n(g,p,_){this.name=g,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=p,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=r("./stream/StreamHelper"),s=r("./stream/DataWorker"),u=r("./utf8"),h=r("./compressedObject"),d=r("./stream/GenericWorker");n.prototype={internalStream:function(g){var p=null,_="string";try{if(!g)throw new Error("No output type specified.");var y=(_=g.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),p=this._decompressWorker();var E=!this._dataBinary;E&&!y&&(p=p.pipe(new u.Utf8EncodeWorker)),!E&&y&&(p=p.pipe(new u.Utf8DecodeWorker))}catch(M){(p=new d("error")).error(M)}return new o(p,_,"")},async:function(g,p){return this.internalStream(g).accumulate(p)},nodeStream:function(g,p){return this.internalStream(g||"nodebuffer").toNodejsStream(p)},_compressWorker:function(g,p){if(this._data instanceof h&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(_,g,p)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof d?this._data:new s(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<l.length;c++)n.prototype[l[c]]=f;i.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,i,a){(function(n){var o,s,u=n.MutationObserver||n.WebKitMutationObserver;if(u){var h=0,d=new u(g),l=n.document.createTextNode("");d.observe(l,{characterData:!0}),o=function(){l.data=h=++h%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var p=n.document.createElement("script");p.onreadystatechange=function(){g(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},n.document.documentElement.appendChild(p)}:function(){setTimeout(g,0)};else{var f=new n.MessageChannel;f.port1.onmessage=g,o=function(){f.port2.postMessage(0)}}var c=[];function g(){var p,_;s=!0;for(var y=c.length;y;){for(_=c,c=[],p=-1;++p<y;)_[p]();y=c.length}s=!1}i.exports=function(p){c.push(p)!==1||s||o()}}).call(this,typeof vi<"u"?vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,i,a){var n=r("immediate");function o(){}var s={},u=["REJECTED"],h=["FULFILLED"],d=["PENDING"];function l(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,y!==o&&p(this,y)}function f(y,E,M){this.promise=y,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function c(y,E,M){n(function(){var C;try{C=E(M)}catch(w){return s.reject(y,w)}C===y?s.reject(y,new TypeError("Cannot resolve promise with itself")):s.resolve(y,C)})}function g(y){var E=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof E=="function")return function(){E.apply(y,arguments)}}function p(y,E){var M=!1;function C(N){M||(M=!0,s.reject(y,N))}function w(N){M||(M=!0,s.resolve(y,N))}var T=_(function(){E(w,C)});T.status==="error"&&C(T.value)}function _(y,E){var M={};try{M.value=y(E),M.status="success"}catch(C){M.status="error",M.value=C}return M}(i.exports=l).prototype.finally=function(y){if(typeof y!="function")return this;var E=this.constructor;return this.then(function(M){return E.resolve(y()).then(function(){return M})},function(M){return E.resolve(y()).then(function(){throw M})})},l.prototype.catch=function(y){return this.then(null,y)},l.prototype.then=function(y,E){if(typeof y!="function"&&this.state===h||typeof E!="function"&&this.state===u)return this;var M=new this.constructor(o);return this.state!==d?c(M,this.state===h?y:E,this.outcome):this.queue.push(new f(M,y,E)),M},f.prototype.callFulfilled=function(y){s.resolve(this.promise,y)},f.prototype.otherCallFulfilled=function(y){c(this.promise,this.onFulfilled,y)},f.prototype.callRejected=function(y){s.reject(this.promise,y)},f.prototype.otherCallRejected=function(y){c(this.promise,this.onRejected,y)},s.resolve=function(y,E){var M=_(g,E);if(M.status==="error")return s.reject(y,M.value);var C=M.value;if(C)p(y,C);else{y.state=h,y.outcome=E;for(var w=-1,T=y.queue.length;++w<T;)y.queue[w].callFulfilled(E)}return y},s.reject=function(y,E){y.state=u,y.outcome=E;for(var M=-1,C=y.queue.length;++M<C;)y.queue[M].callRejected(E);return y},l.resolve=function(y){return y instanceof this?y:s.resolve(new this(o),y)},l.reject=function(y){var E=new this(o);return s.reject(E,y)},l.all=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=y.length,C=!1;if(!M)return this.resolve([]);for(var w=new Array(M),T=0,N=-1,O=new this(o);++N<M;)k(y[N],N);return O;function k(L,H){E.resolve(L).then(function(D){w[H]=D,++T!==M||C||(C=!0,s.resolve(O,w))},function(D){C||(C=!0,s.reject(O,D))})}},l.race=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=y.length,C=!1;if(!M)return this.resolve([]);for(var w=-1,T=new this(o);++w<M;)N=y[w],E.resolve(N).then(function(O){C||(C=!0,s.resolve(T,O))},function(O){C||(C=!0,s.reject(T,O))});var N;return T}},{immediate:36}],38:[function(r,i,a){var n={};(0,r("./lib/utils/common").assign)(n,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),i.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,i,a){var n=r("./zlib/deflate"),o=r("./utils/common"),s=r("./utils/strings"),u=r("./zlib/messages"),h=r("./zlib/zstream"),d=Object.prototype.toString,l=0,f=-1,c=0,g=8;function p(y){if(!(this instanceof p))return new p(y);this.options=o.assign({level:f,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},y||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var M=n.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(M!==l)throw new Error(u[M]);if(E.header&&n.deflateSetHeader(this.strm,E.header),E.dictionary){var C;if(C=typeof E.dictionary=="string"?s.string2buf(E.dictionary):d.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(M=n.deflateSetDictionary(this.strm,C))!==l)throw new Error(u[M]);this._dict_set=!0}}function _(y,E){var M=new p(E);if(M.push(y,!0),M.err)throw M.msg||u[M.err];return M.result}p.prototype.push=function(y,E){var M,C,w=this.strm,T=this.options.chunkSize;if(this.ended)return!1;C=E===~~E?E:E===!0?4:0,typeof y=="string"?w.input=s.string2buf(y):d.call(y)==="[object ArrayBuffer]"?w.input=new Uint8Array(y):w.input=y,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new o.Buf8(T),w.next_out=0,w.avail_out=T),(M=n.deflate(w,C))!==1&&M!==l)return this.onEnd(M),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(w.output,w.next_out))):this.onData(o.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&M!==1);return C===4?(M=n.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===l):C!==2||(this.onEnd(l),!(w.avail_out=0))},p.prototype.onData=function(y){this.chunks.push(y)},p.prototype.onEnd=function(y){y===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Deflate=p,a.deflate=_,a.deflateRaw=function(y,E){return(E=E||{}).raw=!0,_(y,E)},a.gzip=function(y,E){return(E=E||{}).gzip=!0,_(y,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,i,a){var n=r("./zlib/inflate"),o=r("./utils/common"),s=r("./utils/strings"),u=r("./zlib/constants"),h=r("./zlib/messages"),d=r("./zlib/zstream"),l=r("./zlib/gzheader"),f=Object.prototype.toString;function c(p){if(!(this instanceof c))return new c(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||p&&p.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=n.inflateInit2(this.strm,_.windowBits);if(y!==u.Z_OK)throw new Error(h[y]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function g(p,_){var y=new c(_);if(y.push(p,!0),y.err)throw y.msg||h[y.err];return y.result}c.prototype.push=function(p,_){var y,E,M,C,w,T,N=this.strm,O=this.options.chunkSize,k=this.options.dictionary,L=!1;if(this.ended)return!1;E=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof p=="string"?N.input=s.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?N.input=new Uint8Array(p):N.input=p,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new o.Buf8(O),N.next_out=0,N.avail_out=O),(y=n.inflate(N,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&k&&(T=typeof k=="string"?s.string2buf(k):f.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,y=n.inflateSetDictionary(this.strm,T)),y===u.Z_BUF_ERROR&&L===!0&&(y=u.Z_OK,L=!1),y!==u.Z_STREAM_END&&y!==u.Z_OK)return this.onEnd(y),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&y!==u.Z_STREAM_END&&(N.avail_in!==0||E!==u.Z_FINISH&&E!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=s.utf8border(N.output,N.next_out),C=N.next_out-M,w=s.buf2string(N.output,M),N.next_out=C,N.avail_out=O-C,C&&o.arraySet(N.output,N.output,M,C,0),this.onData(w)):this.onData(o.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(L=!0)}while((0<N.avail_in||N.avail_out===0)&&y!==u.Z_STREAM_END);return y===u.Z_STREAM_END&&(E=u.Z_FINISH),E===u.Z_FINISH?(y=n.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u.Z_OK):E!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(N.avail_out=0))},c.prototype.onData=function(p){this.chunks.push(p)},c.prototype.onEnd=function(p){p===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},a.Inflate=c,a.inflate=g,a.inflateRaw=function(p,_){return(_=_||{}).raw=!0,g(p,_)},a.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,i,a){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var d=h.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var l in d)d.hasOwnProperty(l)&&(u[l]=d[l])}}return u},a.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var o={arraySet:function(u,h,d,l,f){if(h.subarray&&u.subarray)u.set(h.subarray(d,d+l),f);else for(var c=0;c<l;c++)u[f+c]=h[d+c]},flattenChunks:function(u){var h,d,l,f,c,g;for(h=l=0,d=u.length;h<d;h++)l+=u[h].length;for(g=new Uint8Array(l),h=f=0,d=u.length;h<d;h++)c=u[h],g.set(c,f),f+=c.length;return g}},s={arraySet:function(u,h,d,l,f){for(var c=0;c<l;c++)u[f+c]=h[d+c]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(n)},{}],42:[function(r,i,a){var n=r("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new n.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function d(l,f){if(f<65537&&(l.subarray&&s||!l.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(l,f));for(var c="",g=0;g<f;g++)c+=String.fromCharCode(l[g]);return c}u[254]=u[254]=1,a.string2buf=function(l){var f,c,g,p,_,y=l.length,E=0;for(p=0;p<y;p++)(64512&(c=l.charCodeAt(p)))==55296&&p+1<y&&(64512&(g=l.charCodeAt(p+1)))==56320&&(c=65536+(c-55296<<10)+(g-56320),p++),E+=c<128?1:c<2048?2:c<65536?3:4;for(f=new n.Buf8(E),p=_=0;_<E;p++)(64512&(c=l.charCodeAt(p)))==55296&&p+1<y&&(64512&(g=l.charCodeAt(p+1)))==56320&&(c=65536+(c-55296<<10)+(g-56320),p++),c<128?f[_++]=c:(c<2048?f[_++]=192|c>>>6:(c<65536?f[_++]=224|c>>>12:(f[_++]=240|c>>>18,f[_++]=128|c>>>12&63),f[_++]=128|c>>>6&63),f[_++]=128|63&c);return f},a.buf2binstring=function(l){return d(l,l.length)},a.binstring2buf=function(l){for(var f=new n.Buf8(l.length),c=0,g=f.length;c<g;c++)f[c]=l.charCodeAt(c);return f},a.buf2string=function(l,f){var c,g,p,_,y=f||l.length,E=new Array(2*y);for(c=g=0;c<y;)if((p=l[c++])<128)E[g++]=p;else if(4<(_=u[p]))E[g++]=65533,c+=_-1;else{for(p&=_===2?31:_===3?15:7;1<_&&c<y;)p=p<<6|63&l[c++],_--;1<_?E[g++]=65533:p<65536?E[g++]=p:(p-=65536,E[g++]=55296|p>>10&1023,E[g++]=56320|1023&p)}return d(E,g)},a.utf8border=function(l,f){var c;for((f=f||l.length)>l.length&&(f=l.length),c=f-1;0<=c&&(192&l[c])==128;)c--;return c<0||c===0?f:c+u[l[c]]>f?c:f}},{"./common":41}],43:[function(r,i,a){i.exports=function(n,o,s,u){for(var h=65535&n|0,d=n>>>16&65535|0,l=0;s!==0;){for(s-=l=2e3<s?2e3:s;d=d+(h=h+o[u++]|0)|0,--l;);h%=65521,d%=65521}return h|d<<16|0}},{}],44:[function(r,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,i,a){var n=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();i.exports=function(o,s,u,h){var d=n,l=h+u;o^=-1;for(var f=h;f<l;f++)o=o>>>8^d[255&(o^s[f])];return-1^o}},{}],46:[function(r,i,a){var n,o=r("../utils/common"),s=r("./trees"),u=r("./adler32"),h=r("./crc32"),d=r("./messages"),l=0,f=4,c=0,g=-2,p=-1,_=4,y=2,E=8,M=9,C=286,w=30,T=19,N=2*C+1,O=15,k=3,L=258,H=L+k+1,D=42,P=113,v=1,z=2,rt=3,G=4;function ot(m,$){return m.msg=d[$],$}function F(m){return(m<<1)-(4<m?9:0)}function J(m){for(var $=m.length;0<=--$;)m[$]=0}function R(m){var $=m.state,B=$.pending;B>m.avail_out&&(B=m.avail_out),B!==0&&(o.arraySet(m.output,$.pending_buf,$.pending_out,B,m.next_out),m.next_out+=B,$.pending_out+=B,m.total_out+=B,m.avail_out-=B,$.pending-=B,$.pending===0&&($.pending_out=0))}function I(m,$){s._tr_flush_block(m,0<=m.block_start?m.block_start:-1,m.strstart-m.block_start,$),m.block_start=m.strstart,R(m.strm)}function it(m,$){m.pending_buf[m.pending++]=$}function Q(m,$){m.pending_buf[m.pending++]=$>>>8&255,m.pending_buf[m.pending++]=255&$}function Z(m,$){var B,A,b=m.max_chain_length,x=m.strstart,U=m.prev_length,q=m.nice_match,S=m.strstart>m.w_size-H?m.strstart-(m.w_size-H):0,V=m.window,K=m.w_mask,W=m.prev,tt=m.strstart+L,Mt=V[x+U-1],ft=V[x+U];m.prev_length>=m.good_match&&(b>>=2),q>m.lookahead&&(q=m.lookahead);do if(V[(B=$)+U]===ft&&V[B+U-1]===Mt&&V[B]===V[x]&&V[++B]===V[x+1]){x+=2,B++;do;while(V[++x]===V[++B]&&V[++x]===V[++B]&&V[++x]===V[++B]&&V[++x]===V[++B]&&V[++x]===V[++B]&&V[++x]===V[++B]&&V[++x]===V[++B]&&V[++x]===V[++B]&&x<tt);if(A=L-(tt-x),x=tt-L,U<A){if(m.match_start=$,q<=(U=A))break;Mt=V[x+U-1],ft=V[x+U]}}while(($=W[$&K])>S&&--b!=0);return U<=m.lookahead?U:m.lookahead}function It(m){var $,B,A,b,x,U,q,S,V,K,W=m.w_size;do{if(b=m.window_size-m.lookahead-m.strstart,m.strstart>=W+(W-H)){for(o.arraySet(m.window,m.window,W,W,0),m.match_start-=W,m.strstart-=W,m.block_start-=W,$=B=m.hash_size;A=m.head[--$],m.head[$]=W<=A?A-W:0,--B;);for($=B=W;A=m.prev[--$],m.prev[$]=W<=A?A-W:0,--B;);b+=W}if(m.strm.avail_in===0)break;if(U=m.strm,q=m.window,S=m.strstart+m.lookahead,V=b,K=void 0,K=U.avail_in,V<K&&(K=V),B=K===0?0:(U.avail_in-=K,o.arraySet(q,U.input,U.next_in,K,S),U.state.wrap===1?U.adler=u(U.adler,q,K,S):U.state.wrap===2&&(U.adler=h(U.adler,q,K,S)),U.next_in+=K,U.total_in+=K,K),m.lookahead+=B,m.lookahead+m.insert>=k)for(x=m.strstart-m.insert,m.ins_h=m.window[x],m.ins_h=(m.ins_h<<m.hash_shift^m.window[x+1])&m.hash_mask;m.insert&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[x+k-1])&m.hash_mask,m.prev[x&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=x,x++,m.insert--,!(m.lookahead+m.insert<k)););}while(m.lookahead<H&&m.strm.avail_in!==0)}function $t(m,$){for(var B,A;;){if(m.lookahead<H){if(It(m),m.lookahead<H&&$===l)return v;if(m.lookahead===0)break}if(B=0,m.lookahead>=k&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+k-1])&m.hash_mask,B=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),B!==0&&m.strstart-B<=m.w_size-H&&(m.match_length=Z(m,B)),m.match_length>=k)if(A=s._tr_tally(m,m.strstart-m.match_start,m.match_length-k),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=k){for(m.match_length--;m.strstart++,m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+k-1])&m.hash_mask,B=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart,--m.match_length!=0;);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+1])&m.hash_mask;else A=s._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if(A&&(I(m,!1),m.strm.avail_out===0))return v}return m.insert=m.strstart<k-1?m.strstart:k-1,$===f?(I(m,!0),m.strm.avail_out===0?rt:G):m.last_lit&&(I(m,!1),m.strm.avail_out===0)?v:z}function ct(m,$){for(var B,A,b;;){if(m.lookahead<H){if(It(m),m.lookahead<H&&$===l)return v;if(m.lookahead===0)break}if(B=0,m.lookahead>=k&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+k-1])&m.hash_mask,B=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=k-1,B!==0&&m.prev_length<m.max_lazy_match&&m.strstart-B<=m.w_size-H&&(m.match_length=Z(m,B),m.match_length<=5&&(m.strategy===1||m.match_length===k&&4096<m.strstart-m.match_start)&&(m.match_length=k-1)),m.prev_length>=k&&m.match_length<=m.prev_length){for(b=m.strstart+m.lookahead-k,A=s._tr_tally(m,m.strstart-1-m.prev_match,m.prev_length-k),m.lookahead-=m.prev_length-1,m.prev_length-=2;++m.strstart<=b&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+k-1])&m.hash_mask,B=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),--m.prev_length!=0;);if(m.match_available=0,m.match_length=k-1,m.strstart++,A&&(I(m,!1),m.strm.avail_out===0))return v}else if(m.match_available){if((A=s._tr_tally(m,0,m.window[m.strstart-1]))&&I(m,!1),m.strstart++,m.lookahead--,m.strm.avail_out===0)return v}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&(A=s._tr_tally(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<k-1?m.strstart:k-1,$===f?(I(m,!0),m.strm.avail_out===0?rt:G):m.last_lit&&(I(m,!1),m.strm.avail_out===0)?v:z}function gt(m,$,B,A,b){this.good_length=m,this.max_lazy=$,this.nice_length=B,this.max_chain=A,this.func=b}function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*N),this.dyn_dtree=new o.Buf16(2*(2*w+1)),this.bl_tree=new o.Buf16(2*(2*T+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(O+1),this.heap=new o.Buf16(2*C+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function kt(m){var $;return m&&m.state?(m.total_in=m.total_out=0,m.data_type=y,($=m.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?D:P,m.adler=$.wrap===2?0:1,$.last_flush=l,s._tr_init($),c):ot(m,g)}function de(m){var $=kt(m);return $===c&&function(B){B.window_size=2*B.w_size,J(B.head),B.max_lazy_match=n[B.level].max_lazy,B.good_match=n[B.level].good_length,B.nice_match=n[B.level].nice_length,B.max_chain_length=n[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=k-1,B.match_available=0,B.ins_h=0}(m.state),$}function ue(m,$,B,A,b,x){if(!m)return g;var U=1;if($===p&&($=6),A<0?(U=0,A=-A):15<A&&(U=2,A-=16),b<1||M<b||B!==E||A<8||15<A||$<0||9<$||x<0||_<x)return ot(m,g);A===8&&(A=9);var q=new Ft;return(m.state=q).strm=m,q.wrap=U,q.gzhead=null,q.w_bits=A,q.w_size=1<<q.w_bits,q.w_mask=q.w_size-1,q.hash_bits=b+7,q.hash_size=1<<q.hash_bits,q.hash_mask=q.hash_size-1,q.hash_shift=~~((q.hash_bits+k-1)/k),q.window=new o.Buf8(2*q.w_size),q.head=new o.Buf16(q.hash_size),q.prev=new o.Buf16(q.w_size),q.lit_bufsize=1<<b+6,q.pending_buf_size=4*q.lit_bufsize,q.pending_buf=new o.Buf8(q.pending_buf_size),q.d_buf=1*q.lit_bufsize,q.l_buf=3*q.lit_bufsize,q.level=$,q.strategy=x,q.method=B,de(m)}n=[new gt(0,0,0,0,function(m,$){var B=65535;for(B>m.pending_buf_size-5&&(B=m.pending_buf_size-5);;){if(m.lookahead<=1){if(It(m),m.lookahead===0&&$===l)return v;if(m.lookahead===0)break}m.strstart+=m.lookahead,m.lookahead=0;var A=m.block_start+B;if((m.strstart===0||m.strstart>=A)&&(m.lookahead=m.strstart-A,m.strstart=A,I(m,!1),m.strm.avail_out===0)||m.strstart-m.block_start>=m.w_size-H&&(I(m,!1),m.strm.avail_out===0))return v}return m.insert=0,$===f?(I(m,!0),m.strm.avail_out===0?rt:G):(m.strstart>m.block_start&&(I(m,!1),m.strm.avail_out),v)}),new gt(4,4,8,4,$t),new gt(4,5,16,8,$t),new gt(4,6,32,32,$t),new gt(4,4,16,16,ct),new gt(8,16,32,32,ct),new gt(8,16,128,128,ct),new gt(8,32,128,256,ct),new gt(32,128,258,1024,ct),new gt(32,258,258,4096,ct)],a.deflateInit=function(m,$){return ue(m,$,E,15,8,0)},a.deflateInit2=ue,a.deflateReset=de,a.deflateResetKeep=kt,a.deflateSetHeader=function(m,$){return m&&m.state?m.state.wrap!==2?g:(m.state.gzhead=$,c):g},a.deflate=function(m,$){var B,A,b,x;if(!m||!m.state||5<$||$<0)return m?ot(m,g):g;if(A=m.state,!m.output||!m.input&&m.avail_in!==0||A.status===666&&$!==f)return ot(m,m.avail_out===0?-5:g);if(A.strm=m,B=A.last_flush,A.last_flush=$,A.status===D)if(A.wrap===2)m.adler=0,it(A,31),it(A,139),it(A,8),A.gzhead?(it(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),it(A,255&A.gzhead.time),it(A,A.gzhead.time>>8&255),it(A,A.gzhead.time>>16&255),it(A,A.gzhead.time>>24&255),it(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),it(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(it(A,255&A.gzhead.extra.length),it(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(m.adler=h(m.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(it(A,0),it(A,0),it(A,0),it(A,0),it(A,0),it(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),it(A,3),A.status=P);else{var U=E+(A.w_bits-8<<4)<<8;U|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(U|=32),U+=31-U%31,A.status=P,Q(A,U),A.strstart!==0&&(Q(A,m.adler>>>16),Q(A,65535&m.adler)),m.adler=1}if(A.status===69)if(A.gzhead.extra){for(b=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>b&&(m.adler=h(m.adler,A.pending_buf,A.pending-b,b)),R(m),b=A.pending,A.pending!==A.pending_buf_size));)it(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>b&&(m.adler=h(m.adler,A.pending_buf,A.pending-b,b)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){b=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>b&&(m.adler=h(m.adler,A.pending_buf,A.pending-b,b)),R(m),b=A.pending,A.pending===A.pending_buf_size)){x=1;break}x=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,it(A,x)}while(x!==0);A.gzhead.hcrc&&A.pending>b&&(m.adler=h(m.adler,A.pending_buf,A.pending-b,b)),x===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){b=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>b&&(m.adler=h(m.adler,A.pending_buf,A.pending-b,b)),R(m),b=A.pending,A.pending===A.pending_buf_size)){x=1;break}x=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,it(A,x)}while(x!==0);A.gzhead.hcrc&&A.pending>b&&(m.adler=h(m.adler,A.pending_buf,A.pending-b,b)),x===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&R(m),A.pending+2<=A.pending_buf_size&&(it(A,255&m.adler),it(A,m.adler>>8&255),m.adler=0,A.status=P)):A.status=P),A.pending!==0){if(R(m),m.avail_out===0)return A.last_flush=-1,c}else if(m.avail_in===0&&F($)<=F(B)&&$!==f)return ot(m,-5);if(A.status===666&&m.avail_in!==0)return ot(m,-5);if(m.avail_in!==0||A.lookahead!==0||$!==l&&A.status!==666){var q=A.strategy===2?function(S,V){for(var K;;){if(S.lookahead===0&&(It(S),S.lookahead===0)){if(V===l)return v;break}if(S.match_length=0,K=s._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,K&&(I(S,!1),S.strm.avail_out===0))return v}return S.insert=0,V===f?(I(S,!0),S.strm.avail_out===0?rt:G):S.last_lit&&(I(S,!1),S.strm.avail_out===0)?v:z}(A,$):A.strategy===3?function(S,V){for(var K,W,tt,Mt,ft=S.window;;){if(S.lookahead<=L){if(It(S),S.lookahead<=L&&V===l)return v;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=k&&0<S.strstart&&(W=ft[tt=S.strstart-1])===ft[++tt]&&W===ft[++tt]&&W===ft[++tt]){Mt=S.strstart+L;do;while(W===ft[++tt]&&W===ft[++tt]&&W===ft[++tt]&&W===ft[++tt]&&W===ft[++tt]&&W===ft[++tt]&&W===ft[++tt]&&W===ft[++tt]&&tt<Mt);S.match_length=L-(Mt-tt),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=k?(K=s._tr_tally(S,1,S.match_length-k),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(K=s._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),K&&(I(S,!1),S.strm.avail_out===0))return v}return S.insert=0,V===f?(I(S,!0),S.strm.avail_out===0?rt:G):S.last_lit&&(I(S,!1),S.strm.avail_out===0)?v:z}(A,$):n[A.level].func(A,$);if(q!==rt&&q!==G||(A.status=666),q===v||q===rt)return m.avail_out===0&&(A.last_flush=-1),c;if(q===z&&($===1?s._tr_align(A):$!==5&&(s._tr_stored_block(A,0,0,!1),$===3&&(J(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),R(m),m.avail_out===0))return A.last_flush=-1,c}return $!==f?c:A.wrap<=0?1:(A.wrap===2?(it(A,255&m.adler),it(A,m.adler>>8&255),it(A,m.adler>>16&255),it(A,m.adler>>24&255),it(A,255&m.total_in),it(A,m.total_in>>8&255),it(A,m.total_in>>16&255),it(A,m.total_in>>24&255)):(Q(A,m.adler>>>16),Q(A,65535&m.adler)),R(m),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?c:1)},a.deflateEnd=function(m){var $;return m&&m.state?($=m.state.status)!==D&&$!==69&&$!==73&&$!==91&&$!==103&&$!==P&&$!==666?ot(m,g):(m.state=null,$===P?ot(m,-3):c):g},a.deflateSetDictionary=function(m,$){var B,A,b,x,U,q,S,V,K=$.length;if(!m||!m.state||(x=(B=m.state).wrap)===2||x===1&&B.status!==D||B.lookahead)return g;for(x===1&&(m.adler=u(m.adler,$,K,0)),B.wrap=0,K>=B.w_size&&(x===0&&(J(B.head),B.strstart=0,B.block_start=0,B.insert=0),V=new o.Buf8(B.w_size),o.arraySet(V,$,K-B.w_size,B.w_size,0),$=V,K=B.w_size),U=m.avail_in,q=m.next_in,S=m.input,m.avail_in=K,m.next_in=0,m.input=$,It(B);B.lookahead>=k;){for(A=B.strstart,b=B.lookahead-(k-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[A+k-1])&B.hash_mask,B.prev[A&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=A,A++,--b;);B.strstart=A,B.lookahead=k-1,It(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=k-1,B.match_available=0,m.next_in=q,m.input=S,m.avail_in=U,B.wrap=x,c},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,i,a){i.exports=function(n,o){var s,u,h,d,l,f,c,g,p,_,y,E,M,C,w,T,N,O,k,L,H,D,P,v,z;s=n.state,u=n.next_in,v=n.input,h=u+(n.avail_in-5),d=n.next_out,z=n.output,l=d-(o-n.avail_out),f=d+(n.avail_out-257),c=s.dmax,g=s.wsize,p=s.whave,_=s.wnext,y=s.window,E=s.hold,M=s.bits,C=s.lencode,w=s.distcode,T=(1<<s.lenbits)-1,N=(1<<s.distbits)-1;t:do{M<15&&(E+=v[u++]<<M,M+=8,E+=v[u++]<<M,M+=8),O=C[E&T];e:for(;;){if(E>>>=k=O>>>24,M-=k,(k=O>>>16&255)===0)z[d++]=65535&O;else{if(!(16&k)){if(!(64&k)){O=C[(65535&O)+(E&(1<<k)-1)];continue e}if(32&k){s.mode=12;break t}n.msg="invalid literal/length code",s.mode=30;break t}L=65535&O,(k&=15)&&(M<k&&(E+=v[u++]<<M,M+=8),L+=E&(1<<k)-1,E>>>=k,M-=k),M<15&&(E+=v[u++]<<M,M+=8,E+=v[u++]<<M,M+=8),O=w[E&N];r:for(;;){if(E>>>=k=O>>>24,M-=k,!(16&(k=O>>>16&255))){if(!(64&k)){O=w[(65535&O)+(E&(1<<k)-1)];continue r}n.msg="invalid distance code",s.mode=30;break t}if(H=65535&O,M<(k&=15)&&(E+=v[u++]<<M,(M+=8)<k&&(E+=v[u++]<<M,M+=8)),c<(H+=E&(1<<k)-1)){n.msg="invalid distance too far back",s.mode=30;break t}if(E>>>=k,M-=k,(k=d-l)<H){if(p<(k=H-k)&&s.sane){n.msg="invalid distance too far back",s.mode=30;break t}if(P=y,(D=0)===_){if(D+=g-k,k<L){for(L-=k;z[d++]=y[D++],--k;);D=d-H,P=z}}else if(_<k){if(D+=g+_-k,(k-=_)<L){for(L-=k;z[d++]=y[D++],--k;);if(D=0,_<L){for(L-=k=_;z[d++]=y[D++],--k;);D=d-H,P=z}}}else if(D+=_-k,k<L){for(L-=k;z[d++]=y[D++],--k;);D=d-H,P=z}for(;2<L;)z[d++]=P[D++],z[d++]=P[D++],z[d++]=P[D++],L-=3;L&&(z[d++]=P[D++],1<L&&(z[d++]=P[D++]))}else{for(D=d-H;z[d++]=z[D++],z[d++]=z[D++],z[d++]=z[D++],2<(L-=3););L&&(z[d++]=z[D++],1<L&&(z[d++]=z[D++]))}break}}break}}while(u<h&&d<f);u-=L=M>>3,E&=(1<<(M-=L<<3))-1,n.next_in=u,n.next_out=d,n.avail_in=u<h?h-u+5:5-(u-h),n.avail_out=d<f?f-d+257:257-(d-f),s.hold=E,s.bits=M}},{}],49:[function(r,i,a){var n=r("../utils/common"),o=r("./adler32"),s=r("./crc32"),u=r("./inffast"),h=r("./inftrees"),d=1,l=2,f=0,c=-2,g=1,p=852,_=592;function y(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(D){var P;return D&&D.state?(P=D.state,D.total_in=D.total_out=P.total=0,D.msg="",P.wrap&&(D.adler=1&P.wrap),P.mode=g,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new n.Buf32(p),P.distcode=P.distdyn=new n.Buf32(_),P.sane=1,P.back=-1,f):c}function C(D){var P;return D&&D.state?((P=D.state).wsize=0,P.whave=0,P.wnext=0,M(D)):c}function w(D,P){var v,z;return D&&D.state?(z=D.state,P<0?(v=0,P=-P):(v=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?c:(z.window!==null&&z.wbits!==P&&(z.window=null),z.wrap=v,z.wbits=P,C(D))):c}function T(D,P){var v,z;return D?(z=new E,(D.state=z).window=null,(v=w(D,P))!==f&&(D.state=null),v):c}var N,O,k=!0;function L(D){if(k){var P;for(N=new n.Buf32(512),O=new n.Buf32(32),P=0;P<144;)D.lens[P++]=8;for(;P<256;)D.lens[P++]=9;for(;P<280;)D.lens[P++]=7;for(;P<288;)D.lens[P++]=8;for(h(d,D.lens,0,288,N,0,D.work,{bits:9}),P=0;P<32;)D.lens[P++]=5;h(l,D.lens,0,32,O,0,D.work,{bits:5}),k=!1}D.lencode=N,D.lenbits=9,D.distcode=O,D.distbits=5}function H(D,P,v,z){var rt,G=D.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new n.Buf8(G.wsize)),z>=G.wsize?(n.arraySet(G.window,P,v-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(z<(rt=G.wsize-G.wnext)&&(rt=z),n.arraySet(G.window,P,v-z,rt,G.wnext),(z-=rt)?(n.arraySet(G.window,P,v-z,z,0),G.wnext=z,G.whave=G.wsize):(G.wnext+=rt,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=rt))),0}a.inflateReset=C,a.inflateReset2=w,a.inflateResetKeep=M,a.inflateInit=function(D){return T(D,15)},a.inflateInit2=T,a.inflate=function(D,P){var v,z,rt,G,ot,F,J,R,I,it,Q,Z,It,$t,ct,gt,Ft,kt,de,ue,m,$,B,A,b=0,x=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return c;(v=D.state).mode===12&&(v.mode=13),ot=D.next_out,rt=D.output,J=D.avail_out,G=D.next_in,z=D.input,F=D.avail_in,R=v.hold,I=v.bits,it=F,Q=J,$=f;t:for(;;)switch(v.mode){case g:if(v.wrap===0){v.mode=13;break}for(;I<16;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(2&v.wrap&&R===35615){x[v.check=0]=255&R,x[1]=R>>>8&255,v.check=s(v.check,x,2,0),I=R=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&R)<<8)+(R>>8))%31){D.msg="incorrect header check",v.mode=30;break}if((15&R)!=8){D.msg="unknown compression method",v.mode=30;break}if(I-=4,m=8+(15&(R>>>=4)),v.wbits===0)v.wbits=m;else if(m>v.wbits){D.msg="invalid window size",v.mode=30;break}v.dmax=1<<m,D.adler=v.check=1,v.mode=512&R?10:12,I=R=0;break;case 2:for(;I<16;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(v.flags=R,(255&v.flags)!=8){D.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){D.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=R>>8&1),512&v.flags&&(x[0]=255&R,x[1]=R>>>8&255,v.check=s(v.check,x,2,0)),I=R=0,v.mode=3;case 3:for(;I<32;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}v.head&&(v.head.time=R),512&v.flags&&(x[0]=255&R,x[1]=R>>>8&255,x[2]=R>>>16&255,x[3]=R>>>24&255,v.check=s(v.check,x,4,0)),I=R=0,v.mode=4;case 4:for(;I<16;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}v.head&&(v.head.xflags=255&R,v.head.os=R>>8),512&v.flags&&(x[0]=255&R,x[1]=R>>>8&255,v.check=s(v.check,x,2,0)),I=R=0,v.mode=5;case 5:if(1024&v.flags){for(;I<16;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}v.length=R,v.head&&(v.head.extra_len=R),512&v.flags&&(x[0]=255&R,x[1]=R>>>8&255,v.check=s(v.check,x,2,0)),I=R=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(F<(Z=v.length)&&(Z=F),Z&&(v.head&&(m=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),n.arraySet(v.head.extra,z,G,Z,m)),512&v.flags&&(v.check=s(v.check,z,Z,G)),F-=Z,G+=Z,v.length-=Z),v.length))break t;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(F===0)break t;for(Z=0;m=z[G+Z++],v.head&&m&&v.length<65536&&(v.head.name+=String.fromCharCode(m)),m&&Z<F;);if(512&v.flags&&(v.check=s(v.check,z,Z,G)),F-=Z,G+=Z,m)break t}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(F===0)break t;for(Z=0;m=z[G+Z++],v.head&&m&&v.length<65536&&(v.head.comment+=String.fromCharCode(m)),m&&Z<F;);if(512&v.flags&&(v.check=s(v.check,z,Z,G)),F-=Z,G+=Z,m)break t}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;I<16;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(R!==(65535&v.check)){D.msg="header crc mismatch",v.mode=30;break}I=R=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),D.adler=v.check=0,v.mode=12;break;case 10:for(;I<32;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}D.adler=v.check=y(R),I=R=0,v.mode=11;case 11:if(v.havedict===0)return D.next_out=ot,D.avail_out=J,D.next_in=G,D.avail_in=F,v.hold=R,v.bits=I,2;D.adler=v.check=1,v.mode=12;case 12:if(P===5||P===6)break t;case 13:if(v.last){R>>>=7&I,I-=7&I,v.mode=27;break}for(;I<3;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}switch(v.last=1&R,I-=1,3&(R>>>=1)){case 0:v.mode=14;break;case 1:if(L(v),v.mode=20,P!==6)break;R>>>=2,I-=2;break t;case 2:v.mode=17;break;case 3:D.msg="invalid block type",v.mode=30}R>>>=2,I-=2;break;case 14:for(R>>>=7&I,I-=7&I;I<32;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if((65535&R)!=(R>>>16^65535)){D.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&R,I=R=0,v.mode=15,P===6)break t;case 15:v.mode=16;case 16:if(Z=v.length){if(F<Z&&(Z=F),J<Z&&(Z=J),Z===0)break t;n.arraySet(rt,z,G,Z,ot),F-=Z,G+=Z,J-=Z,ot+=Z,v.length-=Z;break}v.mode=12;break;case 17:for(;I<14;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(v.nlen=257+(31&R),R>>>=5,I-=5,v.ndist=1+(31&R),R>>>=5,I-=5,v.ncode=4+(15&R),R>>>=4,I-=4,286<v.nlen||30<v.ndist){D.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;I<3;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}v.lens[U[v.have++]]=7&R,R>>>=3,I-=3}for(;v.have<19;)v.lens[U[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,B={bits:v.lenbits},$=h(0,v.lens,0,19,v.lencode,0,v.work,B),v.lenbits=B.bits,$){D.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;gt=(b=v.lencode[R&(1<<v.lenbits)-1])>>>16&255,Ft=65535&b,!((ct=b>>>24)<=I);){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(Ft<16)R>>>=ct,I-=ct,v.lens[v.have++]=Ft;else{if(Ft===16){for(A=ct+2;I<A;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(R>>>=ct,I-=ct,v.have===0){D.msg="invalid bit length repeat",v.mode=30;break}m=v.lens[v.have-1],Z=3+(3&R),R>>>=2,I-=2}else if(Ft===17){for(A=ct+3;I<A;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}I-=ct,m=0,Z=3+(7&(R>>>=ct)),R>>>=3,I-=3}else{for(A=ct+7;I<A;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}I-=ct,m=0,Z=11+(127&(R>>>=ct)),R>>>=7,I-=7}if(v.have+Z>v.nlen+v.ndist){D.msg="invalid bit length repeat",v.mode=30;break}for(;Z--;)v.lens[v.have++]=m}}if(v.mode===30)break;if(v.lens[256]===0){D.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,B={bits:v.lenbits},$=h(d,v.lens,0,v.nlen,v.lencode,0,v.work,B),v.lenbits=B.bits,$){D.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,B={bits:v.distbits},$=h(l,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,B),v.distbits=B.bits,$){D.msg="invalid distances set",v.mode=30;break}if(v.mode=20,P===6)break t;case 20:v.mode=21;case 21:if(6<=F&&258<=J){D.next_out=ot,D.avail_out=J,D.next_in=G,D.avail_in=F,v.hold=R,v.bits=I,u(D,Q),ot=D.next_out,rt=D.output,J=D.avail_out,G=D.next_in,z=D.input,F=D.avail_in,R=v.hold,I=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;gt=(b=v.lencode[R&(1<<v.lenbits)-1])>>>16&255,Ft=65535&b,!((ct=b>>>24)<=I);){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(gt&&!(240&gt)){for(kt=ct,de=gt,ue=Ft;gt=(b=v.lencode[ue+((R&(1<<kt+de)-1)>>kt)])>>>16&255,Ft=65535&b,!(kt+(ct=b>>>24)<=I);){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}R>>>=kt,I-=kt,v.back+=kt}if(R>>>=ct,I-=ct,v.back+=ct,v.length=Ft,gt===0){v.mode=26;break}if(32&gt){v.back=-1,v.mode=12;break}if(64&gt){D.msg="invalid literal/length code",v.mode=30;break}v.extra=15&gt,v.mode=22;case 22:if(v.extra){for(A=v.extra;I<A;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}v.length+=R&(1<<v.extra)-1,R>>>=v.extra,I-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;gt=(b=v.distcode[R&(1<<v.distbits)-1])>>>16&255,Ft=65535&b,!((ct=b>>>24)<=I);){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(!(240&gt)){for(kt=ct,de=gt,ue=Ft;gt=(b=v.distcode[ue+((R&(1<<kt+de)-1)>>kt)])>>>16&255,Ft=65535&b,!(kt+(ct=b>>>24)<=I);){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}R>>>=kt,I-=kt,v.back+=kt}if(R>>>=ct,I-=ct,v.back+=ct,64&gt){D.msg="invalid distance code",v.mode=30;break}v.offset=Ft,v.extra=15&gt,v.mode=24;case 24:if(v.extra){for(A=v.extra;I<A;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}v.offset+=R&(1<<v.extra)-1,R>>>=v.extra,I-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){D.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(J===0)break t;if(Z=Q-J,v.offset>Z){if((Z=v.offset-Z)>v.whave&&v.sane){D.msg="invalid distance too far back",v.mode=30;break}It=Z>v.wnext?(Z-=v.wnext,v.wsize-Z):v.wnext-Z,Z>v.length&&(Z=v.length),$t=v.window}else $t=rt,It=ot-v.offset,Z=v.length;for(J<Z&&(Z=J),J-=Z,v.length-=Z;rt[ot++]=$t[It++],--Z;);v.length===0&&(v.mode=21);break;case 26:if(J===0)break t;rt[ot++]=v.length,J--,v.mode=21;break;case 27:if(v.wrap){for(;I<32;){if(F===0)break t;F--,R|=z[G++]<<I,I+=8}if(Q-=J,D.total_out+=Q,v.total+=Q,Q&&(D.adler=v.check=v.flags?s(v.check,rt,Q,ot-Q):o(v.check,rt,Q,ot-Q)),Q=J,(v.flags?R:y(R))!==v.check){D.msg="incorrect data check",v.mode=30;break}I=R=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;I<32;){if(F===0)break t;F--,R+=z[G++]<<I,I+=8}if(R!==(4294967295&v.total)){D.msg="incorrect length check",v.mode=30;break}I=R=0}v.mode=29;case 29:$=1;break t;case 30:$=-3;break t;case 31:return-4;case 32:default:return c}return D.next_out=ot,D.avail_out=J,D.next_in=G,D.avail_in=F,v.hold=R,v.bits=I,(v.wsize||Q!==D.avail_out&&v.mode<30&&(v.mode<27||P!==4))&&H(D,D.output,D.next_out,Q-D.avail_out)?(v.mode=31,-4):(it-=D.avail_in,Q-=D.avail_out,D.total_in+=it,D.total_out+=Q,v.total+=Q,v.wrap&&Q&&(D.adler=v.check=v.flags?s(v.check,rt,Q,D.next_out-Q):o(v.check,rt,Q,D.next_out-Q)),D.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(it==0&&Q===0||P===4)&&$===f&&($=-5),$)},a.inflateEnd=function(D){if(!D||!D.state)return c;var P=D.state;return P.window&&(P.window=null),D.state=null,f},a.inflateGetHeader=function(D,P){var v;return D&&D.state&&2&(v=D.state).wrap?((v.head=P).done=!1,f):c},a.inflateSetDictionary=function(D,P){var v,z=P.length;return D&&D.state?(v=D.state).wrap!==0&&v.mode!==11?c:v.mode===11&&o(1,P,z,0)!==v.check?-3:H(D,P,z,z)?(v.mode=31,-4):(v.havedict=1,f):c},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,i,a){var n=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(d,l,f,c,g,p,_,y){var E,M,C,w,T,N,O,k,L,H=y.bits,D=0,P=0,v=0,z=0,rt=0,G=0,ot=0,F=0,J=0,R=0,I=null,it=0,Q=new n.Buf16(16),Z=new n.Buf16(16),It=null,$t=0;for(D=0;D<=15;D++)Q[D]=0;for(P=0;P<c;P++)Q[l[f+P]]++;for(rt=H,z=15;1<=z&&Q[z]===0;z--);if(z<rt&&(rt=z),z===0)return g[p++]=20971520,g[p++]=20971520,y.bits=1,0;for(v=1;v<z&&Q[v]===0;v++);for(rt<v&&(rt=v),D=F=1;D<=15;D++)if(F<<=1,(F-=Q[D])<0)return-1;if(0<F&&(d===0||z!==1))return-1;for(Z[1]=0,D=1;D<15;D++)Z[D+1]=Z[D]+Q[D];for(P=0;P<c;P++)l[f+P]!==0&&(_[Z[l[f+P]]++]=P);if(N=d===0?(I=It=_,19):d===1?(I=o,it-=257,It=s,$t-=257,256):(I=u,It=h,-1),D=v,T=p,ot=P=R=0,C=-1,w=(J=1<<(G=rt))-1,d===1&&852<J||d===2&&592<J)return 1;for(;;){for(O=D-ot,L=_[P]<N?(k=0,_[P]):_[P]>N?(k=It[$t+_[P]],I[it+_[P]]):(k=96,0),E=1<<D-ot,v=M=1<<G;g[T+(R>>ot)+(M-=E)]=O<<24|k<<16|L|0,M!==0;);for(E=1<<D-1;R&E;)E>>=1;if(E!==0?(R&=E-1,R+=E):R=0,P++,--Q[D]==0){if(D===z)break;D=l[f+_[P]]}if(rt<D&&(R&w)!==C){for(ot===0&&(ot=rt),T+=v,F=1<<(G=D-ot);G+ot<z&&!((F-=Q[G+ot])<=0);)G++,F<<=1;if(J+=1<<G,d===1&&852<J||d===2&&592<J)return 1;g[C=R&w]=rt<<24|G<<16|T-p|0}}return R!==0&&(g[T+R]=D-ot<<24|64<<16|0),y.bits=rt,0}},{"../utils/common":41}],51:[function(r,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,i,a){var n=r("../utils/common"),o=0,s=1;function u(b){for(var x=b.length;0<=--x;)b[x]=0}var h=0,d=29,l=256,f=l+1+d,c=30,g=19,p=2*f+1,_=15,y=16,E=7,M=256,C=16,w=17,T=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(f+2));u(H);var D=new Array(2*c);u(D);var P=new Array(512);u(P);var v=new Array(256);u(v);var z=new Array(d);u(z);var rt,G,ot,F=new Array(c);function J(b,x,U,q,S){this.static_tree=b,this.extra_bits=x,this.extra_base=U,this.elems=q,this.max_length=S,this.has_stree=b&&b.length}function R(b,x){this.dyn_tree=b,this.max_code=0,this.stat_desc=x}function I(b){return b<256?P[b]:P[256+(b>>>7)]}function it(b,x){b.pending_buf[b.pending++]=255&x,b.pending_buf[b.pending++]=x>>>8&255}function Q(b,x,U){b.bi_valid>y-U?(b.bi_buf|=x<<b.bi_valid&65535,it(b,b.bi_buf),b.bi_buf=x>>y-b.bi_valid,b.bi_valid+=U-y):(b.bi_buf|=x<<b.bi_valid&65535,b.bi_valid+=U)}function Z(b,x,U){Q(b,U[2*x],U[2*x+1])}function It(b,x){for(var U=0;U|=1&b,b>>>=1,U<<=1,0<--x;);return U>>>1}function $t(b,x,U){var q,S,V=new Array(_+1),K=0;for(q=1;q<=_;q++)V[q]=K=K+U[q-1]<<1;for(S=0;S<=x;S++){var W=b[2*S+1];W!==0&&(b[2*S]=It(V[W]++,W))}}function ct(b){var x;for(x=0;x<f;x++)b.dyn_ltree[2*x]=0;for(x=0;x<c;x++)b.dyn_dtree[2*x]=0;for(x=0;x<g;x++)b.bl_tree[2*x]=0;b.dyn_ltree[2*M]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function gt(b){8<b.bi_valid?it(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function Ft(b,x,U,q){var S=2*x,V=2*U;return b[S]<b[V]||b[S]===b[V]&&q[x]<=q[U]}function kt(b,x,U){for(var q=b.heap[U],S=U<<1;S<=b.heap_len&&(S<b.heap_len&&Ft(x,b.heap[S+1],b.heap[S],b.depth)&&S++,!Ft(x,q,b.heap[S],b.depth));)b.heap[U]=b.heap[S],U=S,S<<=1;b.heap[U]=q}function de(b,x,U){var q,S,V,K,W=0;if(b.last_lit!==0)for(;q=b.pending_buf[b.d_buf+2*W]<<8|b.pending_buf[b.d_buf+2*W+1],S=b.pending_buf[b.l_buf+W],W++,q===0?Z(b,S,x):(Z(b,(V=v[S])+l+1,x),(K=N[V])!==0&&Q(b,S-=z[V],K),Z(b,V=I(--q),U),(K=O[V])!==0&&Q(b,q-=F[V],K)),W<b.last_lit;);Z(b,M,x)}function ue(b,x){var U,q,S,V=x.dyn_tree,K=x.stat_desc.static_tree,W=x.stat_desc.has_stree,tt=x.stat_desc.elems,Mt=-1;for(b.heap_len=0,b.heap_max=p,U=0;U<tt;U++)V[2*U]!==0?(b.heap[++b.heap_len]=Mt=U,b.depth[U]=0):V[2*U+1]=0;for(;b.heap_len<2;)V[2*(S=b.heap[++b.heap_len]=Mt<2?++Mt:0)]=1,b.depth[S]=0,b.opt_len--,W&&(b.static_len-=K[2*S+1]);for(x.max_code=Mt,U=b.heap_len>>1;1<=U;U--)kt(b,V,U);for(S=tt;U=b.heap[1],b.heap[1]=b.heap[b.heap_len--],kt(b,V,1),q=b.heap[1],b.heap[--b.heap_max]=U,b.heap[--b.heap_max]=q,V[2*S]=V[2*U]+V[2*q],b.depth[S]=(b.depth[U]>=b.depth[q]?b.depth[U]:b.depth[q])+1,V[2*U+1]=V[2*q+1]=S,b.heap[1]=S++,kt(b,V,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function(ft,ae){var Dr,me,Cr,Ot,pi,ia,De=ae.dyn_tree,Za=ae.max_code,jo=ae.stat_desc.static_tree,Ho=ae.stat_desc.has_stree,Vo=ae.stat_desc.extra_bits,Xa=ae.stat_desc.extra_base,xr=ae.stat_desc.max_length,gi=0;for(Ot=0;Ot<=_;Ot++)ft.bl_count[Ot]=0;for(De[2*ft.heap[ft.heap_max]+1]=0,Dr=ft.heap_max+1;Dr<p;Dr++)xr<(Ot=De[2*De[2*(me=ft.heap[Dr])+1]+1]+1)&&(Ot=xr,gi++),De[2*me+1]=Ot,Za<me||(ft.bl_count[Ot]++,pi=0,Xa<=me&&(pi=Vo[me-Xa]),ia=De[2*me],ft.opt_len+=ia*(Ot+pi),Ho&&(ft.static_len+=ia*(jo[2*me+1]+pi)));if(gi!==0){do{for(Ot=xr-1;ft.bl_count[Ot]===0;)Ot--;ft.bl_count[Ot]--,ft.bl_count[Ot+1]+=2,ft.bl_count[xr]--,gi-=2}while(0<gi);for(Ot=xr;Ot!==0;Ot--)for(me=ft.bl_count[Ot];me!==0;)Za<(Cr=ft.heap[--Dr])||(De[2*Cr+1]!==Ot&&(ft.opt_len+=(Ot-De[2*Cr+1])*De[2*Cr],De[2*Cr+1]=Ot),me--)}}(b,x),$t(V,Mt,b.bl_count)}function m(b,x,U){var q,S,V=-1,K=x[1],W=0,tt=7,Mt=4;for(K===0&&(tt=138,Mt=3),x[2*(U+1)+1]=65535,q=0;q<=U;q++)S=K,K=x[2*(q+1)+1],++W<tt&&S===K||(W<Mt?b.bl_tree[2*S]+=W:S!==0?(S!==V&&b.bl_tree[2*S]++,b.bl_tree[2*C]++):W<=10?b.bl_tree[2*w]++:b.bl_tree[2*T]++,V=S,Mt=(W=0)===K?(tt=138,3):S===K?(tt=6,3):(tt=7,4))}function $(b,x,U){var q,S,V=-1,K=x[1],W=0,tt=7,Mt=4;for(K===0&&(tt=138,Mt=3),q=0;q<=U;q++)if(S=K,K=x[2*(q+1)+1],!(++W<tt&&S===K)){if(W<Mt)for(;Z(b,S,b.bl_tree),--W!=0;);else S!==0?(S!==V&&(Z(b,S,b.bl_tree),W--),Z(b,C,b.bl_tree),Q(b,W-3,2)):W<=10?(Z(b,w,b.bl_tree),Q(b,W-3,3)):(Z(b,T,b.bl_tree),Q(b,W-11,7));V=S,Mt=(W=0)===K?(tt=138,3):S===K?(tt=6,3):(tt=7,4)}}u(F);var B=!1;function A(b,x,U,q){Q(b,(h<<1)+(q?1:0),3),function(S,V,K,W){gt(S),W&&(it(S,K),it(S,~K)),n.arraySet(S.pending_buf,S.window,V,K,S.pending),S.pending+=K}(b,x,U,!0)}a._tr_init=function(b){B||(function(){var x,U,q,S,V,K=new Array(_+1);for(S=q=0;S<d-1;S++)for(z[S]=q,x=0;x<1<<N[S];x++)v[q++]=S;for(v[q-1]=S,S=V=0;S<16;S++)for(F[S]=V,x=0;x<1<<O[S];x++)P[V++]=S;for(V>>=7;S<c;S++)for(F[S]=V<<7,x=0;x<1<<O[S]-7;x++)P[256+V++]=S;for(U=0;U<=_;U++)K[U]=0;for(x=0;x<=143;)H[2*x+1]=8,x++,K[8]++;for(;x<=255;)H[2*x+1]=9,x++,K[9]++;for(;x<=279;)H[2*x+1]=7,x++,K[7]++;for(;x<=287;)H[2*x+1]=8,x++,K[8]++;for($t(H,f+1,K),x=0;x<c;x++)D[2*x+1]=5,D[2*x]=It(x,5);rt=new J(H,N,l+1,f,_),G=new J(D,O,0,c,_),ot=new J(new Array(0),k,0,g,E)}(),B=!0),b.l_desc=new R(b.dyn_ltree,rt),b.d_desc=new R(b.dyn_dtree,G),b.bl_desc=new R(b.bl_tree,ot),b.bi_buf=0,b.bi_valid=0,ct(b)},a._tr_stored_block=A,a._tr_flush_block=function(b,x,U,q){var S,V,K=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(W){var tt,Mt=4093624447;for(tt=0;tt<=31;tt++,Mt>>>=1)if(1&Mt&&W.dyn_ltree[2*tt]!==0)return o;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return s;for(tt=32;tt<l;tt++)if(W.dyn_ltree[2*tt]!==0)return s;return o}(b)),ue(b,b.l_desc),ue(b,b.d_desc),K=function(W){var tt;for(m(W,W.dyn_ltree,W.l_desc.max_code),m(W,W.dyn_dtree,W.d_desc.max_code),ue(W,W.bl_desc),tt=g-1;3<=tt&&W.bl_tree[2*L[tt]+1]===0;tt--);return W.opt_len+=3*(tt+1)+5+5+4,tt}(b),S=b.opt_len+3+7>>>3,(V=b.static_len+3+7>>>3)<=S&&(S=V)):S=V=U+5,U+4<=S&&x!==-1?A(b,x,U,q):b.strategy===4||V===S?(Q(b,2+(q?1:0),3),de(b,H,D)):(Q(b,4+(q?1:0),3),function(W,tt,Mt,ft){var ae;for(Q(W,tt-257,5),Q(W,Mt-1,5),Q(W,ft-4,4),ae=0;ae<ft;ae++)Q(W,W.bl_tree[2*L[ae]+1],3);$(W,W.dyn_ltree,tt-1),$(W,W.dyn_dtree,Mt-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,K+1),de(b,b.dyn_ltree,b.dyn_dtree)),ct(b),q&&gt(b)},a._tr_tally=function(b,x,U){return b.pending_buf[b.d_buf+2*b.last_lit]=x>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&x,b.pending_buf[b.l_buf+b.last_lit]=255&U,b.last_lit++,x===0?b.dyn_ltree[2*U]++:(b.matches++,x--,b.dyn_ltree[2*(v[U]+l+1)]++,b.dyn_dtree[2*I(x)]++),b.last_lit===b.lit_bufsize-1},a._tr_align=function(b){Q(b,2,3),Z(b,M,H),function(x){x.bi_valid===16?(it(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(r,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,i,a){(function(n){(function(o,s){if(!o.setImmediate){var u,h,d,l,f=1,c={},g=!1,p=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){E(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,w=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=w,C}}()?(l="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",M,!1):o.attachEvent("onmessage",M),function(C){o.postMessage(l+C,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){E(C.data)},function(C){d.port2.postMessage(C)}):p&&"onreadystatechange"in p.createElement("script")?(h=p.documentElement,function(C){var w=p.createElement("script");w.onreadystatechange=function(){E(C),w.onreadystatechange=null,h.removeChild(w),w=null},h.appendChild(w)}):function(C){setTimeout(E,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var w=new Array(arguments.length-1),T=0;T<w.length;T++)w[T]=arguments[T+1];var N={callback:C,args:w};return c[f]=N,u(f),f++},_.clearImmediate=y}function y(C){delete c[C]}function E(C){if(g)setTimeout(E,0,C);else{var w=c[C];if(w){g=!0;try{(function(T){var N=T.callback,O=T.args;switch(O.length){case 0:N();break;case 1:N(O[0]);break;case 2:N(O[0],O[1]);break;case 3:N(O[0],O[1],O[2]);break;default:N.apply(s,O)}})(w)}finally{y(C),g=!1}}}}function M(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(l)===0&&E(+C.data.slice(l.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof vi<"u"?vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ds);var du=ds.exports;const mu=Jo(du);function pu(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Fe=1,ze=2,ar=3,gu=4,fa=5,nn=6378137,vu=6356752314e-3,sn=.0066943799901413165,Br=484813681109536e-20,j=Math.PI/2,_u=.16666666666666666,yu=.04722222222222222,Eu=.022156084656084655,X=1e-10,zt=.017453292519943295,_e=57.29577951308232,vt=Math.PI/4,Hr=Math.PI*2,Rt=3.14159265359,Kt={};Kt.greenwich=0;Kt.lisbon=-9.131906111111;Kt.paris=2.337229166667;Kt.bogota=-74.080916666667;Kt.madrid=-3.687938888889;Kt.rome=12.452333333333;Kt.bern=7.439583333333;Kt.jakarta=106.807719444444;Kt.ferro=-17.666666666667;Kt.brussels=4.367975;Kt.stockholm=18.058277777778;Kt.athens=23.7163375;Kt.oslo=10.722916666667;const bu={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var on=/[\s_\-\/\(\)]/g;function Se(t,e){if(t[e])return t[e];for(var r=Object.keys(t),i=e.toLowerCase().replace(on,""),a=-1,n,o;++a<r.length;)if(n=r[a],o=n.toLowerCase().replace(on,""),o===i)return t[n]}function da(t){var e={},r=t.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,u){var h=u.split("=");return h.push(!0),s[h[0].toLowerCase()]=h[1],s},{}),i,a,n,o={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*zt},lat_1:function(s){e.lat1=s*zt},lat_2:function(s){e.lat2=s*zt},lat_ts:function(s){e.lat_ts=s*zt},lon_0:function(s){e.long0=s*zt},lon_1:function(s){e.long1=s*zt},lon_2:function(s){e.long2=s*zt},alpha:function(s){e.alpha=parseFloat(s)*zt},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*zt},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r:function(s){e.a=e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(u){return parseFloat(u)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var u=Se(bu,s);u&&(e.to_meter=u.to_meter)},from_greenwich:function(s){e.from_greenwich=s*zt},pm:function(s){var u=Se(Kt,s);e.from_greenwich=(u||parseFloat(s))*zt},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var u="ewnsud";s.length===3&&u.indexOf(s.substr(0,1))!==-1&&u.indexOf(s.substr(1,1))!==-1&&u.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(i in r)a=r[i],i in o?(n=o[i],typeof n=="function"?n(a):e[n]=a):e[i]=a;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Vr=1,ms=2,ps=3,ki=4,gs=5,Da=-1,Mu=/\s/,wu=/[A-Za-z]/,Au=/[A-Za-z84_]/,Hi=/[,\]]/,vs=/[\d\.E\-\+]/;function xe(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Vr}xe.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==ki)for(;Mu.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Vr:return this.neutral(t);case ms:return this.keyword(t);case ki:return this.quoted(t);case gs:return this.afterquote(t);case ps:return this.number(t);case Da:return}};xe.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=ki;return}if(Hi.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};xe.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Vr;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Vr,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Da);return}};xe.prototype.number=function(t){if(vs.test(t)){this.word+=t;return}if(Hi.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};xe.prototype.quoted=function(t){if(t==='"'){this.state=gs;return}this.word+=t};xe.prototype.keyword=function(t){if(Au.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Vr;return}if(Hi.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};xe.prototype.neutral=function(t){if(wu.test(t)){this.word=t,this.state=ms;return}if(t==='"'){this.word="",this.state=ki;return}if(vs.test(t)){this.word=t,this.state=ps;return}if(Hi.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};xe.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Da)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Du(t){var e=new xe(t);return e.output()}function na(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var i=e?{}:t,a=r.reduce(function(n,o){return Je(o,n),n},i);e&&(t[e]=a)}function Je(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},Je(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var i;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Je(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Je(t[3],e[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],na(e,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],na(e,r,t),e[r].type=r;return;default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return Je(t,e[r]);return na(e,r,t)}}var Cu=.017453292519943295,xu=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Nu(t,e){var r=e[0],i=e[1];!(r in t)&&i in t&&(t[r]=t[i],e.length===3&&(t[r]=e[2](t[r])))}function ge(t){return t*Cu}function _s(t){for(var e=Object.keys(t),r=0,i=e.length;r<i;++r){var a=e[r];xu.indexOf(a)!==-1&&Tu(t[a]),typeof t[a]=="object"&&_s(t[a])}}function Tu(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var r="",i=0,a=t.AXIS.length;i<a;++i){var n=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?r+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?r+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?r+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function s(d){var l=t.to_meter||1;return d*l}var u=function(d){return Nu(t,d)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ge],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ge],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",ge],["lat0","latitude_of_origin",ge],["lat0","standard_parallel_1",ge],["lat1","standard_parallel_1",ge],["lat2","standard_parallel_2",ge],["azimuth","Azimuth"],["alpha","azimuth",ge],["srsCode","name"]];h.forEach(u),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=ge(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=ge(t.lat0>0?90:-90))}function ys(t){var e=Du(t),r=e[0],i={};return Je(e,i),_s(i),i[r]}function qt(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?qt[t]=da(arguments[1]):qt[t]=ys(arguments[1]):qt[t]=r}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(i){Array.isArray(i)?qt.apply(e,i):qt(i)});if(typeof t=="string"){if(t in qt)return qt[t]}else"EPSG"in t?qt["EPSG:"+t.EPSG]=t:"ESRI"in t?qt["ESRI:"+t.ESRI]=t:"IAU2000"in t?qt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}pu(qt);function Su(t){return typeof t=="string"}function Iu(t){return t in qt}var ku=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Ou(t){return ku.some(function(e){return t.indexOf(e)>-1})}var Ru=["3857","900913","3785","102113"];function Pu(t){var e=Se(t,"authority");if(e){var r=Se(e,"epsg");return r&&Ru.indexOf(r)>-1}}function Bu(t){var e=Se(t,"extension");if(e)return Se(e,"proj4")}function Lu(t){return t[0]==="+"}function Fu(t){if(Su(t)){if(Iu(t))return qt[t];if(Ou(t)){var e=ys(t);if(Pu(e))return qt["EPSG:3857"];var r=Bu(e);return r?da(r):e}if(Lu(t))return da(t)}else return t}function un(t,e){t=t||{};var r,i;if(!e)return t;for(i in e)r=e[i],r!==void 0&&(t[i]=r);return t}function be(t,e,r){var i=t*e;return r/Math.sqrt(1-i*i)}function ni(t){return t<0?-1:1}function Y(t){return Math.abs(t)<=Rt?t:t-ni(t)*Hr}function ce(t,e,r){var i=t*r,a=.5*t;return i=Math.pow((1-i)/(1+i),a),Math.tan(.5*(j-e))/i}function Wr(t,e){for(var r=.5*t,i,a,n=j-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(n),a=j-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-n,n+=a,Math.abs(a)<=1e-10)return n;return-9999}function zu(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=be(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function $u(t){var e=t.x,r=t.y;if(r*_e>90&&r*_e<-90&&e*_e>180&&e*_e<-180)return null;var i,a;if(Math.abs(Math.abs(r)-j)<=X)return null;if(this.sphere)i=this.x0+this.a*this.k0*Y(e-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(vt+.5*r));else{var n=Math.sin(r),o=ce(this.e,r,n);i=this.x0+this.a*this.k0*Y(e-this.long0),a=this.y0-this.a*this.k0*Math.log(o)}return t.x=i,t.y=a,t}function Uu(t){var e=t.x-this.x0,r=t.y-this.y0,i,a;if(this.sphere)a=j-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var n=Math.exp(-r/(this.a*this.k0));if(a=Wr(this.e,n),a===-9999)return null}return i=Y(this.long0+e/(this.a*this.k0)),t.x=i,t.y=a,t}var qu=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Gu={init:zu,forward:$u,inverse:Uu,names:qu};function ju(){}function hn(t){return t}var Hu=["longlat","identity"];const Vu={init:ju,forward:hn,inverse:hn,names:Hu};var Wu=[Gu,Vu],Ai={},Oi=[];function Es(t,e){var r=Oi.length;return t.names?(Oi[r]=t,t.names.forEach(function(i){Ai[i.toLowerCase()]=r}),this):(console.log(e),!0)}function Zu(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Ai[e]<"u"&&Oi[Ai[e]])return Oi[Ai[e]]}function Xu(){Wu.forEach(Es)}const Yu={start:Xu,add:Es,get:Zu};var nt={};nt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};nt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};nt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};nt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};nt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};nt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};nt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};nt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};nt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};nt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};nt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};nt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};nt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};nt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};nt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};nt.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};nt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};nt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};nt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};nt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};nt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};nt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};nt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};nt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};nt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};nt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};nt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};nt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};nt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};nt.hough={a:6378270,rf:297,ellipseName:"Hough"};nt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};nt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};nt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};nt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};nt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};nt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};nt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};nt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};nt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};nt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};nt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};nt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Qu=nt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};nt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Ku(t,e,r,i){var a=t*t,n=e*e,o=(a-n)/a,s=0;i?(t*=1-o*(_u+o*(yu+o*Eu)),a=t*t,o=0):s=Math.sqrt(o);var u=(a-n)/n;return{es:o,e:s,ep2:u}}function Ju(t,e,r,i,a){if(!t){var n=Se(nt,i);n||(n=Qu),t=n.a,e=n.b,r=n.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<X)&&(a=!0,e=t),{a:t,b:e,rf:r,sphere:a}}var Di={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var th in Di){var ln=Di[th];Di[ln.datumName]=ln}function eh(t,e,r,i,a,n,o){var s={};return t===void 0||t==="none"?s.datum_type=fa:s.datum_type=gu,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=Fe),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=ze,s.datum_params[3]*=Br,s.datum_params[4]*=Br,s.datum_params[5]*=Br,s.datum_params[6]=s.datum_params[6]/1e6+1)),o&&(s.datum_type=ar,s.grids=o),s.a=r,s.b=i,s.es=a,s.ep2=n,s}var bs={};function rh(t,e){var r=new DataView(e),i=nh(r),a=sh(r,i),n=oh(r,a,i),o={header:a,subgrids:n};return bs[t]=o,o}function ih(t){if(t===void 0)return null;var e=t.split(",");return e.map(ah)}function ah(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:bs[t]||null,isNull:!1}}function tr(t){return t/3600*Math.PI/180}function nh(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function sh(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:ma(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function ma(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function oh(t,e,r){for(var i=176,a=[],n=0;n<e.nSubgrids;n++){var o=hh(t,i,r),s=lh(t,i,o,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);a.push({ll:[tr(o.lowerLongitude),tr(o.lowerLatitude)],del:[tr(o.longitudeInterval),tr(o.latitudeInterval)],lim:[u,h],count:o.gridNodeCount,cvs:uh(s)}),i+=176+o.gridNodeCount*16}return a}function uh(t){return t.map(function(e){return[tr(e.longitudeShift),tr(e.latitudeShift)]})}function hh(t,e,r){return{name:ma(t,e+8,e+16).trim(),parent:ma(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function lh(t,e,r,i){for(var a=e+176,n=16,o=[],s=0;s<r.gridNodeCount;s++){var u={latitudeShift:t.getFloat32(a+s*n,i),longitudeShift:t.getFloat32(a+s*n+4,i),latitudeAccuracy:t.getFloat32(a+s*n+8,i),longitudeAccuracy:t.getFloat32(a+s*n+12,i)};o.push(u)}return o}function ye(t,e){if(!(this instanceof ye))return new ye(t);e=e||function(h){if(h)throw h};var r=Fu(t);if(typeof r!="object"){e("Could not parse to valid json: "+t);return}var i=ye.projections.get(r.projName);if(!i){e("Could not get projection name from: "+t);return}if(r.datumCode&&r.datumCode!=="none"){var a=Se(Di,r.datumCode);a&&(r.datum_params=r.datum_params||(a.towgs84?a.towgs84.split(","):null),r.ellps=a.ellipse,r.datumName=a.datumName?a.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var n=Ju(r.a,r.b,r.rf,r.ellps,r.sphere),o=Ku(n.a,n.b,n.rf,r.R_A),s=ih(r.nadgrids),u=r.datum||eh(r.datumCode,r.datum_params,n.a,n.b,o.es,o.ep2,s);un(this,r),un(this,i),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=u,this.init(),e(null,this)}ye.projections=Yu;ye.projections.start();function ch(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Fe?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===ze?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function Ms(t,e,r){var i=t.x,a=t.y,n=t.z?t.z:0,o,s,u,h;if(a<-j&&a>-1.001*j)a=-j;else if(a>j&&a<1.001*j)a=j;else{if(a<-j)return{x:-1/0,y:-1/0,z:t.z};if(a>j)return{x:1/0,y:1/0,z:t.z}}return i>Math.PI&&(i-=2*Math.PI),s=Math.sin(a),h=Math.cos(a),u=s*s,o=r/Math.sqrt(1-e*u),{x:(o+n)*h*Math.cos(i),y:(o+n)*h*Math.sin(i),z:(o*(1-e)+n)*s}}function ws(t,e,r,i){var a=1e-12,n=a*a,o=30,s,u,h,d,l,f,c,g,p,_,y,E,M,C=t.x,w=t.y,T=t.z?t.z:0,N,O,k;if(s=Math.sqrt(C*C+w*w),u=Math.sqrt(C*C+w*w+T*T),s/r<a){if(N=0,u/r<a)return O=j,k=-i,{x:t.x,y:t.y,z:t.z}}else N=Math.atan2(w,C);h=T/u,d=s/u,l=1/Math.sqrt(1-e*(2-e)*d*d),g=d*(1-e)*l,p=h*l,M=0;do M++,c=r/Math.sqrt(1-e*p*p),k=s*g+T*p-c*(1-e*p*p),f=e*c/(c+k),l=1/Math.sqrt(1-f*(2-f)*d*d),_=d*(1-f)*l,y=h*l,E=y*g-_*p,g=_,p=y;while(E*E>n&&M<o);return O=Math.atan(y/Math.abs(_)),{x:N,y:O,z:k}}function fh(t,e,r){if(e===Fe)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===ze){var i=r[0],a=r[1],n=r[2],o=r[3],s=r[4],u=r[5],h=r[6];return{x:h*(t.x-u*t.y+s*t.z)+i,y:h*(u*t.x+t.y-o*t.z)+a,z:h*(-s*t.x+o*t.y+t.z)+n}}}function dh(t,e,r){if(e===Fe)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===ze){var i=r[0],a=r[1],n=r[2],o=r[3],s=r[4],u=r[5],h=r[6],d=(t.x-i)/h,l=(t.y-a)/h,f=(t.z-n)/h;return{x:d+u*l-s*f,y:-u*d+l+o*f,z:s*d-o*l+f}}}function yi(t){return t===Fe||t===ze}function mh(t,e,r){if(ch(t,e)||t.datum_type===fa||e.datum_type===fa)return r;var i=t.a,a=t.es;if(t.datum_type===ar){var n=cn(t,!1,r);if(n!==0)return;i=nn,a=sn}var o=e.a,s=e.b,u=e.es;if(e.datum_type===ar&&(o=nn,s=vu,u=sn),a===u&&i===o&&!yi(t.datum_type)&&!yi(e.datum_type))return r;if(r=Ms(r,a,i),yi(t.datum_type)&&(r=fh(r,t.datum_type,t.datum_params)),yi(e.datum_type)&&(r=dh(r,e.datum_type,e.datum_params)),r=ws(r,u,o,s),e.datum_type===ar){var h=cn(e,!0,r);if(h!==0)return}return r}function cn(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-r.x,y:r.y},a={x:Number.NaN,y:Number.NaN},n=[];t:for(var o=0;o<t.grids.length;o++){var s=t.grids[o];if(n.push(s.name),s.isNull){a=i;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}for(var u=s.grid.subgrids,h=0,d=u.length;h<d;h++){var l=u[h],f=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-f,g=l.ll[1]-f,p=l.ll[0]+(l.lim[0]-1)*l.del[0]+f,_=l.ll[1]+(l.lim[1]-1)*l.del[1]+f;if(!(g>i.y||c>i.x||_<i.y||p<i.x)&&(a=ph(i,e,l),!isNaN(a.x)))break t}}return isNaN(a.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*_e+" "+i.y*_e+" tried: '"+n+"'"),-1):(r.x=-a.x,r.y=a.y,0)}function ph(t,e,r){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var a={x:t.x,y:t.y};a.x-=r.ll[0],a.y-=r.ll[1],a.x=Y(a.x-Math.PI)+Math.PI;var n=fn(a,r);if(e){if(isNaN(n.x))return i;n.x=a.x-n.x,n.y=a.y-n.y;var o=9,s=1e-12,u,h;do{if(h=fn(n,r),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:a.x-(h.x+n.x),y:a.y-(h.y+n.y)},n.x+=u.x,n.y+=u.y}while(o--&&Math.abs(u.x)>s&&Math.abs(u.y)>s);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Y(n.x+r.ll[0]),i.y=n.y+r.ll[1]}else isNaN(n.x)||(i.x=t.x+n.x,i.y=t.y+n.y);return i}function fn(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},i={x:Math.floor(r.x),y:Math.floor(r.y)},a={x:r.x-1*i.x,y:r.y-1*i.y},n={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return n;o=i.y*e.lim[0]+i.x;var s={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var u={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var d={x:e.cvs[o][0],y:e.cvs[o][1]},l=a.x*a.y,f=a.x*(1-a.y),c=(1-a.x)*(1-a.y),g=(1-a.x)*a.y;return n.x=c*s.x+f*u.x+g*d.x+l*h.x,n.y=c*s.y+f*u.y+g*d.y+l*h.y,n}function dn(t,e,r){var i=r.x,a=r.y,n=r.z||0,o,s,u,h={};for(u=0;u<3;u++)if(!(e&&u===2&&r.z===void 0))switch(u===0?(o=i,"ew".indexOf(t.axis[u])!==-1?s="x":s="y"):u===1?(o=a,"ns".indexOf(t.axis[u])!==-1?s="y":s="x"):(o=n,s="z"),t.axis[u]){case"e":h[s]=o;break;case"w":h[s]=-o;break;case"n":h[s]=o;break;case"s":h[s]=-o;break;case"u":r[s]!==void 0&&(h.z=o);break;case"d":r[s]!==void 0&&(h.z=-o);break;default:return null}return h}function As(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function gh(t){mn(t.x),mn(t.y)}function mn(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function vh(t,e){return(t.datum.datum_type===Fe||t.datum.datum_type===ze||t.datum.datum_type===ar)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Fe||e.datum.datum_type===ze||e.datum.datum_type===ar)&&t.datumCode!=="WGS84"}function Ri(t,e,r,i){var a;Array.isArray(r)?r=As(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var n=r.z!==void 0;if(gh(r),t.datum&&e.datum&&vh(t,e)&&(a=new ye("WGS84"),r=Ri(t,a,r,i),t=a),i&&t.axis!=="enu"&&(r=dn(t,!1,r)),t.projName==="longlat")r={x:r.x*zt,y:r.y*zt,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=mh(t.datum,e.datum,r),!!r)return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*_e,y:r.y*_e,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),i&&e.axis!=="enu"?dn(e,!0,r):(r&&!n&&delete r.z,r)}var pn=ye("WGS84");function sa(t,e,r,i){var a,n,o;return Array.isArray(r)?(a=Ri(t,e,r,i)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof a.z=="number"?[a.x,a.y,a.z].concat(r.slice(3)):[a.x,a.y,r[2]].concat(r.slice(3)):[a.x,a.y].concat(r.slice(2)):[a.x,a.y]):(n=Ri(t,e,r,i),o=Object.keys(r),o.length===2||o.forEach(function(s){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;n[s]=r[s]}),n)}function gn(t){return t instanceof ye?t:t.oProj?t.oProj:ye(t)}function Wt(t,e,r){t=gn(t);var i=!1,a;return typeof e>"u"?(e=t,t=pn,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,e=t,t=pn,i=!0),e=gn(e),r?sa(t,e,r):(a={forward:function(n,o){return sa(t,e,n,o)},inverse:function(n,o){return sa(e,t,n,o)}},i&&(a.oProj=e),a)}var vn=6,Ds="AJSAJS",Cs="AFAFAF",er=65,Zt=73,ne=79,kr=86,Or=90;const _h={forward:xs,inverse:yh,toPoint:Ns};function xs(t,e){return e=e||5,Mh(Eh({lat:t[1],lon:t[0]}),e)}function yh(t){var e=Ca(Ss(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Ns(t){var e=Ca(Ss(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function oa(t){return t*(Math.PI/180)}function _n(t){return 180*(t/Math.PI)}function Eh(t){var e=t.lat,r=t.lon,i=6378137,a=.00669438,n=.9996,o,s,u,h,d,l,f,c=oa(e),g=oa(r),p,_;_=Math.floor((r+180)/6)+1,r===180&&(_=60),e>=56&&e<64&&r>=3&&r<12&&(_=32),e>=72&&e<84&&(r>=0&&r<9?_=31:r>=9&&r<21?_=33:r>=21&&r<33?_=35:r>=33&&r<42&&(_=37)),o=(_-1)*6-180+3,p=oa(o),s=a/(1-a),u=i/Math.sqrt(1-a*Math.sin(c)*Math.sin(c)),h=Math.tan(c)*Math.tan(c),d=s*Math.cos(c)*Math.cos(c),l=Math.cos(c)*(g-p),f=i*((1-a/4-3*a*a/64-5*a*a*a/256)*c-(3*a/8+3*a*a/32+45*a*a*a/1024)*Math.sin(2*c)+(15*a*a/256+45*a*a*a/1024)*Math.sin(4*c)-35*a*a*a/3072*Math.sin(6*c));var y=n*u*(l+(1-h+d)*l*l*l/6+(5-18*h+h*h+72*d-58*s)*l*l*l*l*l/120)+5e5,E=n*(f+u*Math.tan(c)*(l*l/2+(5-h+9*d+4*d*d)*l*l*l*l/24+(61-58*h+h*h+600*d-330*s)*l*l*l*l*l*l/720));return e<0&&(E+=1e7),{northing:Math.round(E),easting:Math.round(y),zoneNumber:_,zoneLetter:bh(e)}}function Ca(t){var e=t.northing,r=t.easting,i=t.zoneLetter,a=t.zoneNumber;if(a<0||a>60)return null;var n=.9996,o=6378137,s=.00669438,u,h=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),d,l,f,c,g,p,_,y,E,M=r-5e5,C=e;i<"N"&&(C-=1e7),_=(a-1)*6-180+3,u=s/(1-s),p=C/n,y=p/(o*(1-s/4-3*s*s/64-5*s*s*s/256)),E=y+(3*h/2-27*h*h*h/32)*Math.sin(2*y)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*y)+151*h*h*h/96*Math.sin(6*y),d=o/Math.sqrt(1-s*Math.sin(E)*Math.sin(E)),l=Math.tan(E)*Math.tan(E),f=u*Math.cos(E)*Math.cos(E),c=o*(1-s)/Math.pow(1-s*Math.sin(E)*Math.sin(E),1.5),g=M/(d*n);var w=E-d*Math.tan(E)/c*(g*g/2-(5+3*l+10*f-4*f*f-9*u)*g*g*g*g/24+(61+90*l+298*f+45*l*l-252*u-3*f*f)*g*g*g*g*g*g/720);w=_n(w);var T=(g-(1+2*l+f)*g*g*g/6+(5-2*f+28*l-3*f*f+8*u+24*l*l)*g*g*g*g*g/120)/Math.cos(E);T=_+_n(T);var N;if(t.accuracy){var O=Ca({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});N={top:O.lat,right:O.lon,bottom:w,left:T}}else N={lat:w,lon:T};return N}function bh(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Mh(t,e){var r="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+wh(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+i.substr(i.length-5,e)}function wh(t,e,r){var i=Ts(r),a=Math.floor(t/1e5),n=Math.floor(e/1e5)%20;return Ah(a,n,i)}function Ts(t){var e=t%vn;return e===0&&(e=vn),e}function Ah(t,e,r){var i=r-1,a=Ds.charCodeAt(i),n=Cs.charCodeAt(i),o=a+t-1,s=n+e,u=!1;o>Or&&(o=o-Or+er-1,u=!0),(o===Zt||a<Zt&&o>Zt||(o>Zt||a<Zt)&&u)&&o++,(o===ne||a<ne&&o>ne||(o>ne||a<ne)&&u)&&(o++,o===Zt&&o++),o>Or&&(o=o-Or+er-1),s>kr?(s=s-kr+er-1,u=!0):u=!1,(s===Zt||n<Zt&&s>Zt||(s>Zt||n<Zt)&&u)&&s++,(s===ne||n<ne&&s>ne||(s>ne||n<ne)&&u)&&(s++,s===Zt&&s++),s>kr&&(s=s-kr+er-1);var h=String.fromCharCode(o)+String.fromCharCode(s);return h}function Ss(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,i="",a,n=0;!/[A-Z]/.test(a=t.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+t;i+=a,n++}var o=parseInt(i,10);if(n===0||n+3>e)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(n++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(n,n+=2);for(var u=Ts(o),h=Dh(r.charAt(0),u),d=Ch(r.charAt(1),u);d<xh(s);)d+=2e6;var l=e-n;if(l%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=l/2,c=0,g=0,p,_,y,E,M;return f>0&&(p=1e5/Math.pow(10,f),_=t.substring(n,n+f),c=parseFloat(_)*p,y=t.substring(n+f),g=parseFloat(y)*p),E=c+h,M=g+d,{easting:E,northing:M,zoneLetter:s,zoneNumber:o,accuracy:p}}function Dh(t,e){for(var r=Ds.charCodeAt(e-1),i=1e5,a=!1;r!==t.charCodeAt(0);){if(r++,r===Zt&&r++,r===ne&&r++,r>Or){if(a)throw"Bad character: "+t;r=er,a=!0}i+=1e5}return i}function Ch(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=Cs.charCodeAt(e-1),i=0,a=!1;r!==t.charCodeAt(0);){if(r++,r===Zt&&r++,r===ne&&r++,r>kr){if(a)throw"Bad character: "+t;r=er,a=!0}i+=1e5}return i}function xh(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function lr(t,e,r){if(!(this instanceof lr))return new lr(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}lr.fromMGRS=function(t){return new lr(Ns(t))};lr.prototype.toMGRS=function(t){return xs([this.x,this.y],t)};var Nh=1,Th=.25,yn=.046875,En=.01953125,bn=.01068115234375,Sh=.75,Ih=.46875,kh=.013020833333333334,Oh=.007120768229166667,Rh=.3645833333333333,Ph=.005696614583333333,Bh=.3076171875;function xa(t){var e=[];e[0]=Nh-t*(Th+t*(yn+t*(En+t*bn))),e[1]=t*(Sh-t*(yn+t*(En+t*bn)));var r=t*t;return e[2]=r*(Ih-t*(kh+t*Oh)),r*=t,e[3]=r*(Rh-t*Ph),e[4]=r*t*Bh,e}function _r(t,e,r,i){return r*=e,e*=e,i[0]*t-r*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var Lh=20;function Na(t,e,r){for(var i=1/(1-e),a=t,n=Lh;n;--n){var o=Math.sin(a),s=1-e*o*o;if(s=(_r(a,o,Math.cos(a),r)-t)*(s*Math.sqrt(s))*i,a-=s,Math.abs(s)<X)return a}return a}function Fh(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=xa(this.es),this.ml0=_r(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function zh(t){var e=t.x,r=t.y,i=Y(e-this.long0),a,n,o,s=Math.sin(r),u=Math.cos(r);if(this.es){var d=u*i,l=Math.pow(d,2),f=this.ep2*Math.pow(u,2),c=Math.pow(f,2),g=Math.abs(u)>X?Math.tan(r):0,p=Math.pow(g,2),_=Math.pow(p,2);a=1-this.es*Math.pow(s,2),d=d/Math.sqrt(a);var y=_r(r,s,u,this.en);n=this.a*(this.k0*d*(1+l/6*(1-p+f+l/20*(5-18*p+_+14*f-58*p*f+l/42*(61+179*_-_*p-479*p)))))+this.x0,o=this.a*(this.k0*(y-this.ml0+s*i*d/2*(1+l/12*(5-p+9*f+4*c+l/30*(61+_-58*p+270*f-330*p*f+l/56*(1385+543*_-_*p-3111*p))))))+this.y0}else{var h=u*Math.sin(i);if(Math.abs(Math.abs(h)-1)<X)return 93;if(n=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=u*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>X)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=n,t.y=o,t}function $h(t){var e,r,i,a,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,r=Na(e,this.es,this.en),Math.abs(r)<j){var l=Math.sin(r),f=Math.cos(r),c=Math.abs(f)>X?Math.tan(r):0,g=this.ep2*Math.pow(f,2),p=Math.pow(g,2),_=Math.pow(c,2),y=Math.pow(_,2);e=1-this.es*Math.pow(l,2);var E=n*Math.sqrt(e)/this.k0,M=Math.pow(E,2);e=e*c,i=r-e*M/(1-this.es)*.5*(1-M/12*(5+3*_-9*g*_+g-4*p-M/30*(61+90*_-252*g*_+45*y+46*g-M/56*(1385+3633*_+4095*y+1574*y*_)))),a=Y(this.long0+E*(1-M/6*(1+2*_+g-M/20*(5+28*_+24*y+8*g*_+6*g-M/42*(61+662*_+1320*y+720*y*_))))/f)}else i=j*ni(o),a=0;else{var s=Math.exp(n/this.k0),u=.5*(s-1/s),h=this.lat0+o/this.k0,d=Math.cos(h);e=Math.sqrt((1-Math.pow(d,2))/(1+Math.pow(u,2))),i=Math.asin(e),o<0&&(i=-i),u===0&&d===0?a=0:a=Y(Math.atan2(u,d)+this.long0)}return t.x=a,t.y=i,t}var Uh=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ci={init:Fh,forward:zh,inverse:$h,names:Uh};function Is(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Xt(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),i=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(i,2))}function qh(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function Gh(t){var e=Math.abs(t);return e=qh(e*(1+e/(Xt(1,e)+1))),t<0?-e:e}function Ta(t,e){for(var r=2*Math.cos(2*e),i=t.length-1,a=t[i],n=0,o;--i>=0;)o=-n+r*a+t[i],n=a,a=o;return e+o*Math.sin(2*e)}function jh(t,e){for(var r=2*Math.cos(e),i=t.length-1,a=t[i],n=0,o;--i>=0;)o=-n+r*a+t[i],n=a,a=o;return Math.sin(e)*o}function Hh(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function ks(t,e,r){for(var i=Math.sin(e),a=Math.cos(e),n=Is(r),o=Hh(r),s=2*a*o,u=-2*i*n,h=t.length-1,d=t[h],l=0,f=0,c=0,g,p;--h>=0;)g=f,p=l,f=d,l=c,d=-g+s*f-u*l+t[h],c=-p+u*f+s*l;return s=i*o,u=a*n,[s*d-u*c,s*c+u*d]}function Vh(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ci.init.apply(this),this.forward=Ci.forward,this.inverse=Ci.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var i=Ta(this.cbg,this.lat0);this.Zb=-this.Qn*(i+jh(this.gtu,2*i))}function Wh(t){var e=Y(t.x-this.long0),r=t.y;r=Ta(this.cbg,r);var i=Math.sin(r),a=Math.cos(r),n=Math.sin(e),o=Math.cos(e);r=Math.atan2(i,o*a),e=Math.atan2(n*a,Xt(i,a*o)),e=Gh(Math.tan(e));var s=ks(this.gtu,2*r,2*e);r=r+s[0],e=e+s[1];var u,h;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*r+this.Zb)+this.y0):(u=1/0,h=1/0),t.x=u,t.y=h,t}function Zh(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var i,a;if(Math.abs(e)<=2.623395162778){var n=ks(this.utg,2*r,2*e);r=r+n[0],e=e+n[1],e=Math.atan(Is(e));var o=Math.sin(r),s=Math.cos(r),u=Math.sin(e),h=Math.cos(e);r=Math.atan2(o*h,Xt(u,h*s)),e=Math.atan2(u,h*s),i=Y(e+this.long0),a=Ta(this.cgb,r)}else i=1/0,a=1/0;return t.x=i,t.y=a,t}var Xh=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const xi={init:Vh,forward:Wh,inverse:Zh,names:Xh};function Yh(t,e){if(t===void 0){if(t=Math.floor((Y(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Qh="etmerc";function Kh(){var t=Yh(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*zt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,xi.init.apply(this),this.forward=xi.forward,this.inverse=xi.inverse}var Jh=["Universal Transverse Mercator System","utm"];const tl={init:Kh,names:Jh,dependsOn:Qh};function Sa(t,e){return Math.pow((1-t)/(1+t),e)}var el=20;function rl(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+vt)/(Math.pow(Math.tan(.5*this.lat0+vt),this.C)*Sa(this.e*t,this.ratexp))}function il(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+vt),this.C)*Sa(this.e*Math.sin(r),this.ratexp))-j,t.x=this.C*e,t}function al(t){for(var e=1e-14,r=t.x/this.C,i=t.y,a=Math.pow(Math.tan(.5*i+vt)/this.K,1/this.C),n=el;n>0&&(i=2*Math.atan(a*Sa(this.e*Math.sin(t.y),-.5*this.e))-j,!(Math.abs(i-t.y)<e));--n)t.y=i;return n?(t.x=r,t.y=i,t):null}var nl=["gauss"];const Ia={init:rl,forward:il,inverse:al,names:nl};function sl(){Ia.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ol(t){var e,r,i,a;return t.x=Y(t.x-this.long0),Ia.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),i=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*i),t.x=a*r*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*r*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function ul(t){var e,r,i,a,n;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,n=Xt(t.x,t.y)){var o=2*Math.atan2(n,this.R2);e=Math.sin(o),r=Math.cos(o),a=Math.asin(r*this.sinc0+t.y*e*this.cosc0/n),i=Math.atan2(t.x*e,n*this.cosc0*r-t.y*this.sinc0*e)}else a=this.phic0,i=0;return t.x=i,t.y=a,Ia.inverse.apply(this,[t]),t.x=Y(t.x+this.long0),t}var hl=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const ll={init:sl,forward:ol,inverse:ul,names:hl};function cl(t,e,r){return e*=r,Math.tan(.5*(j+t))*Math.pow((1-e)/(1+e),.5*r)}function fl(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=X&&(this.k0=.5*(1+ni(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=X&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=X&&Math.abs(Math.cos(this.lat_ts))>X&&(this.k0=.5*this.cons*be(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ce(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=be(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-j,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function dl(t){var e=t.x,r=t.y,i=Math.sin(r),a=Math.cos(r),n,o,s,u,h,d,l=Y(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=X&&Math.abs(r+this.lat0)<=X?(t.x=NaN,t.y=NaN,t):this.sphere?(n=2*this.k0/(1+this.sinlat0*i+this.coslat0*a*Math.cos(l)),t.x=this.a*n*a*Math.sin(l)+this.x0,t.y=this.a*n*(this.coslat0*i-this.sinlat0*a*Math.cos(l))+this.y0,t):(o=2*Math.atan(this.ssfn_(r,i,this.e))-j,u=Math.cos(o),s=Math.sin(o),Math.abs(this.coslat0)<=X?(h=ce(this.e,r*this.con,this.con*i),d=2*this.a*this.k0*h/this.cons,t.x=this.x0+d*Math.sin(e-this.long0),t.y=this.y0-this.con*d*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<X?(n=2*this.a*this.k0/(1+u*Math.cos(l)),t.y=n*s):(n=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*u*Math.cos(l))),t.y=n*(this.cosX0*s-this.sinX0*u*Math.cos(l))+this.y0),t.x=n*u*Math.sin(l)+this.x0,t))}function ml(t){t.x-=this.x0,t.y-=this.y0;var e,r,i,a,n,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,r=this.lat0,o<=X?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/o),Math.abs(this.coslat0)<X?this.lat0>0?e=Y(this.long0+Math.atan2(t.x,-1*t.y)):e=Y(this.long0+Math.atan2(t.x,t.y)):e=Y(this.long0+Math.atan2(t.x*Math.sin(s),o*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=X){if(o<=X)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,i=o*this.cons/(2*this.a*this.k0),r=this.con*Wr(this.e,i),e=this.con*Y(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else a=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=X?n=this.X0:(n=Math.asin(Math.cos(a)*this.sinX0+t.y*Math.sin(a)*this.cosX0/o),e=Y(this.long0+Math.atan2(t.x*Math.sin(a),o*this.cosX0*Math.cos(a)-t.y*this.sinX0*Math.sin(a)))),r=-1*Wr(this.e,Math.tan(.5*(j+n)));return t.x=e,t.y=r,t}var pl=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const gl={init:fl,forward:dl,inverse:ml,names:pl,ssfn_:cl};function vl(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,i=this.rf,a=1/i,n=2*a-Math.pow(a,2),o=this.e=Math.sqrt(n);this.R=this.k0*r*Math.sqrt(1-n)/(1-n*Math.pow(e,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*u+this.alpha*o/2*h}function _l(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+r)+this.K,a=2*(Math.atan(Math.exp(i))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(n))),s=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(n));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*o+this.x0,t}function yl(t){for(var e=t.x-this.x0,r=t.y-this.y0,i=e/this.R,a=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(a))),s=this.lambda0+o/this.alpha,u=0,h=n,d=-1e3,l=0;Math.abs(h-d)>1e-7;){if(++l>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),d=h,h=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=h,t}var El=["somerc"];const bl={init:vl,forward:_l,inverse:yl,names:El};var Qe=1e-7;function Ml(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1}function wl(){var t,e,r,i,a,n,o,s,u,h,d=0,l,f=0,c=0,g=0,p=0,_=0,y=0;this.no_off=Ml(this),this.no_rot="no_rot"in this;var E=!1;"alpha"in this&&(E=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),E&&(y=this.alpha),M&&(d=this.rectified_grid_angle*zt),E||M)f=this.longc;else if(c=this.long1,p=this.lat1,g=this.long2,_=this.lat2,Math.abs(p-_)<=Qe||(t=Math.abs(p))<=Qe||Math.abs(t-j)<=Qe||Math.abs(Math.abs(this.lat0)-j)<=Qe||Math.abs(Math.abs(_)-j)<=Qe)throw new Error;var C=1-this.es;e=Math.sqrt(C),Math.abs(this.lat0)>X?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*e/t,i=this.B*e/(r*Math.sqrt(t)),a=i*i-1,a<=0?a=0:(a=Math.sqrt(a),this.lat0<0&&(a=-a)),this.E=a+=i,this.E*=Math.pow(ce(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=a=1),E||M?(E?(l=Math.asin(Math.sin(y)/i),M||(d=y)):(l=d,y=Math.asin(i*Math.sin(l))),this.lam0=f-Math.asin(.5*(a-1/a)*Math.tan(l))/this.B):(n=Math.pow(ce(this.e,p,Math.sin(p)),this.B),o=Math.pow(ce(this.e,_,Math.sin(_)),this.B),a=this.E/n,u=(o-n)/(o+n),h=this.E*this.E,h=(h-o*n)/(h+o*n),t=c-g,t<-Math.pi?g-=Hr:t>Math.pi&&(g+=Hr),this.lam0=Y(.5*(c+g)-Math.atan(h*Math.tan(.5*this.B*(c-g))/u)/this.B),l=Math.atan(2*Math.sin(this.B*Y(c-this.lam0))/(a-1/a)),d=y=Math.asin(i*Math.sin(l))),this.singam=Math.sin(l),this.cosgam=Math.cos(l),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),a=.5*l,this.v_pole_n=this.ArB*Math.log(Math.tan(vt-a)),this.v_pole_s=this.ArB*Math.log(Math.tan(vt+a))}function Al(t){var e={},r,i,a,n,o,s,u,h;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-j)>X){if(o=this.E/Math.pow(ce(this.e,t.y,Math.sin(t.y)),this.B),s=1/o,r=.5*(o-s),i=.5*(o+s),n=Math.sin(this.B*t.x),a=(r*this.singam-n*this.cosgam)/i,Math.abs(Math.abs(a)-1)<X)throw new Error;h=.5*this.ArB*Math.log((1-a)/(1+a)),s=Math.cos(this.B*t.x),Math.abs(s)<Qe?u=this.A*t.x:u=this.ArB*Math.atan2(r*this.cosgam+n*this.singam,s)}else h=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(e.x=u,e.y=h):(u-=this.u_0,e.x=h*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Dl(t){var e,r,i,a,n,o,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*r),a=.5*(i-1/i),n=.5*(i+1/i),o=Math.sin(this.BrA*e),s=(o*this.cosgam+a*this.singam)/n,Math.abs(Math.abs(s)-1)<X)u.x=0,u.y=s<0?-j:j;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=Wr(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(a*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var Cl=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const xl={init:wl,forward:Al,inverse:Dl,names:Cl};function Nl(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<X)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),i=be(this.e,e,r),a=ce(this.e,this.lat1,e),n=Math.sin(this.lat2),o=Math.cos(this.lat2),s=be(this.e,n,o),u=ce(this.e,this.lat2,n),h=ce(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>X?this.ns=Math.log(i/s)/Math.log(a/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Tl(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=X&&(r=ni(r)*(j-2*X));var i=Math.abs(Math.abs(r)-j),a,n;if(i>X)a=ce(this.e,r,Math.sin(r)),n=this.a*this.f0*Math.pow(a,this.ns);else{if(i=r*this.ns,i<=0)return null;n=0}var o=this.ns*Y(e-this.long0);return t.x=this.k0*(n*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(o))+this.y0,t}function Sl(t){var e,r,i,a,n,o=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),r=1):(e=-Math.sqrt(o*o+s*s),r=-1);var u=0;if(e!==0&&(u=Math.atan2(r*o,r*s)),e!==0||this.ns>0){if(r=1/this.ns,i=Math.pow(e/(this.a*this.f0),r),a=Wr(this.e,i),a===-9999)return null}else a=-j;return n=Y(u/this.ns+this.long0),t.x=n,t.y=a,t}var Il=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const kl={init:Nl,forward:Tl,inverse:Sl,names:Il};function Ol(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Rl(t){var e,r,i,a,n,o,s,u=t.x,h=t.y,d=Y(u-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),i=-d*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(a)),o=this.n*n,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),t.y=s*Math.cos(o)/1,t.x=s*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Pl(t){var e,r,i,a,n,o,s,u,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x),a=n/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),r=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(e)),t.x=this.long0-r/this.alfa,s=e,u=0;var d=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(u=1),s=t.y,d+=1;while(u===0&&d<15);return d>=15?null:t}var Bl=["Krovak","krovak"];const Ll={init:Ol,forward:Rl,inverse:Pl,names:Bl};function Vt(t,e,r,i,a){return t*a-e*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)}function si(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function oi(t){return .375*t*(1+.25*t*(1+.46875*t))}function ui(t){return .05859375*t*t*(1+.75*t)}function hi(t){return t*t*t*(35/3072)}function cr(t,e,r){var i=e*r;return t/Math.sqrt(1-i*i)}function Be(t){return Math.abs(t)<j?t:t-ni(t)*Math.PI}function Pi(t,e,r,i,a){var n,o;n=t/e;for(var s=0;s<15;s++)if(o=(t-(e*n-r*Math.sin(2*n)+i*Math.sin(4*n)-a*Math.sin(6*n)))/(e-2*r*Math.cos(2*n)+4*i*Math.cos(4*n)-6*a*Math.cos(6*n)),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function Fl(){this.sphere||(this.e0=si(this.es),this.e1=oi(this.es),this.e2=ui(this.es),this.e3=hi(this.es),this.ml0=this.a*Vt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function zl(t){var e,r,i=t.x,a=t.y;if(i=Y(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(a)*Math.sin(i)),r=this.a*(Math.atan2(Math.tan(a),Math.cos(i))-this.lat0);else{var n=Math.sin(a),o=Math.cos(a),s=cr(this.a,this.e,n),u=Math.tan(a)*Math.tan(a),h=i*Math.cos(a),d=h*h,l=this.es*o*o/(1-this.es),f=this.a*Vt(this.e0,this.e1,this.e2,this.e3,a);e=s*h*(1-d*u*(1/6-(8-u+8*l)*d/120)),r=f-this.ml0+s*n/o*d*(.5+(5-u+6*l)*d/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function $l(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,i,a;if(this.sphere){var n=r+this.lat0;i=Math.asin(Math.sin(n)*Math.cos(e)),a=Math.atan2(Math.tan(e),Math.cos(n))}else{var o=this.ml0/this.a+r,s=Pi(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-j)<=X)return t.x=this.long0,t.y=j,r<0&&(t.y*=-1),t;var u=cr(this.a,this.e,Math.sin(s)),h=u*u*u/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(s),2),l=e*this.a/u,f=l*l;i=s-u*Math.tan(s)/h*l*l*(.5-(1+3*d)*l*l/24),a=l*(1-f*(d/3+(1+3*d)*d*f/15))/Math.cos(s)}return t.x=Y(a+this.long0),t.y=Be(i),t}var Ul=["Cassini","Cassini_Soldner","cass"];const ql={init:Fl,forward:zl,inverse:$l,names:Ul};function Te(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var Gl=1,jl=2,Hl=3,Vl=4;function Wl(){var t=Math.abs(this.lat0);if(Math.abs(t-j)<X?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<X?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Te(this.e,1),this.mmf=.5/(1-this.es),this.apa=rc(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Te(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Zl(t){var e,r,i,a,n,o,s,u,h,d,l=t.x,f=t.y;if(l=Y(l-this.long0),this.sphere){if(n=Math.sin(f),d=Math.cos(f),i=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+d*i:1+this.sinph0*n+this.cosph0*d*i,r<=X)return null;r=Math.sqrt(2/r),e=r*d*Math.sin(l),r*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*d*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<X)return null;r=vt-f*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(l),r*=i}}else{switch(s=0,u=0,h=0,i=Math.cos(l),a=Math.sin(l),n=Math.sin(f),o=Te(this.e,n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=o/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:h=1+this.sinb1*s+this.cosb1*u*i;break;case this.EQUIT:h=1+u*i;break;case this.N_POLE:h=j+f,o=this.qp-o;break;case this.S_POLE:h=f-j,o=this.qp+o;break}if(Math.abs(h)<X)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?r=this.ymf*h*(this.cosb1*s-this.sinb1*u*i):r=(h=Math.sqrt(2/(1+u*i)))*s*this.ymf,e=this.xmf*h*u*a;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*a,r=i*(this.mode===this.S_POLE?h:-h)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function Xl(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,i,a,n,o,s,u,h;if(this.sphere){var d=0,l,f=0;if(l=Math.sqrt(e*e+r*r),a=l*.5,a>1)return null;switch(a=2*Math.asin(a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(a),d=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(l)<=X?0:Math.asin(r*f/l),e*=f,r=d*l;break;case this.OBLIQ:a=Math.abs(l)<=X?this.lat0:Math.asin(d*this.sinph0+r*f*this.cosph0/l),e*=f*this.cosph0,r=(d-Math.sin(a)*this.sinph0)*l;break;case this.N_POLE:r=-r,a=j-a;break;case this.S_POLE:a-=j;break}i=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,u=Math.sqrt(e*e+r*r),u<X)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*u/this.rq),n=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=n*this.sinb1+r*o*this.cosb1/u,s=this.qp*h,r=u*this.cosb1*n-r*this.sinb1*o):(h=r*o/u,s=this.qp*h,r=u*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),s=e*e+r*r,!s)return t.x=this.long0,t.y=this.lat0,t;h=1-s/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(e,r),a=ic(Math.asin(h),this.apa)}return t.x=Y(this.long0+i),t.y=a,t}var Yl=.3333333333333333,Ql=.17222222222222222,Kl=.10257936507936508,Jl=.06388888888888888,tc=.0664021164021164,ec=.016415012942191543;function rc(t){var e,r=[];return r[0]=t*Yl,e=t*t,r[0]+=e*Ql,r[1]=e*Jl,e*=t,r[0]+=e*Kl,r[1]+=e*tc,r[2]=e*ec,r}function ic(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var ac=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const nc={init:Wl,forward:Zl,inverse:Xl,names:ac,S_POLE:Gl,N_POLE:jl,EQUIT:Hl,OBLIQ:Vl};function Ie(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function sc(){Math.abs(this.lat1+this.lat2)<X||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=be(this.e3,this.sin_po,this.cos_po),this.qs1=Te(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=be(this.e3,this.sin_po,this.cos_po),this.qs2=Te(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Te(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>X?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function oc(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var i=Te(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,n=this.ns0*Y(e-this.long0),o=a*Math.sin(n)+this.x0,s=this.rh-a*Math.cos(n)+this.y0;return t.x=o,t.y=s,t}function uc(t){var e,r,i,a,n,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),a=0,e!==0&&(a=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(r=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,r)),n=Y(a/this.ns0+this.long0),t.x=n,t.y=o,t}function hc(t,e){var r,i,a,n,o,s=Ie(.5*e);if(t<X)return s;for(var u=t*t,h=1;h<=25;h++)if(r=Math.sin(s),i=Math.cos(s),a=t*r,n=1-a*a,o=.5*n*n/i*(e/(1-u)-r/n+.5/t*Math.log((1-a)/(1+a))),s=s+o,Math.abs(o)<=1e-7)return s;return null}var lc=["Albers_Conic_Equal_Area","Albers","aea"];const cc={init:sc,forward:oc,inverse:uc,names:lc,phi1z:hc};function fc(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function dc(t){var e,r,i,a,n,o,s,u,h=t.x,d=t.y;return i=Y(h-this.long0),e=Math.sin(d),r=Math.cos(d),a=Math.cos(i),o=this.sin_p14*e+this.cos_p14*r*a,n=1,o>0||Math.abs(o)<=X?(s=this.x0+this.a*n*r*Math.sin(i)/o,u=this.y0+this.a*n*(this.cos_p14*e-this.sin_p14*r*a)/o):(s=this.x0+this.infinity_dist*r*Math.sin(i),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*a)),t.x=s,t.y=u,t}function mc(t){var e,r,i,a,n,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),r=Math.sin(a),i=Math.cos(a),o=Ie(i*this.sin_p14+t.y*r*this.cos_p14/e),n=Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),n=Y(this.long0+n)):(o=this.phic0,n=0),t.x=n,t.y=o,t}var pc=["gnom"];const gc={init:fc,forward:dc,inverse:mc,names:pc};function vc(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*j:j;for(var i=Math.asin(.5*e),a,n,o,s,u=0;u<30;u++)if(n=Math.sin(i),o=Math.cos(i),s=t*n,a=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-n/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),i+=a,Math.abs(a)<=1e-10)return i;return NaN}function _c(){this.sphere||(this.k0=be(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function yc(t){var e=t.x,r=t.y,i,a,n=Y(e-this.long0);if(this.sphere)i=this.x0+this.a*n*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Te(this.e,Math.sin(r));i=this.x0+this.a*this.k0*n,a=this.y0+this.a*o*.5/this.k0}return t.x=i,t.y=a,t}function Ec(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=Y(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=vc(this.e,2*t.y*this.k0/this.a),e=Y(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t}var bc=["cea"];const Mc={init:_c,forward:yc,inverse:Ec,names:bc};function wc(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Ac(t){var e=t.x,r=t.y,i=Y(e-this.long0),a=Be(r-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*a,t}function Dc(t){var e=t.x,r=t.y;return t.x=Y(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Be(this.lat0+(r-this.y0)/this.a),t}var Cc=["Equirectangular","Equidistant_Cylindrical","eqc"];const xc={init:wc,forward:Ac,inverse:Dc,names:Cc};var Mn=20;function Nc(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=si(this.es),this.e1=oi(this.es),this.e2=ui(this.es),this.e3=hi(this.es),this.ml0=this.a*Vt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Tc(t){var e=t.x,r=t.y,i,a,n,o=Y(e-this.long0);if(n=o*Math.sin(r),this.sphere)Math.abs(r)<=X?(i=this.a*o,a=-1*this.a*this.lat0):(i=this.a*Math.sin(n)/Math.tan(r),a=this.a*(Be(r-this.lat0)+(1-Math.cos(n))/Math.tan(r)));else if(Math.abs(r)<=X)i=this.a*o,a=-1*this.ml0;else{var s=cr(this.a,this.e,Math.sin(r))/Math.tan(r);i=s*Math.sin(n),a=this.a*Vt(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*(1-Math.cos(n))}return t.x=i+this.x0,t.y=a+this.y0,t}function Sc(t){var e,r,i,a,n,o,s,u,h;if(i=t.x-this.x0,a=t.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=X)e=Y(i/this.a+this.long0),r=0;else{o=this.lat0+a/this.a,s=i*i/this.a/this.a+o*o,u=o;var d;for(n=Mn;n;--n)if(d=Math.tan(u),h=-1*(o*(u*d+1)-u-.5*(u*u+s)*d)/((u-o)/d-1),u+=h,Math.abs(h)<=X){r=u;break}e=Y(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(a+this.ml0)<=X)r=0,e=Y(this.long0+i/this.a);else{o=(this.ml0+a)/this.a,s=i*i/this.a/this.a+o*o,u=o;var l,f,c,g,p;for(n=Mn;n;--n)if(p=this.e*Math.sin(u),l=Math.sqrt(1-p*p)*Math.tan(u),f=this.a*Vt(this.e0,this.e1,this.e2,this.e3,u),c=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),g=f/this.a,h=(o*(l*g+1)-g-.5*l*(g*g+s))/(this.es*Math.sin(2*u)*(g*g+s-2*o*g)/(4*l)+(o-g)*(l*c-2/Math.sin(2*u))-c),u-=h,Math.abs(h)<=X){r=u;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=Y(this.long0+Math.asin(i*l/this.a)/Math.sin(r))}return t.x=e,t.y=r,t}var Ic=["Polyconic","poly"];const kc={init:Nc,forward:Tc,inverse:Sc,names:Ic};function Oc(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Rc(t){var e,r=t.x,i=t.y,a=i-this.lat0,n=r-this.long0,o=a/Br*1e-5,s=n,u=1,h=0;for(e=1;e<=10;e++)u=u*o,h=h+this.A[e]*u;var d=h,l=s,f=1,c=0,g,p,_=0,y=0;for(e=1;e<=6;e++)g=f*d-c*l,p=c*d+f*l,f=g,c=p,_=_+this.B_re[e]*f-this.B_im[e]*c,y=y+this.B_im[e]*f+this.B_re[e]*c;return t.x=y*this.a+this.x0,t.y=_*this.a+this.y0,t}function Pc(t){var e,r=t.x,i=t.y,a=r-this.x0,n=i-this.y0,o=n/this.a,s=a/this.a,u=1,h=0,d,l,f=0,c=0;for(e=1;e<=6;e++)d=u*o-h*s,l=h*o+u*s,u=d,h=l,f=f+this.C_re[e]*u-this.C_im[e]*h,c=c+this.C_im[e]*u+this.C_re[e]*h;for(var g=0;g<this.iterations;g++){var p=f,_=c,y,E,M=o,C=s;for(e=2;e<=6;e++)y=p*f-_*c,E=_*f+p*c,p=y,_=E,M=M+(e-1)*(this.B_re[e]*p-this.B_im[e]*_),C=C+(e-1)*(this.B_im[e]*p+this.B_re[e]*_);p=1,_=0;var w=this.B_re[1],T=this.B_im[1];for(e=2;e<=6;e++)y=p*f-_*c,E=_*f+p*c,p=y,_=E,w=w+e*(this.B_re[e]*p-this.B_im[e]*_),T=T+e*(this.B_im[e]*p+this.B_re[e]*_);var N=w*w+T*T;f=(M*w+C*T)/N,c=(C*w-M*T)/N}var O=f,k=c,L=1,H=0;for(e=1;e<=9;e++)L=L*O,H=H+this.D[e]*L;var D=this.lat0+H*Br*1e5,P=this.long0+k;return t.x=P,t.y=D,t}var Bc=["New_Zealand_Map_Grid","nzmg"];const Lc={init:Oc,forward:Rc,inverse:Pc,names:Bc};function Fc(){}function zc(t){var e=t.x,r=t.y,i=Y(e-this.long0),a=this.x0+this.a*i,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=a,t.y=n,t}function $c(t){t.x-=this.x0,t.y-=this.y0;var e=Y(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var Uc=["Miller_Cylindrical","mill"];const qc={init:Fc,forward:zc,inverse:$c,names:Uc};var Gc=20;function jc(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=xa(this.es)}function Hc(t){var e,r,i=t.x,a=t.y;if(i=Y(i-this.long0),this.sphere){if(!this.m)a=this.n!==1?Math.asin(this.n*Math.sin(a)):a;else for(var n=this.n*Math.sin(a),o=Gc;o;--o){var s=(this.m*a+Math.sin(a)-n)/(this.m+Math.cos(a));if(a-=s,Math.abs(s)<X)break}e=this.a*this.C_x*i*(this.m+Math.cos(a)),r=this.a*this.C_y*a}else{var u=Math.sin(a),h=Math.cos(a);r=this.a*_r(a,u,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t}function Vc(t){var e,r,i,a;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Ie((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Ie(Math.sin(e)/this.n)),i=Y(i+this.long0),e=Be(e)):(e=Na(t.y/this.a,this.es,this.en),a=Math.abs(e),a<j?(a=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),i=Y(r)):a-X<j&&(i=this.long0)),t.x=i,t.y=e,t}var Wc=["Sinusoidal","sinu"];const Zc={init:jc,forward:Hc,inverse:Vc,names:Wc};function Xc(){}function Yc(t){for(var e=t.x,r=t.y,i=Y(e-this.long0),a=r,n=Math.PI*Math.sin(r);;){var o=-(a+Math.sin(a)-n)/(1+Math.cos(a));if(a+=o,Math.abs(o)<X)break}a/=2,Math.PI/2-Math.abs(r)<X&&(i=0);var s=.900316316158*this.a*i*Math.cos(a)+this.x0,u=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=s,t.y=u,t}function Qc(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var i=Y(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var a=Math.asin(r);return t.x=i,t.y=a,t}var Kc=["Mollweide","moll"];const Jc={init:Xc,forward:Yc,inverse:Qc,names:Kc};function tf(){Math.abs(this.lat1+this.lat2)<X||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=si(this.es),this.e1=oi(this.es),this.e2=ui(this.es),this.e3=hi(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=be(this.e,this.sinphi,this.cosphi),this.ml1=Vt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<X?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=be(this.e,this.sinphi,this.cosphi),this.ml2=Vt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Vt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function ef(t){var e=t.x,r=t.y,i;if(this.sphere)i=this.a*(this.g-r);else{var a=Vt(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-a)}var n=this.ns*Y(e-this.long0),o=this.x0+i*Math.sin(n),s=this.y0+this.rh-i*Math.cos(n);return t.x=o,t.y=s,t}function rf(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,i,a;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var n=0;if(r!==0&&(n=Math.atan2(e*t.x,e*t.y)),this.sphere)return a=Y(this.long0+n/this.ns),i=Be(this.g-r/this.a),t.x=a,t.y=i,t;var o=this.g-r/this.a;return i=Pi(o,this.e0,this.e1,this.e2,this.e3),a=Y(this.long0+n/this.ns),t.x=a,t.y=i,t}var af=["Equidistant_Conic","eqdc"];const nf={init:tf,forward:ef,inverse:rf,names:af};function sf(){this.R=this.a}function of(t){var e=t.x,r=t.y,i=Y(e-this.long0),a,n;Math.abs(r)<=X&&(a=this.x0+this.R*i,n=this.y0);var o=Ie(2*Math.abs(r/Math.PI));(Math.abs(i)<=X||Math.abs(Math.abs(r)-j)<=X)&&(a=this.x0,r>=0?n=this.y0+Math.PI*this.R*Math.tan(.5*o):n=this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/i-i/Math.PI),u=s*s,h=Math.sin(o),d=Math.cos(o),l=d/(h+d-1),f=l*l,c=l*(2/h-1),g=c*c,p=Math.PI*this.R*(s*(l-g)+Math.sqrt(u*(l-g)*(l-g)-(g+u)*(f-g)))/(g+u);i<0&&(p=-p),a=this.x0+p;var _=u+l;return p=Math.PI*this.R*(c*_-s*Math.sqrt((g+u)*(u+1)-_*_))/(g+u),r>=0?n=this.y0+p:n=this.y0-p,t.x=a,t.y=n,t}function uf(t){var e,r,i,a,n,o,s,u,h,d,l,f,c;return t.x-=this.x0,t.y-=this.y0,l=Math.PI*this.R,i=t.x/l,a=t.y/l,n=i*i+a*a,o=-Math.abs(a)*(1+n),s=o-2*a*a+i*i,u=-2*o+1+2*a*a+n*n,c=a*a/u+(2*s*s*s/u/u/u-9*o*s/u/u)/27,h=(o-s*s/3/u)/u,d=2*Math.sqrt(-h/3),l=3*c/h/d,Math.abs(l)>1&&(l>=0?l=1:l=-1),f=Math.acos(l)/3,t.y>=0?r=(-d*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:r=-(-d*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,Math.abs(i)<X?e=this.long0:e=Y(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(i*i-a*a)+n*n))/2/i),t.x=e,t.y=r,t}var hf=["Van_der_Grinten_I","VanDerGrinten","vandg"];const lf={init:sf,forward:of,inverse:uf,names:hf};function cf(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function ff(t){var e=t.x,r=t.y,i=Math.sin(t.y),a=Math.cos(t.y),n=Y(e-this.long0),o,s,u,h,d,l,f,c,g,p,_,y,E,M,C,w,T,N,O,k,L,H,D;return this.sphere?Math.abs(this.sin_p12-1)<=X?(t.x=this.x0+this.a*(j-r)*Math.sin(n),t.y=this.y0-this.a*(j-r)*Math.cos(n),t):Math.abs(this.sin_p12+1)<=X?(t.x=this.x0+this.a*(j+r)*Math.sin(n),t.y=this.y0+this.a*(j+r)*Math.cos(n),t):(N=this.sin_p12*i+this.cos_p12*a*Math.cos(n),w=Math.acos(N),T=w?w/Math.sin(w):1,t.x=this.x0+this.a*T*a*Math.sin(n),t.y=this.y0+this.a*T*(this.cos_p12*i-this.sin_p12*a*Math.cos(n)),t):(o=si(this.es),s=oi(this.es),u=ui(this.es),h=hi(this.es),Math.abs(this.sin_p12-1)<=X?(d=this.a*Vt(o,s,u,h,j),l=this.a*Vt(o,s,u,h,r),t.x=this.x0+(d-l)*Math.sin(n),t.y=this.y0-(d-l)*Math.cos(n),t):Math.abs(this.sin_p12+1)<=X?(d=this.a*Vt(o,s,u,h,j),l=this.a*Vt(o,s,u,h,r),t.x=this.x0+(d+l)*Math.sin(n),t.y=this.y0+(d+l)*Math.cos(n),t):(f=i/a,c=cr(this.a,this.e,this.sin_p12),g=cr(this.a,this.e,i),p=Math.atan((1-this.es)*f+this.es*c*this.sin_p12/(g*a)),_=Math.atan2(Math.sin(n),this.cos_p12*Math.tan(p)-this.sin_p12*Math.cos(n)),_===0?O=Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):Math.abs(Math.abs(_)-Math.PI)<=X?O=-Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):O=Math.asin(Math.sin(n)*Math.cos(p)/Math.sin(_)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),E=this.e*this.cos_p12*Math.cos(_)/Math.sqrt(1-this.es),M=y*E,C=E*E,k=O*O,L=k*O,H=L*O,D=H*O,w=c*O*(1-k*C*(1-C)/6+L/8*M*(1-2*C)+H/120*(C*(4-7*C)-3*y*y*(1-7*C))-D/48*M),t.x=this.x0+w*Math.sin(_),t.y=this.y0+w*Math.cos(_),t))}function df(t){t.x-=this.x0,t.y-=this.y0;var e,r,i,a,n,o,s,u,h,d,l,f,c,g,p,_,y,E,M,C,w,T,N,O;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*j*this.a?void 0:(r=e/this.a,i=Math.sin(r),a=Math.cos(r),n=this.long0,Math.abs(e)<=X?o=this.lat0:(o=Ie(a*this.sin_p12+t.y*i*this.cos_p12/e),s=Math.abs(this.lat0)-j,Math.abs(s)<=X?this.lat0>=0?n=Y(this.long0+Math.atan2(t.x,-t.y)):n=Y(this.long0-Math.atan2(-t.x,t.y)):n=Y(this.long0+Math.atan2(t.x*i,e*this.cos_p12*a-t.y*this.sin_p12*i))),t.x=n,t.y=o,t)):(u=si(this.es),h=oi(this.es),d=ui(this.es),l=hi(this.es),Math.abs(this.sin_p12-1)<=X?(f=this.a*Vt(u,h,d,l,j),e=Math.sqrt(t.x*t.x+t.y*t.y),c=f-e,o=Pi(c/this.a,u,h,d,l),n=Y(this.long0+Math.atan2(t.x,-1*t.y)),t.x=n,t.y=o,t):Math.abs(this.sin_p12+1)<=X?(f=this.a*Vt(u,h,d,l,j),e=Math.sqrt(t.x*t.x+t.y*t.y),c=e-f,o=Pi(c/this.a,u,h,d,l),n=Y(this.long0+Math.atan2(t.x,t.y)),t.x=n,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),_=Math.atan2(t.x,t.y),g=cr(this.a,this.e,this.sin_p12),y=Math.cos(_),E=this.e*this.cos_p12*y,M=-E*E/(1-this.es),C=3*this.es*(1-M)*this.sin_p12*this.cos_p12*y/(1-this.es),w=e/g,T=w-M*(1+M)*Math.pow(w,3)/6-C*(1+3*M)*Math.pow(w,4)/24,N=1-M*T*T/2-w*T*T*T/6,p=Math.asin(this.sin_p12*Math.cos(T)+this.cos_p12*Math.sin(T)*y),n=Y(this.long0+Math.asin(Math.sin(_)*Math.sin(T)/Math.cos(p))),O=Math.sin(p),o=Math.atan2((O-this.es*N*this.sin_p12)*Math.tan(p),O*(1-this.es)),t.x=n,t.y=o,t))}var mf=["Azimuthal_Equidistant","aeqd"];const pf={init:cf,forward:ff,inverse:df,names:mf};function gf(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function vf(t){var e,r,i,a,n,o,s,u,h=t.x,d=t.y;return i=Y(h-this.long0),e=Math.sin(d),r=Math.cos(d),a=Math.cos(i),o=this.sin_p14*e+this.cos_p14*r*a,n=1,(o>0||Math.abs(o)<=X)&&(s=this.a*n*r*Math.sin(i),u=this.y0+this.a*n*(this.cos_p14*e-this.sin_p14*r*a)),t.x=s,t.y=u,t}function _f(t){var e,r,i,a,n,o,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=Ie(e/this.a),i=Math.sin(r),a=Math.cos(r),o=this.long0,Math.abs(e)<=X?(s=this.lat0,t.x=o,t.y=s,t):(s=Ie(a*this.sin_p14+t.y*i*this.cos_p14/e),n=Math.abs(this.lat0)-j,Math.abs(n)<=X?(this.lat0>=0?o=Y(this.long0+Math.atan2(t.x,-t.y)):o=Y(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=s,t):(o=Y(this.long0+Math.atan2(t.x*i,e*this.cos_p14*a-t.y*this.sin_p14*i)),t.x=o,t.y=s,t))}var yf=["ortho"];const Ef={init:gf,forward:vf,inverse:_f,names:yf};var xt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},_t={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function bf(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=j-vt/2?this.face=xt.TOP:this.lat0<=-(j-vt/2)?this.face=xt.BOTTOM:Math.abs(this.long0)<=vt?this.face=xt.FRONT:Math.abs(this.long0)<=j+vt?this.face=this.long0>0?xt.RIGHT:xt.LEFT:this.face=xt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Mf(t){var e={x:0,y:0},r,i,a,n,o,s,u={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,i=t.x,this.face===xt.TOP)n=j-r,i>=vt&&i<=j+vt?(u.value=_t.AREA_0,a=i-j):i>j+vt||i<=-(j+vt)?(u.value=_t.AREA_1,a=i>0?i-Rt:i+Rt):i>-(j+vt)&&i<=-vt?(u.value=_t.AREA_2,a=i+j):(u.value=_t.AREA_3,a=i);else if(this.face===xt.BOTTOM)n=j+r,i>=vt&&i<=j+vt?(u.value=_t.AREA_0,a=-i+j):i<vt&&i>=-vt?(u.value=_t.AREA_1,a=-i):i<-vt&&i>=-(j+vt)?(u.value=_t.AREA_2,a=-i-j):(u.value=_t.AREA_3,a=i>0?-i+Rt:-i-Rt);else{var h,d,l,f,c,g,p;this.face===xt.RIGHT?i=nr(i,+j):this.face===xt.BACK?i=nr(i,+Rt):this.face===xt.LEFT&&(i=nr(i,-j)),f=Math.sin(r),c=Math.cos(r),g=Math.sin(i),p=Math.cos(i),h=c*p,d=c*g,l=f,this.face===xt.FRONT?(n=Math.acos(h),a=Ei(n,l,d,u)):this.face===xt.RIGHT?(n=Math.acos(d),a=Ei(n,l,-h,u)):this.face===xt.BACK?(n=Math.acos(-h),a=Ei(n,l,-d,u)):this.face===xt.LEFT?(n=Math.acos(-d),a=Ei(n,l,h,u)):(n=a=0,u.value=_t.AREA_0)}return s=Math.atan(12/Rt*(a+Math.acos(Math.sin(a)*Math.cos(vt))-j)),o=Math.sqrt((1-Math.cos(n))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(a))))),u.value===_t.AREA_1?s+=j:u.value===_t.AREA_2?s+=Rt:u.value===_t.AREA_3&&(s+=1.5*Rt),e.x=o*Math.cos(s),e.y=o*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function wf(t){var e={lam:0,phi:0},r,i,a,n,o,s,u,h,d,l={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?l.value=_t.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(l.value=_t.AREA_1,r-=j):t.x<0&&-t.x>=Math.abs(t.y)?(l.value=_t.AREA_2,r=r<0?r+Rt:r-Rt):(l.value=_t.AREA_3,r+=j),d=Rt/12*Math.tan(r),o=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),s=Math.atan(o),a=Math.cos(r),n=Math.tan(i),u=1-a*a*n*n*(1-Math.cos(Math.atan(1/Math.cos(s)))),u<-1?u=-1:u>1&&(u=1),this.face===xt.TOP)h=Math.acos(u),e.phi=j-h,l.value===_t.AREA_0?e.lam=s+j:l.value===_t.AREA_1?e.lam=s<0?s+Rt:s-Rt:l.value===_t.AREA_2?e.lam=s-j:e.lam=s;else if(this.face===xt.BOTTOM)h=Math.acos(u),e.phi=h-j,l.value===_t.AREA_0?e.lam=-s+j:l.value===_t.AREA_1?e.lam=-s:l.value===_t.AREA_2?e.lam=-s-j:e.lam=s<0?-s-Rt:-s+Rt;else{var f,c,g;f=u,d=f*f,d>=1?g=0:g=Math.sqrt(1-d)*Math.sin(s),d+=g*g,d>=1?c=0:c=Math.sqrt(1-d),l.value===_t.AREA_1?(d=c,c=-g,g=d):l.value===_t.AREA_2?(c=-c,g=-g):l.value===_t.AREA_3&&(d=c,c=g,g=-d),this.face===xt.RIGHT?(d=f,f=-c,c=d):this.face===xt.BACK?(f=-f,c=-c):this.face===xt.LEFT&&(d=f,f=c,c=-d),e.phi=Math.acos(-g)-j,e.lam=Math.atan2(c,f),this.face===xt.RIGHT?e.lam=nr(e.lam,-j):this.face===xt.BACK?e.lam=nr(e.lam,-Rt):this.face===xt.LEFT&&(e.lam=nr(e.lam,+j))}if(this.es!==0){var p,_,y;p=e.phi<0?1:0,_=Math.tan(e.phi),y=this.b/Math.sqrt(_*_+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),p&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Ei(t,e,r,i){var a;return t<X?(i.value=_t.AREA_0,a=0):(a=Math.atan2(e,r),Math.abs(a)<=vt?i.value=_t.AREA_0:a>vt&&a<=j+vt?(i.value=_t.AREA_1,a-=j):a>j+vt||a<=-(j+vt)?(i.value=_t.AREA_2,a=a>=0?a-Rt:a+Rt):(i.value=_t.AREA_3,a+=j)),a}function nr(t,e){var r=t+e;return r<-Rt?r+=Hr:r>+Rt&&(r-=Hr),r}var Af=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Df={init:bf,forward:Mf,inverse:wf,names:Af};var pa=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Rr=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Os=.8487,Rs=1.3523,Ps=_e/5,Cf=1/Ps,rr=18,Bi=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},xf=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function Nf(t,e,r,i){for(var a=e;i;--i){var n=t(a);if(a-=n,Math.abs(n)<r)break}return a}function Tf(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Sf(t){var e=Y(t.x-this.long0),r=Math.abs(t.y),i=Math.floor(r*Ps);i<0?i=0:i>=rr&&(i=rr-1),r=_e*(r-Cf*i);var a={x:Bi(pa[i],r)*e,y:Bi(Rr[i],r)};return t.y<0&&(a.y=-a.y),a.x=a.x*this.a*Os+this.x0,a.y=a.y*this.a*Rs+this.y0,a}function If(t){var e={x:(t.x-this.x0)/(this.a*Os),y:Math.abs(t.y-this.y0)/(this.a*Rs)};if(e.y>=1)e.x/=pa[rr][0],e.y=t.y<0?-j:j;else{var r=Math.floor(e.y*rr);for(r<0?r=0:r>=rr&&(r=rr-1);;)if(Rr[r][0]>e.y)--r;else if(Rr[r+1][0]<=e.y)++r;else break;var i=Rr[r],a=5*(e.y-i[0])/(Rr[r+1][0]-i[0]);a=Nf(function(n){return(Bi(i,n)-e.y)/xf(i,n)},a,X,100),e.x/=Bi(pa[r],a),e.y=(5*r+a)*zt,t.y<0&&(e.y=-e.y)}return e.x=Y(e.x+this.long0),e}var kf=["Robinson","robin"];const Of={init:Tf,forward:Sf,inverse:If,names:kf};function Rf(){this.name="geocent"}function Pf(t){var e=Ms(t,this.es,this.a);return e}function Bf(t){var e=ws(t,this.es,this.a,this.b);return e}var Lf=["Geocentric","geocentric","geocent","Geocent"];const Ff={init:Rf,forward:Pf,inverse:Bf,names:Lf};var Ut={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Nr={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function zf(){if(Object.keys(Nr).forEach((function(r){if(typeof this[r]>"u")this[r]=Nr[r].def;else{if(Nr[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);Nr[r].num&&(this[r]=parseFloat(this[r]))}Nr[r].degrees&&(this[r]=this[r]*zt)}).bind(this)),Math.abs(Math.abs(this.lat0)-j)<X?this.mode=this.lat0<0?Ut.S_POLE:Ut.N_POLE:Math.abs(this.lat0)<X?this.mode=Ut.EQUIT:(this.mode=Ut.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function $f(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),i=Math.cos(t.x),a,n;switch(this.mode){case Ut.OBLIQ:n=this.sinph0*e+this.cosph0*r*i;break;case Ut.EQUIT:n=r*i;break;case Ut.S_POLE:n=-e;break;case Ut.N_POLE:n=e;break}switch(n=this.pn1/(this.p-n),a=n*r*Math.sin(t.x),this.mode){case Ut.OBLIQ:n*=this.cosph0*e-this.sinph0*r*i;break;case Ut.EQUIT:n*=e;break;case Ut.N_POLE:n*=-(r*i);break;case Ut.S_POLE:n*=r*i;break}var o,s;return o=n*this.cg+a*this.sg,s=1/(o*this.sw*this.h1+this.cw),a=(a*this.cg-n*this.sg)*this.cw*s,n=o*s,t.x=a*this.a,t.y=n*this.a,t}function Uf(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,i,a;a=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*a,i=this.pn1*t.y*this.cw*a,t.x=r*this.cg+i*this.sg,t.y=i*this.cg-r*this.sg;var n=Xt(t.x,t.y);if(Math.abs(n)<X)e.x=0,e.y=t.y;else{var o,s;switch(s=1-n*n*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/n+n/this.pn1),o=Math.sqrt(1-s*s),this.mode){case Ut.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*s*this.cosph0/n),t.y=(o-this.sinph0*Math.sin(e.y))*n,t.x*=s*this.cosph0;break;case Ut.EQUIT:e.y=Math.asin(t.y*s/n),t.y=o*n,t.x*=s;break;case Ut.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case Ut.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var qf=["Tilted_Perspective","tpers"];const Gf={init:zf,forward:$f,inverse:Uf,names:qf};function jf(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Hf(t){var e=t.x,r=t.y,i,a,n,o;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var s=this.radius_p/Xt(this.radius_p*Math.cos(r),Math.sin(r));if(a=s*Math.cos(e)*Math.cos(r),n=s*Math.sin(e)*Math.cos(r),o=s*Math.sin(r),(this.radius_g-a)*a-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=this.radius_g-a,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Xt(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(n/i),t.y=this.radius_g_1*Math.atan(o/Xt(n,i)))}else this.shape==="sphere"&&(i=Math.cos(r),a=Math.cos(e)*i,n=Math.sin(e)*i,o=Math.sin(r),i=this.radius_g-a,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Xt(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(n/i),t.y=this.radius_g_1*Math.atan(o/Xt(n,i))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Vf(t){var e=-1,r=0,i=0,a,n,o,s;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Xt(1,i)):(r=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*Xt(1,r));var u=i/this.radius_p;if(a=r*r+u*u+e*e,n=2*this.radius_g*e,o=n*n-4*a*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-n-Math.sqrt(o))/(2*a),e=this.radius_g+s*e,r*=s,i*=s,t.x=Math.atan2(r,e),t.y=Math.atan(i*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+i*i)):(r=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),a=r*r+i*i+e*e,n=2*this.radius_g*e,o=n*n-4*a*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-n-Math.sqrt(o))/(2*a),e=this.radius_g+s*e,r*=s,i*=s,t.x=Math.atan2(r,e),t.y=Math.atan(i*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var Wf=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Zf={init:jf,forward:Hf,inverse:Vf,names:Wf};var Lr=1.340264,Fr=-.081106,zr=893e-6,$r=.003796,Li=Math.sqrt(3)/2;function Xf(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Yf(t){var e=Y(t.x-this.long0),r=t.y,i=Math.asin(Li*Math.sin(r)),a=i*i,n=a*a*a;return t.x=e*Math.cos(i)/(Li*(Lr+3*Fr*a+n*(7*zr+9*$r*a))),t.y=i*(Lr+Fr*a+n*(zr+$r*a)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Qf(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,r=12,i=t.y,a,n,o,s,u,h;for(h=0;h<r&&(a=i*i,n=a*a*a,o=i*(Lr+Fr*a+n*(zr+$r*a))-t.y,s=Lr+3*Fr*a+n*(7*zr+9*$r*a),i-=u=o/s,!(Math.abs(u)<e));++h);return a=i*i,n=a*a*a,t.x=Li*t.x*(Lr+3*Fr*a+n*(7*zr+9*$r*a))/Math.cos(i),t.y=Math.asin(Math.sin(i)/Li),t.x=Y(t.x+this.long0),t}var Kf=["eqearth","Equal Earth","Equal_Earth"];const Jf={init:Xf,forward:Yf,inverse:Qf,names:Kf};var Zr=1e-10;function t0(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Zr)throw new Error;this.es?(this.en=xa(this.es),this.m1=_r(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=r0,this.forward=e0):(Math.abs(this.phi1)+Zr>=j?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=a0,this.forward=i0)}function e0(t){var e=Y(t.x-(this.long0||0)),r=t.y,i,a,n;return i=this.am1+this.m1-_r(r,a=Math.sin(r),n=Math.cos(r),this.en),a=n*e/(i*Math.sqrt(1-this.es*a*a)),t.x=i*Math.sin(a),t.y=this.am1-i*Math.cos(a),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function r0(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,i,a;if(r=Xt(t.x,t.y=this.am1-t.y),a=Na(this.am1+this.m1-r,this.es,this.en),(e=Math.abs(a))<j)e=Math.sin(a),i=r*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(a);else if(Math.abs(e-j)<=Zr)i=0;else throw new Error;return t.x=Y(i+(this.long0||0)),t.y=Be(a),t}function i0(t){var e=Y(t.x-(this.long0||0)),r=t.y,i,a;return a=this.cphi1+this.phi1-r,Math.abs(a)>Zr?(t.x=a*Math.sin(i=e*Math.cos(r)/a),t.y=this.cphi1-a*Math.cos(i)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function a0(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,i=Xt(t.x,t.y=this.cphi1-t.y);if(r=this.cphi1+this.phi1-i,Math.abs(r)>j)throw new Error;return Math.abs(Math.abs(r)-j)<=Zr?e=0:e=i*Math.atan2(t.x,t.y)/Math.cos(r),t.x=Y(e+(this.long0||0)),t.y=Be(r),t}var n0=["bonne","Bonne (Werner lat_1=90)"];const s0={init:t0,names:n0};function o0(t){t.Proj.projections.add(Ci),t.Proj.projections.add(xi),t.Proj.projections.add(tl),t.Proj.projections.add(ll),t.Proj.projections.add(gl),t.Proj.projections.add(bl),t.Proj.projections.add(xl),t.Proj.projections.add(kl),t.Proj.projections.add(Ll),t.Proj.projections.add(ql),t.Proj.projections.add(nc),t.Proj.projections.add(cc),t.Proj.projections.add(gc),t.Proj.projections.add(Mc),t.Proj.projections.add(xc),t.Proj.projections.add(kc),t.Proj.projections.add(Lc),t.Proj.projections.add(qc),t.Proj.projections.add(Zc),t.Proj.projections.add(Jc),t.Proj.projections.add(nf),t.Proj.projections.add(lf),t.Proj.projections.add(pf),t.Proj.projections.add(Ef),t.Proj.projections.add(Df),t.Proj.projections.add(Of),t.Proj.projections.add(Ff),t.Proj.projections.add(Gf),t.Proj.projections.add(Zf),t.Proj.projections.add(Jf),t.Proj.projections.add(s0)}Wt.defaultDatum="WGS84";Wt.Proj=ye;Wt.WGS84=new Wt.Proj("WGS84");Wt.Point=lr;Wt.toPoint=As;Wt.defs=qt;Wt.nadgrid=rh;Wt.transform=Ri;Wt.mgrs=_h;Wt.version="__VERSION__";o0(Wt);var Bs,wn="deflate-raw",An=self.DecompressionStream;try{new An(wn),Bs=async t=>{let e=new An(wn),r=e.writable.getWriter(),i=e.readable.getReader();r.write(t),r.close();let a,n=[],o=0,s=0,u;for(;!(u=await i.read()).done;)a=u.value,n.push(a),o+=a.length;return n.length-1?(a=new Uint8Array(o),n.map(h=>{a.set(h,s),s+=h.length}),a):n[0]}}catch{}var u0=new TextDecoder,ua=t=>{throw new Error("but-unzip~"+t)},Dn=t=>u0.decode(t),h0=t=>{let e=t.length-20,r=Math.max(e-65516,2);for(;(e=t.lastIndexOf(80,e-1))!==-1&&!(t[e+1]===75&&t[e+2]===5&&t[e+3]===6)&&e>r;);return e};function*l0(t,e=Bs){let r=h0(t);r===-1&&ua(2);let i=(u,h)=>t.subarray(r+=u,r+=h),a=new DataView(t.buffer,t.byteOffset),n=u=>a.getUint16(u+r,!0),o=u=>a.getUint32(u+r,!0),s=n(10);for(s!==n(8)&&ua(3),r=o(16);s--;){let u=n(10),h=n(28),d=n(30),l=n(32),f=o(20),c=o(42),g=Dn(i(46,h)),p=Dn(i(d,l)),_=r,y;r=c,y=i(30+n(26)+n(28),f),yield{filename:g,comment:p,read:()=>u&8?e(y):u?ua(1):y},r=_}}const c0=/.+\.(shp|dbf|json|prj|cpg)$/i,f0=async t=>{const e={},r=[];for(const n of l0(t))c0.test(n.filename)&&r.push(Promise.resolve(n.read()).then(o=>e[n.filename]=o));await Promise.all(r);const i={},a=new TextDecoder;for(const[n,o]of Object.entries(e))n.slice(-3).toLowerCase()==="shp"||n.slice(-3).toLowerCase()==="dbf"?i[n]=new DataView(o.buffer,o.byteOffset,o.byteLength):i[n]=a.decode(o);return i},d0=globalThis.URL,m0=(t,e)=>{if(!e)return t;const r=new d0(t);return r.pathname=`${r.pathname}.${e}`,r.href};async function Xr(t,e){const r=m0(t,e),i=e==="prj"||e==="cpg";try{const a=await fetch(r);if(a.status>399)throw new Error(a.statusText);if(i)return a.text();const n=await a.arrayBuffer();return new DataView(n)}catch(a){if(i||e==="dbf")return!1;throw a}}function p0(t){let e=0,r=1;const i=t.length;let a,n;const o=[t[0][0],t[0][1],t[0][0],t[0][1]];for(;r<i;)a=n||t[0],n=t[r],e+=(n[0]-a[0])*(n[1]+a[1]),r++,n[0]<o[0]&&(o[0]=n[0]),n[1]<o[1]&&(o[1]=n[1]),n[0]>o[2]&&(o[2]=n[0]),n[1]>o[3]&&(o[3]=n[1]);return{ring:t,clockWise:e>0,bbox:o,children:[]}}function g0(t,e){return!(t.bbox[0]>e.bbox[0]||t.bbox[1]>e.bbox[1]||t.bbox[2]<e.bbox[2]||t.bbox[3]<e.bbox[3])}function v0(t){const e=[],r=[];for(const a of t){const n=p0(a);n.clockWise?e.push(n):r.push(n)}for(const a of r)for(const n of e)if(g0(n,a)){n.children.push(a.ring);break}const i=[];for(const a of e)i.push([a.ring].concat(a.children));return i}Pt.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}};Pt.prototype.parseZPoint=function(t){const e=this.parsePoint(t);return e.coordinates.push(t.getFloat64(16,!0)),e};Pt.prototype.parsePointArray=function(t,e,r){const i=[];let a=0;for(;a<r;)i.push(this.parseCoord(t,e)),e+=16,a++;return i};Pt.prototype.parseZPointArray=function(t,e,r,i){let a=0;for(;a<r;)i[a].push(t.getFloat64(e,!0)),a++,e+=8;return i};Pt.prototype.parseArrayGroup=function(t,e,r,i,a){const n=[];let o=0,s,u=0,h;for(;o<i;)o++,r+=4,s=u,o===i?u=a:u=t.getInt32(r,!0),h=u-s,h&&(n.push(this.parsePointArray(t,e,h)),e+=h<<4);return n};Pt.prototype.parseZArrayGroup=function(t,e,r,i){let a=0;for(;a<r;)i[a]=this.parseZPointArray(t,e,i[a].length,i[a]),e+=i[a].length<<3,a++;return i};Pt.prototype.parseMultiPoint=function(t){const e={},r=t.getInt32(32,!0);if(!r)return null;const i=this.parseCoord(t,0),a=this.parseCoord(t,16);e.bbox=[i[0],i[1],a[0],a[1]];const n=36;return r===1?(e.type="Point",e.coordinates=this.parseCoord(t,n)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,n,r)),e};Pt.prototype.parseZMultiPoint=function(t){const e=this.parseMultiPoint(t);if(!e)return null;let r;if(e.type==="Point")return e.coordinates.push(t.getFloat64(72,!0)),e;r=e.coordinates.length;const i=52+(r<<4);return e.coordinates=this.parseZPointArray(t,i,r,e.coordinates),e};Pt.prototype.parsePolyline=function(t){const e={},r=t.getInt32(32,!0);if(!r)return null;const i=this.parseCoord(t,0),a=this.parseCoord(t,16);e.bbox=[i[0],i[1],a[0],a[1]];const n=t.getInt32(36,!0);let o,s;return r===1?(e.type="LineString",o=44,e.coordinates=this.parsePointArray(t,o,n)):(e.type="MultiLineString",o=40+(r<<2),s=40,e.coordinates=this.parseArrayGroup(t,o,s,r,n)),e};Pt.prototype.parseZPolyline=function(t){const e=this.parsePolyline(t);if(!e)return null;const r=e.coordinates.length;let i;return e.type==="LineString"?(i=60+(r<<4),e.coordinates=this.parseZPointArray(t,i,r,e.coordinates),e):(i=56+(e.coordinates.reduce(function(n,o){return n+o.length},0)<<4)+(r<<2),e.coordinates=this.parseZArrayGroup(t,i,r,e.coordinates),e)};Pt.prototype.polyFuncs=function(t){return t&&(t.type==="LineString"?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=v0(t.coordinates),t.coordinates.length===1?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t)))};Pt.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))};Pt.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};const Cn={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function _0(t){return t?function(e,r){const i=[e.getFloat64(r,!0),e.getFloat64(r+8,!0)];return t.inverse(i)}:function(e,r){return[e.getFloat64(r,!0),e.getFloat64(r+8,!0)]}}function Pt(t,e){if(!(this instanceof Pt))return new Pt(t,e);this.buffer=t,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}Pt.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in Cn))throw new Error(`I don't know shp type "${e}"`);this.parseFunc=this[Cn[e]],this.parseCoord=_0(t)};Pt.prototype.getShpCode=function(){return this.parseHeader().shpCode};Pt.prototype.parseHeader=function(){const t=this.buffer;return{length:t.getInt32(24)<<1,version:t.getInt32(28,!0),shpCode:t.getInt32(32,!0),bbox:[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(60,!0)]}};Pt.prototype.getRows=function(){let t=100;const e=this.buffer.byteLength-8,r=[];let i;for(;t<=e&&(i=this.getRow(t),!!i);)t+=8,t+=i.len,i.type?r.push(this.parseFunc(i.data)):r.push(null);return r};Pt.prototype.getRow=function(t){const e=this.buffer.getInt32(t),r=this.buffer.getInt32(t+4)<<1;if(r===0)return{id:e,len:r,type:0};if(!(t+r+8>this.buffer.byteLength))return{id:e,len:r,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+t+12,r-4),type:this.buffer.getInt32(t+8,!0)}};function ka(t,e){return new Pt(t,e).rows}var y0=/^(?:ANSI\s)?(\d+)$/m;function Ls(t,e){if(!t)return i;try{new TextDecoder(t.trim())}catch{var r=y0.exec(t);return r&&!e?Ls("windows-"+r[1],!0):(t=void 0,i)}return i;function i(a){var n=new TextDecoder(t||void 0),o=n.decode(a,{stream:!0})+n.decode();return o.replace(/\0/g,"").trim()}}function E0(t){var e={};return e.lastUpdated=new Date(t.getUint8(1)+1900,t.getUint8(2),t.getUint8(3)),e.records=t.getUint32(4,!0),e.headerLen=t.getUint16(8,!0),e.recLen=t.getUint16(10,!0),e}function b0(t,e,r){for(var i=[],a=32;a<e&&(i.push({name:r(new Uint8Array(t.buffer.slice(t.byteOffset+a,t.byteOffset+a+11))),dataType:String.fromCharCode(t.getUint8(a+11)),len:t.getUint8(a+16),decimal:t.getUint8(a+17)}),t.getUint8(a+32)!==13);)a+=32;return i}function M0(t,e,r,i,a){const n=new Uint8Array(t.buffer.slice(t.byteOffset+e,t.byteOffset+e+r));var o=a(n);switch(i){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return o.toLowerCase()==="y"||o.toLowerCase()==="t";default:return o}}function w0(t,e,r,i){for(var a={},n=0,o=r.length,s,u;n<o;)u=r[n],s=M0(t,e,u.len,u.dataType,i),e+=u.len,typeof s<"u"&&(a[u.name]=s),n++;return a}function Oa(t,e){for(var r=Ls(e),i=E0(t),a=b0(t,i.headerLen-1,r),n=(a.length+1<<5)+2,o=i.recLen,s=i.records,u=[];s;)u.push(w0(t,n,a,r)),n+=o,s--;return u}const A0=globalThis.URL,D0=t=>{if(!t)throw new Error("forgot to pass buffer");if(fr(t))return new Uint8Array(t);if(fr(t.buffer))return t.BYTES_PER_ELEMENT===1?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")},C0=new TextDecoder,Fs=t=>{if(t){if(typeof t=="string")return t;if(fr(t)||ArrayBuffer.isView(t)||Ra(t))return C0.decode(t)}},zs=t=>{if(!t)throw new Error("forgot to pass buffer");if(Ra(t))return t;if(fr(t))return new DataView(t);if(fr(t.buffer))return new DataView(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")};function fr(t){return t instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]"}function Ra(t){return t instanceof globalThis.DataView||Object.prototype.toString.call(t)==="[object DataView]"}const Pa=function([t,e]){const r={};r.type="FeatureCollection",r.features=[];let i=0;const a=t.length;for(e||(e=[]);i<a;)r.features.push({type:"Feature",geometry:t[i],properties:e[i]||{}}),i++;return r},$s=async function(t,e){let r;t=D0(t);const i=await f0(t),a=[];e=e||[];for(r in i)r.indexOf("__MACOSX")===-1&&(r.slice(-4).toLowerCase()===".shp"?(a.push(r.slice(0,-4)),i[r.slice(0,-3)+r.slice(-3).toLowerCase()]=i[r]):r.slice(-4).toLowerCase()===".prj"?i[r.slice(0,-3)+r.slice(-3).toLowerCase()]=Wt(i[r]):r.slice(-5).toLowerCase()===".json"||e.indexOf(r.split(".").pop())>-1?a.push(r.slice(0,-3)+r.slice(-3).toLowerCase()):(r.slice(-4).toLowerCase()===".dbf"||r.slice(-4).toLowerCase()===".cpg")&&(i[r.slice(0,-3)+r.slice(-3).toLowerCase()]=i[r]));if(!a.length)throw new Error("no layers founds");const n=a.map(function(o){let s,u;const h=o.lastIndexOf(".");return h>-1&&o.slice(h).indexOf("json")>-1?(s=JSON.parse(i[o]),s.fileName=o.slice(0,h)):e.indexOf(o.slice(h+1))>-1?(s=i[o],s.fileName=o):(i[o+".dbf"]&&(u=Oa(i[o+".dbf"],i[o+".cpg"])),s=Pa([ka(i[o+".shp"],i[o+".prj"]),u]),s.fileName=o),s});return n.length===1?n[0]:n};async function x0(t,e){const r=await Xr(t);return $s(r,e)}const N0=async t=>{const e=await Promise.all([Xr(t,"shp"),Xr(t,"prj")]);let r=!1;try{e[1]&&(r=Wt(e[1]))}catch{r=!1}return ka(e[0],r)},T0=async t=>{const[e,r]=await Promise.all([Xr(t,"dbf"),Xr(t,"cpg")]);if(e)return Oa(e,r)},xn=(t,e)=>{var i;return new A0(t,(i=globalThis==null?void 0:globalThis.document)==null?void 0:i.location).pathname.slice(-4).toLowerCase()===e},S0=({shp:t,dbf:e,cpg:r,prj:i})=>{const a=[I0(t,i)];return e&&a.push(k0(e,r)),Pa(a)},ga=async function(t,e){if(typeof t!="string"){if(fr(t)||ArrayBuffer.isView(t)||Ra(t))return $s(t);if(t.shp)return S0(t);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(xn(t,".zip"))return x0(t,e);xn(t,".shp")&&(t=t.slice(0,-4));const r=await Promise.all([N0(t),T0(t)]);return Pa(r)},I0=function(t,e){if(t=zs(t),e=Fs(e),typeof e=="string")try{e=Wt(e)}catch{e=!1}return ka(t,e)},k0=function(t,e){return t=zs(t),e=Fs(e),Oa(t,e)};var St={};function O0(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var i=0;i<t.length;i++)if(Ge(t,i)){var a=t[i];if(e.call(void 0,a,i,t))return a}}function yr(t,e){return e===void 0&&(e=Object),e&&typeof e.getOwnPropertyDescriptors=="function"&&(t=e.create(null,e.getOwnPropertyDescriptors(t))),e&&typeof e.freeze=="function"?e.freeze(t):t}function Ge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R0(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var r in e)Ge(e,r)&&(t[r]=e[r]);return t}var Us=yr({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function P0(t){return Ge(Us,t.toLowerCase())}var qs=yr({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function B0(t){return Ge(qs,t.toLowerCase())}var Yr=yr({script:!1,style:!1,textarea:!0,title:!0});function L0(t){var e=t.toLowerCase();return Ge(Yr,e)&&!Yr[e]}function F0(t){var e=t.toLowerCase();return Ge(Yr,e)&&Yr[e]}function Gs(t){return t===Qr.HTML}function z0(t){return Gs(t)||t===Qr.XML_XHTML_APPLICATION}var Qr=yr({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),$0=Object.keys(Qr).map(function(t){return Qr[t]});function U0(t){return $0.indexOf(t)>-1}var q0=yr({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});St.assign=R0;St.find=O0;St.freeze=yr;St.HTML_BOOLEAN_ATTRIBUTES=Us;St.HTML_RAW_TEXT_ELEMENTS=Yr;St.HTML_VOID_ELEMENTS=qs;St.hasDefaultHTMLNamespace=z0;St.hasOwn=Ge;St.isHTMLBooleanAttribute=P0;St.isHTMLRawTextElement=L0;St.isHTMLEscapableRawTextElement=F0;St.isHTMLMimeType=Gs;St.isHTMLVoidElement=B0;St.isValidMimeType=U0;St.MIME_TYPE=Qr;St.NAMESPACE=q0;var je={},G0=St;function js(t,e){t.prototype=Object.create(Error.prototype,{constructor:{value:t},name:{value:t.name,enumerable:!0,writable:e}})}var Kr=G0.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),Hs=Object.keys(Kr);function Vs(t){return typeof t=="number"&&t>=1&&t<=25}function j0(t){return typeof t=="string"&&t.substring(t.length-Kr.Error.length)===Kr.Error}function li(t,e){Vs(t)?(this.name=Hs[t],this.message=e||""):(this.message=t,this.name=j0(e)?e:Kr.Error),Error.captureStackTrace&&Error.captureStackTrace(this,li)}js(li,!0);Object.defineProperties(li.prototype,{code:{enumerable:!0,get:function(){var t=Hs.indexOf(this.name);return Vs(t)?t:0}}});var Ws={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},ha=Object.entries(Ws);for(var bi=0;bi<ha.length;bi++){var H0=ha[bi][0];li[H0]=ha[bi][1]}function Ba(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ba)}js(Ba);je.DOMException=li;je.DOMExceptionName=Kr;je.ExceptionCode=Ws;je.ParseError=Ba;var Bt={},ht={};function Zs(t){try{typeof t!="function"&&(t=RegExp);var e=new t("","u").exec("");return!!e&&e[0].length===2}catch{}return!1}var ci=Zs();function $e(t){if(t.source[0]!=="[")throw new Error(t+" can not be used with chars");return t.source.slice(1,t.source.lastIndexOf("]"))}function dr(t,e){if(t.source[0]!=="[")throw new Error("/"+t.source+"/ can not be used with chars_without");if(!e||typeof e!="string")throw new Error(JSON.stringify(e)+" is not a valid search");if(t.source.indexOf(e)===-1)throw new Error('"'+e+'" is not is /'+t.source+"/");if(e==="-"&&t.source.indexOf(e)!==1)throw new Error('"'+e+'" is not at the first postion of /'+t.source+"/");return new RegExp(t.source.replace(e,""),ci?"u":"")}function lt(t){var e=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(r){var i=typeof r=="string";if(i&&e===void 0&&r==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return i?r:r.source}).join(""),ci?"mu":"m")}function at(t){if(arguments.length===0)throw new Error("no parameters provided");return lt.apply(at,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var V0="",Ue=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;ci&&(Ue=lt("[",$e(Ue),"\\u{10000}-\\u{10FFFF}","]"));var La=/[\x20\x09\x0D\x0A]/,W0=$e(La),Et=lt(La,"+"),Nt=lt(La,"*"),Jr=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;ci&&(Jr=lt("[",$e(Jr),"\\u{10000}-\\u{10FFFF}","]"));var Z0=$e(Jr),Fa=lt("[",Z0,$e(/[-.0-9\xB7]/),$e(/[\u0300-\u036F\u203F-\u2040]/),"]"),oe=lt(Jr,Fa,"*"),Nn=lt(Fa,"+"),X0=lt("&",oe,";"),Y0=at(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),ti=at(X0,"|",Y0),ei=lt("%",oe,";"),za=at(lt('"',at(/[^%&"]/,"|",ei,"|",ti),"*",'"'),"|",lt("'",at(/[^%&']/,"|",ei,"|",ti),"*","'")),Q0=at('"',at(/[^<&"]/,"|",ti),"*",'"',"|","'",at(/[^<&']/,"|",ti),"*","'"),K0=dr(Jr,":"),J0=dr(Fa,":"),Tn=lt(K0,J0,"*"),fi=lt(Tn,at(":",Tn),"?"),t2=lt("^",fi,"$"),e2=lt("(",fi,")"),ri=at(/"[^"]*"|'[^']*'/),r2=lt(/^<\?/,"(",oe,")",at(Et,"(",Ue,"*?)"),"?",/\?>/),Sn=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,Vi=at('"',Sn,'*"',"|","'",dr(Sn,"'"),"*'"),Xs="<!--",Ys="-->",i2=lt(Xs,at(dr(Ue,"-"),"|",lt("-",dr(Ue,"-"))),"*",Ys),In="#PCDATA",a2=at(lt(/\(/,Nt,In,at(Nt,/\|/,Nt,fi),"*",Nt,/\)\*/),"|",lt(/\(/,Nt,In,Nt,/\)/)),n2=/[?*+]?/,s2=lt(/\([^>]+\)/,n2),o2=at("EMPTY","|","ANY","|",a2,"|",s2),u2="<!ELEMENT",h2=lt(u2,Et,at(fi,"|",ei),Et,at(o2,"|",ei),Nt,">"),l2=lt("NOTATION",Et,/\(/,Nt,oe,at(Nt,/\|/,Nt,oe),"*",Nt,/\)/),c2=lt(/\(/,Nt,Nn,at(Nt,/\|/,Nt,Nn),"*",Nt,/\)/),f2=at(l2,"|",c2),d2=at(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",f2),m2=at(/#REQUIRED|#IMPLIED/,"|",at(at("#FIXED",Et),"?",Q0)),p2=at(Et,oe,Et,d2,Et,m2),g2="<!ATTLIST",v2=lt(g2,Et,oe,p2,"*",Nt,">"),va="about:legacy-compat",_2=at('"'+va+'"',"|","'"+va+"'"),$a="SYSTEM",Wi="PUBLIC",Zi=at(at($a,Et,ri),"|",at(Wi,Et,Vi,Et,ri)),y2=lt("^",at(at($a,Et,"(?<SystemLiteralOnly>",ri,")"),"|",at(Wi,Et,"(?<PubidLiteral>",Vi,")",Et,"(?<SystemLiteral>",ri,")"))),E2=at(Et,"NDATA",Et,oe),b2=at(za,"|",at(Zi,E2,"?")),Qs="<!ENTITY",M2=lt(Qs,Et,oe,Et,b2,Nt,">"),w2=at(za,"|",Zi),A2=lt(Qs,Et,"%",Et,oe,Et,w2,Nt,">"),D2=at(M2,"|",A2),C2=lt(Wi,Et,Vi),x2=lt("<!NOTATION",Et,oe,Et,at(Zi,"|",C2),Nt,">"),Ua=lt(Nt,"=",Nt),kn=/1[.]\d+/,N2=lt(Et,"version",Ua,at("'",kn,"'","|",'"',kn,'"')),On=/[A-Za-z][-A-Za-z0-9._]*/,T2=at(Et,"encoding",Ua,at('"',On,'"',"|","'",On,"'")),S2=at(Et,"standalone",Ua,at("'",at("yes","|","no"),"'","|",'"',at("yes","|","no"),'"')),I2=lt(/^<\?xml/,N2,T2,"?",S2,"?",Nt,/\?>/),k2="<!DOCTYPE",O2="<![CDATA[",R2="]]>",P2=/<!\[CDATA\[/,B2=/\]\]>/,L2=lt(Ue,"*?",B2),F2=lt(P2,L2);ht.chars=$e;ht.chars_without=dr;ht.detectUnicodeSupport=Zs;ht.reg=lt;ht.regg=at;ht.ABOUT_LEGACY_COMPAT=va;ht.ABOUT_LEGACY_COMPAT_SystemLiteral=_2;ht.AttlistDecl=v2;ht.CDATA_START=O2;ht.CDATA_END=R2;ht.CDSect=F2;ht.Char=Ue;ht.Comment=i2;ht.COMMENT_START=Xs;ht.COMMENT_END=Ys;ht.DOCTYPE_DECL_START=k2;ht.elementdecl=h2;ht.EntityDecl=D2;ht.EntityValue=za;ht.ExternalID=Zi;ht.ExternalID_match=y2;ht.Name=oe;ht.NotationDecl=x2;ht.Reference=ti;ht.PEReference=ei;ht.PI=r2;ht.PUBLIC=Wi;ht.PubidLiteral=Vi;ht.QName=fi;ht.QName_exact=t2;ht.QName_group=e2;ht.S=Et;ht.SChar_s=W0;ht.S_OPT=Nt;ht.SYSTEM=$a;ht.SystemLiteral=ri;ht.UNICODE_REPLACEMENT_CHARACTER=V0;ht.UNICODE_SUPPORT=ci;ht.XMLDecl=I2;var se=St,Ee=se.find,z2=se.hasDefaultHTMLNamespace,mr=se.hasOwn,$2=se.isHTMLMimeType,U2=se.isHTMLRawTextElement,q2=se.isHTMLVoidElement,Pr=se.MIME_TYPE,Me=se.NAMESPACE,Gt=Symbol(),Ks=je,et=Ks.DOMException,G2=Ks.DOMExceptionName,ve=ht;function Jt(t){if(t!==Gt)throw new TypeError("Illegal constructor")}function j2(t){return t!==""}function H2(t){return t?t.split(/[\t\n\f\r ]+/).filter(j2):[]}function V2(t,e){return mr(t,e)||(t[e]=!0),t}function Rn(t){if(!t)return[];var e=H2(t);return Object.keys(e.reduce(V2,{}))}function W2(t){return function(e){return t&&t.indexOf(e)!==-1}}function Js(t){if(!ve.QName_exact.test(t))throw new et(et.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+t+'"')}function _a(t,e){Js(e),t=t||null;var r=null,i=e;if(e.indexOf(":")>=0){var a=e.split(":");r=a[0],i=a[1]}if(r!==null&&t===null)throw new et(et.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(r==="xml"&&t!==se.NAMESPACE.XML)throw new et(et.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((r==="xmlns"||e==="xmlns")&&t!==se.NAMESPACE.XMLNS)throw new et(et.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(t===se.NAMESPACE.XMLNS&&r!=="xmlns"&&e!=="xmlns")throw new et(et.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[t,r,i]}function Er(t,e){for(var r in t)mr(t,r)&&(e[r]=t[r])}function te(t,e){var r=t.prototype;if(!(r instanceof e)){let i=function(){};i.prototype=e.prototype,i=new i,Er(r,i),t.prototype=r=i}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var ee={},le=ee.ELEMENT_NODE=1,pr=ee.ATTRIBUTE_NODE=2,Fi=ee.TEXT_NODE=3,to=ee.CDATA_SECTION_NODE=4,eo=ee.ENTITY_REFERENCE_NODE=5,Z2=ee.ENTITY_NODE=6,ro=ee.PROCESSING_INSTRUCTION_NODE=7,io=ee.COMMENT_NODE=8,ii=ee.DOCUMENT_NODE=9,ao=ee.DOCUMENT_TYPE_NODE=10,ke=ee.DOCUMENT_FRAGMENT_NODE=11,X2=ee.NOTATION_NODE=12,Tt=se.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function no(t,e){if(e.length<t.length)return no(e,t);var r=null;for(var i in t){if(t[i]!==e[i])return r;r=t[i]}return r}function Pn(t){return t.guid||(t.guid=Math.random()),t.guid}function Lt(){}Lt.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t){for(var e=[],r=0;r<this.length;r++)ir(this[r],e,t);return e.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};Lt.prototype[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Le(t,e){this._node=t,this._refresh=e,Xi(this)}function Xi(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var r=t._refresh(t._node);if(_o(t,"length",r.length),!t.$$length||r.length<t.$$length)for(var i=r.length;i in t;i++)mr(t,i)&&delete t[i];Er(r,t),t._inc=e}}Le.prototype.item=function(t){return Xi(this),this[t]||null};te(Le,Lt);function gr(){}function so(t,e){for(var r=0;r<t.length;){if(t[r]===e)return r;r++}}function Y2(t,e,r,i){if(i?e[so(e,i)]=r:(e[e.length]=r,e.length++),t){r.ownerElement=t;var a=t.ownerDocument;a&&(i&&ho(a,t,i),Q2(a,t,r))}}function Bn(t,e,r){var i=so(e,r);if(i>=0){for(var a=e.length-1;i<=a;)e[i]=e[++i];if(e.length=a,t){var n=t.ownerDocument;n&&ho(n,t,r),r.ownerElement=null}}}gr.prototype={length:0,item:Lt.prototype.item,getNamedItem:function(t){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(t=t.toLowerCase());for(var e=0;e<this.length;){var r=this[e];if(r.nodeName===t)return r;e++}return null},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!==this._ownerElement)throw new et(et.INUSE_ATTRIBUTE_ERR);var r=this.getNamedItemNS(t.namespaceURI,t.localName);return r===t?t:(Y2(this._ownerElement,this,t,r),r)},setNamedItemNS:function(t){return this.setNamedItem(t)},removeNamedItem:function(t){var e=this.getNamedItem(t);if(!e)throw new et(et.NOT_FOUND_ERR,t);return Bn(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);if(!r)throw new et(et.NOT_FOUND_ERR,t?t+" : "+e:e);return Bn(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){t||(t=null);for(var r=0;r<this.length;){var i=this[r];if(i.localName===e&&i.namespaceURI===t)return i;r++}return null}};gr.prototype[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function oo(){}oo.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var i=Pr.XML_APPLICATION;t===Me.HTML?i=Pr.XML_XHTML_APPLICATION:t===Me.SVG&&(i=Pr.XML_SVG_IMAGE);var a=new Oe(Gt,{contentType:i});if(a.implementation=this,a.childNodes=new Lt,a.doctype=r||null,r&&a.appendChild(r),e){var n=a.createElementNS(t,e);a.appendChild(n)}return a},createDocumentType:function(t,e,r,i){Js(t);var a=new Ki(Gt);return a.name=t,a.nodeName=t,a.publicId=e||"",a.systemId=r||"",a.internalSubset=i||"",a.childNodes=new Lt,a},createHTMLDocument:function(t){var e=new Oe(Gt,{contentType:Pr.HTML});if(e.implementation=this,e.childNodes=new Lt,t!==!1){e.doctype=this.createDocumentType("html"),e.doctype.ownerDocument=e,e.appendChild(e.doctype);var r=e.createElement("html");e.appendChild(r);var i=e.createElement("head");if(r.appendChild(i),typeof t=="string"){var a=e.createElement("title");a.appendChild(e.createTextNode(t)),i.appendChild(a)}r.appendChild(e.createElement("body"))}return e}};function dt(t){Jt(t)}dt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var t=this.getRootNode();return t&&t.nodeType===t.DOCUMENT_NODE},contains:function(t){if(!t)return!1;var e=t;do{if(this===e)return!0;e=t.parentNode}while(e);return!1},getRootNode:function(t){var e=this;do{if(!e.parentNode)return e;e=e.parentNode}while(e)},isEqualNode:function(t){if(!t||this.nodeType!==t.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==t.name||this.publicId!==t.publicId||this.systemId!==t.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==t.namespaceURI||this.prefix!==t.prefix||this.localName!==t.localName||this.attributes.length!==t.attributes.length)return!1;for(var e=0;e<this.attributes.length;e++){var r=this.attributes.item(e);if(!r.isEqualNode(t.getAttributeNodeNS(r.namespaceURI,r.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==t.namespaceURI||this.localName!==t.localName||this.value!==t.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==t.target||this.data!==t.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==t.data)return!1;break}if(this.childNodes.length!==t.childNodes.length)return!1;for(var e=0;e<this.childNodes.length;e++)if(!this.childNodes[e].isEqualNode(t.childNodes[e]))return!1;return!0},isSameNode:function(t){return this===t},insertBefore:function(t,e){return zi(this,t,e)},replaceChild:function(t,e){zi(this,t,e,mo),e&&this.removeChild(e)},removeChild:function(t){return co(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return ya(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Fi&&t.nodeType==Fi?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var i in r)if(mr(r,i)&&r[i]===t)return i}e=e.nodeType==pr?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&mr(r,t))return r[t];e=e.nodeType==pr?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null},compareDocumentPosition:function(t){if(this===t)return 0;var e=t,r=this,i=null,a=null;if(e instanceof qe&&(i=e,e=i.ownerElement),r instanceof qe&&(a=r,r=a.ownerElement,i&&e&&r===e))for(var n=0,o;o=r.attributes[n];n++){if(o===i)return Tt.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Tt.DOCUMENT_POSITION_PRECEDING;if(o===a)return Tt.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Tt.DOCUMENT_POSITION_FOLLOWING}if(!e||!r||r.ownerDocument!==e.ownerDocument)return Tt.DOCUMENT_POSITION_DISCONNECTED+Tt.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(Pn(r.ownerDocument)>Pn(e.ownerDocument)?Tt.DOCUMENT_POSITION_FOLLOWING:Tt.DOCUMENT_POSITION_PRECEDING);if(a&&e===r)return Tt.DOCUMENT_POSITION_CONTAINS+Tt.DOCUMENT_POSITION_PRECEDING;if(i&&e===r)return Tt.DOCUMENT_POSITION_CONTAINED_BY+Tt.DOCUMENT_POSITION_FOLLOWING;for(var s=[],u=e.parentNode;u;){if(!a&&u===r)return Tt.DOCUMENT_POSITION_CONTAINED_BY+Tt.DOCUMENT_POSITION_FOLLOWING;s.push(u),u=u.parentNode}s.reverse();for(var h=[],d=r.parentNode;d;){if(!i&&d===e)return Tt.DOCUMENT_POSITION_CONTAINS+Tt.DOCUMENT_POSITION_PRECEDING;h.push(d),d=d.parentNode}h.reverse();var l=no(s,h);for(var f in l.childNodes){var c=l.childNodes[f];if(c===r)return Tt.DOCUMENT_POSITION_FOLLOWING;if(c===e)return Tt.DOCUMENT_POSITION_PRECEDING;if(h.indexOf(c)>=0)return Tt.DOCUMENT_POSITION_FOLLOWING;if(s.indexOf(c)>=0)return Tt.DOCUMENT_POSITION_PRECEDING}return 0}};function uo(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Er(ee,dt);Er(ee,dt.prototype);Er(Tt,dt);Er(Tt,dt.prototype);function Ur(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Ur(t,e))return!0;while(t=t.nextSibling)}function Oe(t,e){Jt(t);var r=e||{};this.ownerDocument=this,this.contentType=r.contentType||Pr.XML_APPLICATION,this.type=$2(this.contentType)?"html":"xml"}function Q2(t,e,r){t&&t._inc++;var i=r.namespaceURI;i===Me.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function ho(t,e,r,i){t&&t._inc++;var a=r.namespaceURI;a===Me.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function lo(t,e,r){if(t&&t._inc){t._inc++;var i=e.childNodes;if(r&&!r.nextSibling)i[i.length++]=r;else{for(var a=e.firstChild,n=0;a;)i[n++]=a,a=a.nextSibling;i.length=n,delete i[i.length]}}}function co(t,e){if(t!==e.parentNode)throw new et(et.NOT_FOUND_ERR,"child's parent is not parent");var r=e.previousSibling,i=e.nextSibling;return r?r.nextSibling=i:t.firstChild=i,i?i.previousSibling=r:t.lastChild=r,lo(t.ownerDocument,t),e.parentNode=null,e.previousSibling=null,e.nextSibling=null,e}function K2(t){return t&&(t.nodeType===dt.DOCUMENT_NODE||t.nodeType===dt.DOCUMENT_FRAGMENT_NODE||t.nodeType===dt.ELEMENT_NODE)}function J2(t){return t&&(t.nodeType===dt.CDATA_SECTION_NODE||t.nodeType===dt.COMMENT_NODE||t.nodeType===dt.DOCUMENT_FRAGMENT_NODE||t.nodeType===dt.DOCUMENT_TYPE_NODE||t.nodeType===dt.ELEMENT_NODE||t.nodeType===dt.PROCESSING_INSTRUCTION_NODE||t.nodeType===dt.TEXT_NODE)}function Re(t){return t&&t.nodeType===dt.DOCUMENT_TYPE_NODE}function Ce(t){return t&&t.nodeType===dt.ELEMENT_NODE}function fo(t){return t&&t.nodeType===dt.TEXT_NODE}function Ln(t,e){var r=t.childNodes||[];if(Ee(r,Ce)||Re(e))return!1;var i=Ee(r,Re);return!(e&&i&&r.indexOf(i)>r.indexOf(e))}function Fn(t,e){var r=t.childNodes||[];function i(n){return Ce(n)&&n!==e}if(Ee(r,i))return!1;var a=Ee(r,Re);return!(e&&a&&r.indexOf(a)>r.indexOf(e))}function td(t,e,r){if(!K2(t))throw new et(et.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new et(et.NOT_FOUND_ERR,"child not in parent");if(!J2(e)||Re(e)&&t.nodeType!==dt.DOCUMENT_NODE)throw new et(et.HIERARCHY_REQUEST_ERR,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function ed(t,e,r){var i=t.childNodes||[],a=e.childNodes||[];if(e.nodeType===dt.DOCUMENT_FRAGMENT_NODE){var n=a.filter(Ce);if(n.length>1||Ee(a,fo))throw new et(et.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(n.length===1&&!Ln(t,r))throw new et(et.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Ce(e)&&!Ln(t,r))throw new et(et.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Re(e)){if(Ee(i,Re))throw new et(et.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var o=Ee(i,Ce);if(r&&i.indexOf(o)<i.indexOf(r))throw new et(et.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!r&&o)throw new et(et.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function mo(t,e,r){var i=t.childNodes||[],a=e.childNodes||[];if(e.nodeType===dt.DOCUMENT_FRAGMENT_NODE){var n=a.filter(Ce);if(n.length>1||Ee(a,fo))throw new et(et.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(n.length===1&&!Fn(t,r))throw new et(et.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Ce(e)&&!Fn(t,r))throw new et(et.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Re(e)){if(Ee(i,function(u){return Re(u)&&u!==r}))throw new et(et.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var o=Ee(i,Ce);if(r&&i.indexOf(o)<i.indexOf(r))throw new et(et.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function zi(t,e,r,i){td(t,e,r),t.nodeType===dt.DOCUMENT_NODE&&(i||ed)(t,e,r);var a=e.parentNode;if(a&&a.removeChild(e),e.nodeType===ke){var n=e.firstChild;if(n==null)return e;var o=e.lastChild}else n=o=e;var s=r?r.previousSibling:t.lastChild;n.previousSibling=s,o.nextSibling=r,s?s.nextSibling=n:t.firstChild=n,r==null?t.lastChild=o:r.previousSibling=o;do n.parentNode=t;while(n!==o&&(n=n.nextSibling));return lo(t.ownerDocument||t,t,e),e.nodeType==ke&&(e.firstChild=e.lastChild=null),e}Oe.prototype={implementation:null,nodeName:"#document",nodeType:ii,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType===ke){for(var r=t.firstChild;r;){var i=r.nextSibling;this.insertBefore(r,e),r=i}return t}return zi(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===le&&(this.documentElement=t),t},removeChild:function(t){var e=co(this,t);return e===this.documentElement&&(this.documentElement=null),e},replaceChild:function(t,e){zi(this,t,e,mo),t.ownerDocument=this,e&&this.removeChild(e),Ce(t)&&(this.documentElement=t)},importNode:function(t,e){return vo(this,t,e)},getElementById:function(t){var e=null;return Ur(this.documentElement,function(r){if(r.nodeType==le&&r.getAttribute("id")==t)return e=r,!0}),e},createElement:function(t){var e=new Pe(Gt);e.ownerDocument=this,this.type==="html"&&(t=t.toLowerCase()),z2(this.contentType)&&(e.namespaceURI=Me.HTML),e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Lt;var r=e.attributes=new gr;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new mi(Gt);return t.ownerDocument=this,t.childNodes=new Lt,t},createTextNode:function(t){var e=new di(Gt);return e.ownerDocument=this,e.childNodes=new Lt,e.appendData(t),e},createComment:function(t){var e=new Yi(Gt);return e.ownerDocument=this,e.childNodes=new Lt,e.appendData(t),e},createCDATASection:function(t){var e=new Qi(Gt);return e.ownerDocument=this,e.childNodes=new Lt,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new ta(Gt);return r.ownerDocument=this,r.childNodes=new Lt,r.nodeName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){if(!ve.QName_exact.test(t))throw new et(et.INVALID_CHARACTER_ERR,'invalid character in name "'+t+'"');return this.type==="html"&&(t=t.toLowerCase()),this._createAttribute(t)},_createAttribute:function(t){var e=new qe(Gt);return e.ownerDocument=this,e.childNodes=new Lt,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){if(!ve.Name.test(t))throw new et(et.INVALID_CHARACTER_ERR,'not a valid xml name "'+t+'"');if(this.type==="html")throw new et("document is an html document",G2.NotSupportedError);var e=new Ji(Gt);return e.ownerDocument=this,e.childNodes=new Lt,e.nodeName=t,e},createElementNS:function(t,e){var r=_a(t,e),i=new Pe(Gt),a=i.attributes=new gr;return i.childNodes=new Lt,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=r[0],i.prefix=r[1],i.localName=r[2],a._ownerElement=i,i},createAttributeNS:function(t,e){var r=_a(t,e),i=new qe(Gt);return i.ownerDocument=this,i.childNodes=new Lt,i.nodeName=e,i.name=e,i.specified=!0,i.namespaceURI=r[0],i.prefix=r[1],i.localName=r[2],i}};te(Oe,dt);function Pe(t){Jt(t),this._nsMap=Object.create(null)}Pe.prototype={nodeType:le,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===Me.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(t){return!!this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e?e.value:null},getAttributeNode:function(t){return this._isInHTMLDocumentAndNamespace()&&(t=t.toLowerCase()),this.attributes.getNamedItem(t)},setAttribute:function(t,e){this._isInHTMLDocumentAndNamespace()&&(t=t.toLowerCase());var r=this.getAttributeNode(t);r?r.value=r.nodeValue=""+e:(r=this.ownerDocument._createAttribute(t),r.value=r.nodeValue=""+e,this.setAttributeNode(r))},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r?r.value:null},setAttributeNS:function(t,e,r){var i=_a(t,e),a=i[2],n=this.getAttributeNodeNS(t,a);n?n.value=n.nodeValue=""+r:(n=this.ownerDocument.createAttributeNS(t,e),n.value=n.nodeValue=""+r,this.setAttributeNode(n))},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByClassName:function(t){var e=Rn(t);return new Le(this,function(r){var i=[];return e.length>0&&Ur(r,function(a){if(a!==r&&a.nodeType===le){var n=a.getAttribute("class");if(n){var o=t===n;if(!o){var s=Rn(n);o=e.every(W2(s))}o&&i.push(a)}}}),i})},getElementsByTagName:function(t){var e=(this.nodeType===ii?this:this.ownerDocument).type==="html",r=t.toLowerCase();return new Le(this,function(i){var a=[];return Ur(i,function(n){if(!(n===i||n.nodeType!==le))if(t==="*")a.push(n);else{var o=n.getQualifiedName(),s=e&&n.namespaceURI===Me.HTML?r:t;o===s&&a.push(n)}}),a})},getElementsByTagNameNS:function(t,e){return new Le(this,function(r){var i=[];return Ur(r,function(a){a!==r&&a.nodeType===le&&(t==="*"||a.namespaceURI===t)&&(e==="*"||a.localName==e)&&i.push(a)}),i})}};Oe.prototype.getElementsByClassName=Pe.prototype.getElementsByClassName;Oe.prototype.getElementsByTagName=Pe.prototype.getElementsByTagName;Oe.prototype.getElementsByTagNameNS=Pe.prototype.getElementsByTagNameNS;te(Pe,dt);function qe(t){Jt(t),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}qe.prototype.nodeType=pr;te(qe,dt);function br(t){Jt(t)}br.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var i=this.data.substring(0,t),a=this.data.substring(t+e);r=i+r+a,this.nodeValue=this.data=r,this.length=r.length}};te(br,dt);function di(t){Jt(t)}di.prototype={nodeName:"#text",nodeType:Fi,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};te(di,br);function Yi(t){Jt(t)}Yi.prototype={nodeName:"#comment",nodeType:io};te(Yi,br);function Qi(t){Jt(t)}Qi.prototype={nodeName:"#cdata-section",nodeType:to};te(Qi,di);function Ki(t){Jt(t)}Ki.prototype.nodeType=ao;te(Ki,dt);function qa(t){Jt(t)}qa.prototype.nodeType=X2;te(qa,dt);function Ga(t){Jt(t)}Ga.prototype.nodeType=Z2;te(Ga,dt);function Ji(t){Jt(t)}Ji.prototype.nodeType=eo;te(Ji,dt);function mi(t){Jt(t)}mi.prototype.nodeName="#document-fragment";mi.prototype.nodeType=ke;te(mi,dt);function ta(t){Jt(t)}ta.prototype.nodeType=ro;te(ta,br);function po(){}po.prototype.serializeToString=function(t,e){return go.call(t,e)};dt.prototype.toString=go;function go(t){var e=[],r=this.nodeType===ii&&this.documentElement||this,i=r.prefix,a=r.namespaceURI;if(a&&i==null){var i=r.lookupPrefix(a);if(i==null)var n=[{namespace:a,prefix:null}]}return ir(this,e,t,n),e.join("")}function zn(t,e,r){var i=t.prefix||"",a=t.namespaceURI;if(!a||i==="xml"&&a===Me.XML||a===Me.XMLNS)return!1;for(var n=r.length;n--;){var o=r[n];if(o.prefix===i)return o.namespace!==a}return!0}function la(t,e,r){t.push(" ",e,'="',r.replace(/[<>&"\t\n\r]/g,uo),'"')}function ir(t,e,r,i){i||(i=[]);var a=t.nodeType===ii?t:t.ownerDocument,n=a.type==="html";if(r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case le:var o=t.attributes,s=o.length,M=t.firstChild,u=t.tagName,h=u;if(!n&&!t.prefix&&t.namespaceURI){for(var d,l=0;l<o.length;l++)if(o.item(l).name==="xmlns"){d=o.item(l).value;break}if(!d)for(var f=i.length-1;f>=0;f--){var c=i[f];if(c.prefix===""&&c.namespace===t.namespaceURI){d=c.namespace;break}}if(d!==t.namespaceURI)for(var f=i.length-1;f>=0;f--){var c=i[f];if(c.namespace===t.namespaceURI){c.prefix&&(h=c.prefix+":"+u);break}}}e.push("<",h);for(var g=0;g<s;g++){var p=o.item(g);p.prefix=="xmlns"?i.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&i.push({prefix:"",namespace:p.value})}for(var g=0;g<s;g++){var p=o.item(g);if(zn(p,n,i)){var _=p.prefix||"",y=p.namespaceURI;la(e,_?"xmlns:"+_:"xmlns",y),i.push({prefix:_,namespace:y})}ir(p,e,r,i)}if(u===h&&zn(t,n,i)){var _=t.prefix||"",y=t.namespaceURI;la(e,_?"xmlns:"+_:"xmlns",y),i.push({prefix:_,namespace:y})}var E=!M;if(E&&(n||t.namespaceURI===Me.HTML)&&(E=q2(u)),E)e.push("/>");else{if(e.push(">"),n&&U2(u))for(;M;)M.data?e.push(M.data):ir(M,e,r,i.slice()),M=M.nextSibling;else for(;M;)ir(M,e,r,i.slice()),M=M.nextSibling;e.push("</",h,">")}return;case ii:case ke:for(var M=t.firstChild;M;)ir(M,e,r,i.slice()),M=M.nextSibling;return;case pr:return la(e,t.name,t.value);case Fi:return e.push(t.data.replace(/[<&>]/g,uo));case to:return e.push(ve.CDATA_START,t.data,ve.CDATA_END);case io:return e.push(ve.COMMENT_START,t.data,ve.COMMENT_END);case ao:var C=t.publicId,w=t.systemId;e.push(ve.DOCTYPE_DECL_START," ",t.name),C?(e.push(" ",ve.PUBLIC," ",C),w&&w!=="."&&e.push(" ",w)):w&&w!=="."&&e.push(" ",ve.SYSTEM," ",w),t.internalSubset&&e.push(" [",t.internalSubset,"]"),e.push(">");return;case ro:return e.push("<?",t.target," ",t.data,"?>");case eo:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function vo(t,e,r){var i;switch(e.nodeType){case le:i=e.cloneNode(!1),i.ownerDocument=t;case ke:break;case pr:r=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=t,i.parentNode=null,r)for(var a=e.firstChild;a;)i.appendChild(vo(t,a,r)),a=a.nextSibling;return i}function ya(t,e,r){var i=new e.constructor(Gt);for(var a in e)if(mr(e,a)){var n=e[a];typeof n!="object"&&n!=i[a]&&(i[a]=n)}switch(e.childNodes&&(i.childNodes=new Lt),i.ownerDocument=t,i.nodeType){case le:var o=e.attributes,s=i.attributes=new gr,u=o.length;s._ownerElement=i;for(var h=0;h<u;h++)i.setAttributeNode(ya(t,o.item(h),!0));break;case pr:r=!0}if(r)for(var d=e.firstChild;d;)i.appendChild(ya(t,d,r)),d=d.nextSibling;return i}function _o(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case le:case ke:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};Object.defineProperty(Le.prototype,"length",{get:function(){return Xi(this),this.$$length}}),Object.defineProperty(dt.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case le:case ke:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),_o=function(e,r,i){e["$$"+r]=i}}}catch{}Bt._updateLiveList=Xi;Bt.Attr=qe;Bt.CDATASection=Qi;Bt.CharacterData=br;Bt.Comment=Yi;Bt.Document=Oe;Bt.DocumentFragment=mi;Bt.DocumentType=Ki;Bt.DOMImplementation=oo;Bt.Element=Pe;Bt.Entity=Ga;Bt.EntityReference=Ji;Bt.LiveNodeList=Le;Bt.NamedNodeMap=gr;Bt.Node=dt;Bt.NodeList=Lt;Bt.Notation=qa;Bt.Text=di;Bt.ProcessingInstruction=ta;Bt.XMLSerializer=po;var Mr={},yo={};(function(t){var e=St.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(yo);var ea={},wr=St,st=ht,Eo=je,rd=wr.isHTMLEscapableRawTextElement,id=wr.isHTMLMimeType,ad=wr.isHTMLRawTextElement,ai=wr.hasOwn,$n=wr.NAMESPACE,Un=Eo.ParseError,nd=Eo.DOMException,Tr=0,Ne=1,Ve=2,Sr=3,We=4,Ze=5,Ir=6,Mi=7;function bo(){}bo.prototype={parse:function(t,e,r){var i=this.domBuilder;i.startDocument(),Mo(e,e=Object.create(null)),sd(t,e,r,i,this.errorHandler),i.endDocument()}};var ja=/&#?\w+;?/g;function sd(t,e,r,i,a){var n=id(i.mimeType);t.indexOf(st.UNICODE_REPLACEMENT_CHARACTER)>=0&&a.warning("Unicode replacement character detected, source encoding issues?");function o(F){if(F>65535){F-=65536;var J=55296+(F>>10),R=56320+(F&1023);return String.fromCharCode(J,R)}else return String.fromCharCode(F)}function s(F){var J=F[F.length-1]===";"?F:F+";";if(!n&&J!==F)return a.error("EntityRef: expecting ;"),F;var R=st.Reference.exec(J);if(!R||R[0].length!==J.length)return a.error("entity not matching Reference production: "+F),F;var I=J.slice(1,-1);return ai(r,I)?r[I]:I.charAt(0)==="#"?o(parseInt(I.substring(1).replace("x","0x"))):(a.error("entity not found:"+F),F)}function u(F){if(F>_){var J=t.substring(_,F).replace(ja,s);f&&c(_),i.characters(J,0,F-_),_=F}}var h=0,d=0,l=/\r\n?|\n|$/g,f=i.locator;function c(F,J){for(;F>=d&&(J=l.exec(t));)h=d,d=J.index+J[0].length,f.lineNumber++;f.columnNumber=F-h+1}for(var g=[{currentNSMap:e}],p=[],_=0;;){try{var y=t.indexOf("<",_);if(y<0){if(!n&&p.length>0)return a.fatalError("unclosed xml tag(s): "+p.join(", "));if(!t.substring(_).match(/^\s*$/)){var E=i.doc,M=E.createTextNode(t.substring(_));if(E.documentElement)return a.error("Extra content at the end of the document");E.appendChild(M),i.currentElement=M}return}if(y>_){var C=t.substring(_,y);!n&&p.length===0&&(C=C.replace(new RegExp(st.S_OPT.source,"g"),""),C&&a.error("Unexpected content outside root element: '"+C+"'")),u(y)}switch(t.charAt(y+1)){case"/":var v=t.indexOf(">",y+2),w=t.substring(y+2,v>0?v:void 0);if(!w)return a.fatalError("end tag name missing");var T=v>0&&st.reg("^",st.QName_group,st.S_OPT,"$").exec(w);if(!T)return a.fatalError('end tag name contains invalid characters: "'+w+'"');if(!i.currentElement&&!i.doc.documentElement)return;var N=p[p.length-1]||i.currentElement.tagName||i.doc.documentElement.tagName||"";if(N!==T[1]){var O=T[1].toLowerCase();if(!n||N.toLowerCase()!==O)return a.fatalError('Opening and ending tag mismatch: "'+N+'" != "'+w+'"')}var k=g.pop();p.pop();var L=k.localNSMap;if(i.endElement(k.uri,k.localName,N),L)for(var H in L)ai(L,H)&&i.endPrefixMapping(H);v++;break;case"?":f&&c(y),v=ld(t,y,i,a);break;case"!":f&&c(y),v=Ao(t,y,i,a,n);break;default:f&&c(y);var D=new Do,P=g[g.length-1].currentNSMap,v=od(t,y,D,P,s,a,n),z=D.length;if(D.closed||(n&&wr.isHTMLVoidElement(D.tagName)?D.closed=!0:p.push(D.tagName)),f&&z){for(var rt=qn(f,{}),G=0;G<z;G++){var ot=D[G];c(ot.offset),ot.locator=qn(f,{})}i.locator=rt,Gn(D,i,P)&&g.push(D),i.locator=f}else Gn(D,i,P)&&g.push(D);n&&!D.closed?v=ud(t,v,D.tagName,s,i):v++}}catch(F){if(F instanceof Un)throw F;if(F instanceof nd)throw new Un(F.name+": "+F.message,i.locator,F);a.error("element parse error: "+F),v=-1}v>_?_=v:u(Math.max(y,_)+1)}}function qn(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function od(t,e,r,i,a,n,o){function s(c,g,p){if(ai(r.attributeNames,c))return n.fatalError("Attribute "+c+" redefined");if(!o&&g.indexOf("<")>=0)return n.fatalError("Unescaped '<' not allowed in attributes values");r.addValue(c,g.replace(/[\t\n\r]/g," ").replace(ja,a),p)}for(var u,h,d=++e,l=Tr;;){var f=t.charAt(d);switch(f){case"=":if(l===Ne)u=t.slice(e,d),l=Sr;else if(l===Ve)l=Sr;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(l===Sr||l===Ne)if(l===Ne&&(n.warning('attribute value must after "="'),u=t.slice(e,d)),e=d+1,d=t.indexOf(f,e),d>0)h=t.slice(e,d),s(u,h,e-1),l=Ze;else throw new Error("attribute value no end '"+f+"' match");else if(l==We)h=t.slice(e,d),s(u,h,e),n.warning('attribute "'+u+'" missed start quot('+f+")!!"),e=d+1,l=Ze;else throw new Error('attribute value must after "="');break;case"/":switch(l){case Tr:r.setTagName(t.slice(e,d));case Ze:case Ir:case Mi:l=Mi,r.closed=!0;case We:case Ne:break;case Ve:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),l==Tr&&r.setTagName(t.slice(e,d)),d;case">":switch(l){case Tr:r.setTagName(t.slice(e,d));case Ze:case Ir:case Mi:break;case We:case Ne:h=t.slice(e,d),h.slice(-1)==="/"&&(r.closed=!0,h=h.slice(0,-1));case Ve:l===Ve&&(h=u),l==We?(n.warning('attribute "'+h+'" missed quot(")!'),s(u,h,e)):(o||n.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),s(h,h,e));break;case Sr:if(!o)return n.fatalError(`AttValue: ' or " expected`)}return d;case"":f=" ";default:if(f<=" ")switch(l){case Tr:r.setTagName(t.slice(e,d)),l=Ir;break;case Ne:u=t.slice(e,d),l=Ve;break;case We:var h=t.slice(e,d);n.warning('attribute "'+h+'" missed quot(")!!'),s(u,h,e);case Ze:l=Ir;break}else switch(l){case Ve:o||n.warning('attribute "'+u+'" missed value!! "'+u+'" instead2!!'),s(u,u,e),e=d,l=Ne;break;case Ze:n.warning('attribute space is required"'+u+'"!!');case Ir:l=Ne,e=d;break;case Sr:l=We,e=d;break;case Mi:throw new Error("elements closed character '/' and '>' must be connected to")}}d++}}function Gn(t,e,r){for(var i=t.tagName,a=null,l=t.length;l--;){var n=t[l],o=n.qName,s=n.value,f=o.indexOf(":");if(f>0)var u=n.prefix=o.slice(0,f),h=o.slice(f+1),d=u==="xmlns"&&h;else h=o,u=null,d=o==="xmlns"&&"";n.localName=h,d!==!1&&(a==null&&(a=Object.create(null),Mo(r,r=Object.create(null))),r[d]=a[d]=s,n.uri=$n.XMLNS,e.startPrefixMapping(d,s))}for(var l=t.length;l--;)n=t[l],n.prefix&&(n.prefix==="xml"&&(n.uri=$n.XML),n.prefix!=="xmlns"&&(n.uri=r[n.prefix]));var f=i.indexOf(":");f>0?(u=t.prefix=i.slice(0,f),h=t.localName=i.slice(f+1)):(u=null,h=t.localName=i);var c=t.uri=r[u||""];if(e.startElement(c,h,i,t),t.closed){if(e.endElement(c,h,i),a)for(u in a)ai(a,u)&&e.endPrefixMapping(u)}else return t.currentNSMap=r,t.localNSMap=a,!0}function ud(t,e,r,i,a){var n=rd(r);if(n||ad(r)){var o=t.indexOf("</"+r+">",e),s=t.substring(e+1,o);return n&&(s=s.replace(ja,i)),a.characters(s,0,s.length),o}return e+1}function Mo(t,e){for(var r in t)ai(t,r)&&(e[r]=t[r])}function wo(t,e){var r=e;function i(d){return d=d||0,t.charAt(r+d)}function a(d){d=d||1,r+=d}function n(){for(var d=0;r<t.length;){var l=i();if(l!==" "&&l!==`
`&&l!=="	"&&l!=="\r")return d;d++,a()}return-1}function o(){return t.substring(r)}function s(d){return t.substring(r,r+d.length)===d}function u(d){return t.substring(r,r+d.length).toUpperCase()===d.toUpperCase()}function h(d){var l=st.reg("^",d),f=l.exec(o());return f?(a(f[0].length),f[0]):null}return{char:i,getIndex:function(){return r},getMatch:h,getSource:function(){return t},skip:a,skipBlanks:n,substringFromIndex:o,substringStartsWith:s,substringStartsWithCaseInsensitive:u}}function hd(t,e){function r(s,u){var h=st.PI.exec(s.substringFromIndex());return h?h[1].toLowerCase()==="xml"?u.fatalError("xml declaration is only allowed at the start of the document, but found at position "+s.getIndex()):(s.skip(h[0].length),h[0]):u.fatalError("processing instruction is not well-formed at position "+s.getIndex())}var i=t.getSource();if(t.char()==="["){t.skip(1);for(var a=t.getIndex();t.getIndex()<i.length;){if(t.skipBlanks(),t.char()==="]"){var n=i.substring(a,t.getIndex());return t.skip(1),n}var o=null;if(t.char()==="<"&&t.char(1)==="!")switch(t.char(2)){case"E":t.char(3)==="L"?o=t.getMatch(st.elementdecl):t.char(3)==="N"&&(o=t.getMatch(st.EntityDecl));break;case"A":o=t.getMatch(st.AttlistDecl);break;case"N":o=t.getMatch(st.NotationDecl);break;case"-":o=t.getMatch(st.Comment);break}else if(t.char()==="<"&&t.char(1)==="?")o=r(t,e);else if(t.char()==="%")o=t.getMatch(st.PEReference);else return e.fatalError("Error detected in Markup declaration");if(!o)return e.fatalError("Error in internal subset at position "+t.getIndex())}return e.fatalError("doctype internal subset is not well-formed, missing ]")}}function Ao(t,e,r,i,a){var n=wo(t,e);switch(a?n.char(2).toUpperCase():n.char(2)){case"-":var o=n.getMatch(st.Comment);return o?(r.comment(o,st.COMMENT_START.length,o.length-st.COMMENT_START.length-st.COMMENT_END.length),n.getIndex()):i.fatalError("comment is not well-formed at position "+n.getIndex());case"[":var s=n.getMatch(st.CDSect);return s?!a&&!r.currentElement?i.fatalError("CDATA outside of element"):(r.startCDATA(),r.characters(s,st.CDATA_START.length,s.length-st.CDATA_START.length-st.CDATA_END.length),r.endCDATA(),n.getIndex()):i.fatalError("Invalid CDATA starting at position "+e);case"D":{if(r.doc&&r.doc.documentElement)return i.fatalError("Doctype not allowed inside or after documentElement at position "+n.getIndex());if(a?!n.substringStartsWithCaseInsensitive(st.DOCTYPE_DECL_START):!n.substringStartsWith(st.DOCTYPE_DECL_START))return i.fatalError("Expected "+st.DOCTYPE_DECL_START+" at position "+n.getIndex());if(n.skip(st.DOCTYPE_DECL_START.length),n.skipBlanks()<1)return i.fatalError("Expected whitespace after "+st.DOCTYPE_DECL_START+" at position "+n.getIndex());var u={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(u.name=n.getMatch(st.Name),!u.name)return i.fatalError("doctype name missing or contains unexpected characters at position "+n.getIndex());if(a&&u.name.toLowerCase()!=="html"&&i.warning("Unexpected DOCTYPE in HTML document at position "+n.getIndex()),n.skipBlanks(),n.substringStartsWith(st.PUBLIC)||n.substringStartsWith(st.SYSTEM)){var h=st.ExternalID_match.exec(n.substringFromIndex());if(!h)return i.fatalError("doctype external id is not well-formed at position "+n.getIndex());h.groups.SystemLiteralOnly!==void 0?u.systemId=h.groups.SystemLiteralOnly:(u.systemId=h.groups.SystemLiteral,u.publicId=h.groups.PubidLiteral),n.skip(h[0].length)}else if(a&&n.substringStartsWithCaseInsensitive(st.SYSTEM)){if(n.skip(st.SYSTEM.length),n.skipBlanks()<1)return i.fatalError("Expected whitespace after "+st.SYSTEM+" at position "+n.getIndex());if(u.systemId=n.getMatch(st.ABOUT_LEGACY_COMPAT_SystemLiteral),!u.systemId)return i.fatalError("Expected "+st.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+st.SYSTEM+" at position "+n.getIndex())}return a&&u.systemId&&!st.ABOUT_LEGACY_COMPAT_SystemLiteral.test(u.systemId)&&i.warning("Unexpected doctype.systemId in HTML document at position "+n.getIndex()),a||(n.skipBlanks(),u.internalSubset=hd(n,i)),n.skipBlanks(),n.char()!==">"?i.fatalError("doctype not terminated with > at position "+n.getIndex()):(n.skip(1),r.startDTD(u.name,u.publicId,u.systemId,u.internalSubset),r.endDTD(),n.getIndex())}default:return i.fatalError('Not well-formed XML starting with "<!" at position '+e)}}function ld(t,e,r,i){var a=t.substring(e).match(st.PI);if(!a)return i.fatalError("Invalid processing instruction starting at position "+e);if(a[1].toLowerCase()==="xml"){if(e>0)return i.fatalError("processing instruction at position "+e+" is an xml declaration which is only at the start of the document");if(!st.XMLDecl.test(t.substring(e)))return i.fatalError("xml declaration is not well-formed")}return r.processingInstruction(a[1],a[2]),e+a[0].length}function Do(){this.attributeNames=Object.create(null)}Do.prototype={setTagName:function(t){if(!st.QName_exact.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!st.QName_exact.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};ea.XMLReader=bo;ea.parseUtils=wo;ea.parseDoctypeCommentOrCData=Ao;var He=St,cd=Bt,fd=je,jn=yo,dd=ea,md=cd.DOMImplementation,pd=He.hasDefaultHTMLNamespace,gd=He.isHTMLMimeType,vd=He.isValidMimeType,Co=He.MIME_TYPE,ca=He.NAMESPACE,Hn=fd.ParseError,_d=dd.XMLReader;function xo(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function No(t){if(t=t||{},t.locator===void 0&&(t.locator=!0),this.assign=t.assign||He.assign,this.domHandler=t.domHandler||ra,this.onError=t.onError||t.errorHandler,t.errorHandler&&typeof t.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");t.errorHandler&&t.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=t.normalizeLineEndings||xo,this.locator=!!t.locator,this.xmlns=this.assign(Object.create(null),t.xmlns)}No.prototype.parseFromString=function(t,e){if(!vd(e))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+e+'" is not valid.');var r=this.assign(Object.create(null),this.xmlns),i=jn.XML_ENTITIES,a=r[""]||null;pd(e)?(i=jn.HTML_ENTITIES,a=ca.HTML):e===Co.XML_SVG_IMAGE&&(a=ca.SVG),r[""]=a,r.xml=r.xml||ca.XML;var n=new this.domHandler({mimeType:e,defaultNamespace:a,onError:this.onError}),o=this.locator?{}:void 0;this.locator&&n.setDocumentLocator(o);var s=new _d;s.errorHandler=n,s.domBuilder=n;var u=!He.isHTMLMimeType(e);return u&&typeof t!="string"&&s.errorHandler.fatalError("source is not a string"),s.parse(this.normalizeLineEndings(String(t)),r,i),n.doc.documentElement||s.errorHandler.fatalError("missing root element"),n.doc};function ra(t){var e=t||{};this.mimeType=e.mimeType||Co.XML_APPLICATION,this.defaultNamespace=e.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=e.onError}function Xe(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}ra.prototype={startDocument:function(){var t=new md;this.doc=gd(this.mimeType)?t.createHTMLDocument(!1):t.createDocument(this.defaultNamespace,"")},startElement:function(t,e,r,i){var a=this.doc,n=a.createElementNS(t,r||e),o=i.length;wi(this,n),this.currentElement=n,this.locator&&Xe(this.locator,n);for(var s=0;s<o;s++){var t=i.getURI(s),u=i.getValue(s),r=i.getQName(s),h=a.createAttributeNS(t,r);this.locator&&Xe(i.getLocator(s),h),h.value=h.nodeValue=u,n.setAttributeNode(h)}},endElement:function(t,e,r){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&Xe(this.locator,r),wi(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=Vn.apply(this,arguments),t){if(this.cdata)var i=this.doc.createCDATASection(t);else var i=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(t)&&this.doc.appendChild(i),this.locator&&Xe(this.locator,i)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){t&&(t.lineNumber=0),this.locator=t},comment:function(t,e,r){t=Vn.apply(this,arguments);var i=this.doc.createComment(t);this.locator&&Xe(this.locator,i),wi(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r,i){var a=this.doc.implementation;if(a&&a.createDocumentType){var n=a.createDocumentType(t,e,r,i);this.locator&&Xe(this.locator,n),wi(this,n),this.doc.doctype=n}},reportError:function(t,e){if(typeof this.onError=="function")try{this.onError(t,e,this)}catch(r){throw new Hn("Reporting "+t+' "'+e+'" caused '+r,this.locator)}else console.error("[xmldom "+t+"]	"+e,yd(this.locator))},warning:function(t){this.reportError("warning",t)},error:function(t){this.reportError("error",t)},fatalError:function(t){throw this.reportError("fatalError",t),new Hn(t,this.locator)}};function yd(t){if(t)return`
@#[line:`+t.lineNumber+",col:"+t.columnNumber+"]"}function Vn(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){ra.prototype[t]=function(){return null}});function wi(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}function Ed(t){if(t==="error")throw"onErrorStopParsing"}function bd(){throw"onWarningStopParsing"}Mr.__DOMHandler=ra;Mr.DOMParser=No;Mr.normalizeLineEndings=xo;Mr.onErrorStopParsing=Ed;Mr.onWarningStopParsing=bd;var Ar=St;Ar.assign;Ar.hasDefaultHTMLNamespace;Ar.isHTMLMimeType;Ar.isValidMimeType;Ar.MIME_TYPE;Ar.NAMESPACE;var Md=Mr,To=Md.DOMParser;function we(t,e){return Array.from(t.getElementsByTagName(e))}function $i(t){return t[0]==="#"?t:`#${t}`}function wd(t,e,r){return Array.from(t.getElementsByTagNameNS(r,e))}function ie(t){return t==null||t.normalize(),t&&t.textContent||""}function Ae(t,e,r){const i=t.getElementsByTagName(e),a=i.length?i[0]:null;return a&&r&&r(a),a}function fe(t,e,r){const i={};if(!t)return i;const a=t.getElementsByTagName(e),n=a.length?a[0]:null;return n&&r?r(n,i):i}function vr(t,e,r){const i=ie(Ae(t,e));return i&&r?r(i)||{}:{}}function Ke(t,e,r){const i=parseFloat(ie(Ae(t,e)));if(!isNaN(i))return r&&r(i),i}function So(t,e){const r={};for(const i of e)vr(t,i,a=>{r[i]=a});return r}function Io(t){return(t==null?void 0:t.nodeType)===1}function ko(t,e){const r={},i=e=="stroke"||e==="fill"?e:e+"-color";return t[0]==="#"&&(t=t.substring(1)),t.length===6||t.length===3?r[i]="#"+t:t.length===8&&(r[e+"-opacity"]=parseInt(t.substring(0,2),16)/255,r[i]="#"+t.substring(6,8)+t.substring(4,6)+t.substring(2,4)),r}function Ui(t,e,r){const i={};return Ke(t,e,a=>{i[r]=a}),i}function Ha(t,e){return fe(t,"color",r=>ko(ie(r),e))}function Oo(t){return fe(t,"Icon",(e,r)=>(vr(e,"href",i=>{r.icon=i}),r))}function Ad(t){return fe(t,"IconStyle",e=>Object.assign(Ha(e,"icon"),Ui(e,"scale","icon-scale"),Ui(e,"heading","icon-heading"),fe(e,"hotSpot",r=>{const i=parseFloat(r.getAttribute("x")||""),a=parseFloat(r.getAttribute("y")||""),n=r.getAttribute("xunits")||"",o=r.getAttribute("yunits")||"";return!isNaN(i)&&!isNaN(a)?{"icon-offset":[i,a],"icon-offset-units":[n,o]}:{}}),Oo(e)))}function Dd(t){return fe(t,"LabelStyle",e=>Object.assign(Ha(e,"label"),Ui(e,"scale","label-scale")))}function Cd(t){return fe(t,"LineStyle",e=>Object.assign(Ha(e,"stroke"),Ui(e,"width","stroke-width")))}function xd(t){return fe(t,"PolyStyle",(e,r)=>Object.assign(r,fe(e,"color",i=>ko(ie(i),"fill")),vr(e,"fill",i=>{if(i==="0")return{"fill-opacity":0}}),vr(e,"outline",i=>{if(i==="0")return{"stroke-opacity":0}})))}function Va(t){return Object.assign({},xd(t),Cd(t),Dd(t),Ad(t))}const Ye=t=>Number(t),Ea={string:t=>t,int:Ye,uint:Ye,short:Ye,ushort:Ye,float:Ye,double:Ye,bool:t=>!!t};function Ro(t,e){return fe(t,"ExtendedData",(r,i)=>{for(const a of we(r,"Data"))i[a.getAttribute("name")||""]=ie(Ae(a,"value"));for(const a of we(r,"SimpleData")){const n=a.getAttribute("name")||"",o=e[n]||Ea.string;i[n]=o(ie(a))}return i})}function Po(t){const e=Ae(t,"description");for(const r of Array.from((e==null?void 0:e.childNodes)||[]))if(r.nodeType===4)return{description:{"@type":"html",value:ie(r)}};return{}}function Bo(t){return fe(t,"TimeSpan",e=>({timespan:{begin:ie(Ae(e,"begin")),end:ie(Ae(e,"end"))}}))}function Lo(t){return fe(t,"TimeStamp",e=>({timestamp:ie(Ae(e,"when"))}))}function Fo(t,e){return vr(t,"styleUrl",r=>(r=$i(r),e[r]?Object.assign({styleUrl:r},e[r]):{styleUrl:r}))}const Nd=/\s*/g,Td=/^\s*|\s*$/g,Sd=/\s+/;function zo(t){return t.replace(Nd,"").split(",").map(parseFloat).filter(e=>!isNaN(e)).slice(0,3)}function ba(t){return t.replace(Td,"").split(Sd).map(zo).filter(e=>e.length>=2)}function Id(t){let e=we(t,"coord");e.length===0&&(e=wd(t,"coord","*"));const r=e.map(i=>ie(i).split(" ").map(parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:we(t,"when").map(i=>ie(i))}}function $o(t){if(t.length===0)return t;const e=t[0],r=t[t.length-1];let i=!0;for(let a=0;a<Math.max(e.length,r.length);a++)if(e[a]!==r[a]){i=!1;break}return i?t:t.concat([t[0]])}function Ni(t){return ie(Ae(t,"coordinates"))}function Uo(t){let e=[],r=[];for(let i=0;i<t.childNodes.length;i++){const a=t.childNodes.item(i);if(Io(a))switch(a.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const n=Uo(a);e=e.concat(n.geometries),r=r.concat(n.coordTimes);break}case"Point":{const n=zo(Ni(a));n.length>=2&&e.push({type:"Point",coordinates:n});break}case"LinearRing":case"LineString":{const n=ba(Ni(a));n.length>=2&&e.push({type:"LineString",coordinates:n});break}case"Polygon":{const n=[];for(const o of we(a,"LinearRing")){const s=$o(ba(Ni(o)));s.length>=4&&n.push(s)}n.length&&e.push({type:"Polygon",coordinates:n});break}case"Track":case"gx:Track":{const n=Id(a);if(!n)break;const{times:o,geometry:s}=n;e.push(s),o.length&&r.push(o);break}}}return{geometries:e,coordTimes:r}}function kd(t){return t.length===0?null:t.length===1?t[0]:{type:"GeometryCollection",geometries:t}}function Od(t,e,r,i){var h;const{coordTimes:a,geometries:n}=Uo(t),o=kd(n);if(!o&&i.skipNullGeometry)return null;const s={type:"Feature",geometry:o,properties:Object.assign(So(t,["name","address","visibility","open","phoneNumber","description"]),Po(t),Fo(t,e),Va(t),Ro(t,r),Bo(t),Lo(t),a.length?{coordinateProperties:{times:a.length===1?a[0]:a}}:{})};((h=s.properties)==null?void 0:h.visibility)!==void 0&&(s.properties.visibility=s.properties.visibility!=="0");const u=t.getAttribute("id");return u!==null&&u!==""&&(s.id=u),s}function Rd(t){return Ae(t,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[$o(ba(Ni(t)))]}}:Ld(t)}const Pd=Math.PI/180;function Bd(t,e,r){const i=[(t[0]+t[2])/2,(t[1]+t[3])/2];return[e[0].map(a=>{const n=a[1]-i[1],o=a[0]-i[0],s=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),u=Math.atan2(n,o)+r*Pd;return[i[0]+Math.cos(u)*s,i[1]+Math.sin(u)*s]})]}function Ld(t){const e=Ae(t,"LatLonBox");if(e){const r=Ke(e,"north"),i=Ke(e,"west"),a=Ke(e,"east"),n=Ke(e,"south"),o=Ke(e,"rotation");if(typeof r=="number"&&typeof n=="number"&&typeof i=="number"&&typeof a=="number"){const s=[i,n,a,r];let u=[[[i,r],[a,r],[a,n],[i,n],[i,r]]];return typeof o=="number"&&(u=Bd(s,u,o)),{bbox:s,geometry:{type:"Polygon",coordinates:u}}}}return null}function Fd(t,e,r,i){var u;const a=Rd(t),n=(a==null?void 0:a.geometry)||null;if(!n&&i.skipNullGeometry)return null;const o={type:"Feature",geometry:n,properties:Object.assign({"@geometry-type":"groundoverlay"},So(t,["name","address","visibility","open","phoneNumber","description"]),Po(t),Fo(t,e),Va(t),Oo(t),Ro(t,r),Bo(t),Lo(t))};a!=null&&a.bbox&&(o.bbox=a.bbox),((u=o.properties)==null?void 0:u.visibility)!==void 0&&(o.properties.visibility=o.properties.visibility!=="0");const s=t.getAttribute("id");return s!==null&&s!==""&&(o.id=s),o}function zd(t){let e=t.getAttribute("id");const r=t.parentNode;return!e&&Io(r)&&r.localName==="CascadingStyle"&&(e=r.getAttribute("kml:id")||r.getAttribute("id")),$i(e||"")}function $d(t){const e={};for(const r of we(t,"Style"))e[zd(r)]=Va(r);for(const r of we(t,"StyleMap")){const i=$i(r.getAttribute("id")||"");vr(r,"styleUrl",a=>{a=$i(a),e[a]&&(e[i]=e[a])})}return e}function Ud(t){const e={};for(const r of we(t,"SimpleField"))e[r.getAttribute("name")||""]=Ea[r.getAttribute("type")||""]||Ea.string;return e}function*qd(t,e={skipNullGeometry:!1}){const r=$d(t),i=Ud(t);for(const a of we(t,"Placemark")){const n=Od(a,r,i,e);n&&(yield n)}for(const a of we(t,"GroundOverlay")){const n=Fd(a,r,i,e);n&&(yield n)}}function Gd(t,e={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(qd(t,e))}}async function qo(t){try{console.log("Processing KML file...");const r=new TextDecoder("utf-8").decode(new Uint8Array(t)),i=new To().parseFromString(r,"text/xml"),n=Gd(i).features.map((o,s)=>{const u=o.properties;return{name:Wa(u)||`ImportPaddock${s+1}`,properties:u,boundary:o.geometry}}).filter(o=>o.boundary!==null);return n.length===0?{status:"error",message:"No valid paddocks found with boundary data in KML file."}:{status:"success",message:`Found ${n.length} valid paddock${n.length!==1?"s":""} in KML file.`,paddocks:n,geojson:{type:"FeatureCollection",features:n.map(o=>({type:"Feature",properties:{...o.properties,name:o.name},geometry:o.boundary}))}}}catch(e){return console.error("KML processing error:",e),{status:"error",message:"Error processing the KML file."}}}async function jd(t,e){try{console.log("Processing shapefile with shpjs...");const r=[];let i;if(t&&e)console.log("Processing with both SHP and DBF data"),i=await ga({shp:t,dbf:e});else if(t)console.log("Processing with SHP data only"),i=await ga(t);else throw new Error("Invalid shapefile data");return console.log("Shapefile parsed to GeoJSON:",i),(i.type==="FeatureCollection"?i.features:[i]).forEach((n,o)=>{if(n.geometry){const s=n.properties||{},u=Wa(s)||`ImportPaddock${o+1}`;r.push({name:u,properties:s,boundary:n.geometry})}}),r.length===0?{status:"error",message:"No valid paddocks found with boundary data in shapefile."}:{status:"success",message:`Found ${r.length} valid paddock${r.length!==1?"s":""} in shapefile.`,paddocks:r,geojson:{type:"FeatureCollection",features:r.map(n=>({type:"Feature",properties:{...n.properties,name:n.name},geometry:n.boundary}))}}}catch(r){return console.error("Shapefile processing error:",r),{status:"error",message:`Error processing the shapefile: ${r.message}`}}}async function Hd(t){try{console.log("Processing ZIP file...");try{console.log("Attempting to use shpjs directly on ZIP...");const u=await ga(t);console.log("SHP.js successfully processed the ZIP");const h=[];if((u.type==="FeatureCollection"?u.features:[u]).forEach((l,f)=>{if(l.geometry){const c=l.properties||{},g=Wa(c)||`ImportPaddock${f+1}`;h.push({name:g,properties:c,boundary:l.geometry})}}),h.length>0)return{status:"success",message:`Found ${h.length} valid paddock${h.length!==1?"s":""} in shapefile.`,paddocks:h,geojson:{type:"FeatureCollection",features:h.map(l=>({type:"Feature",properties:{...l.properties,name:l.name},geometry:l.boundary}))}}}catch(u){console.log("Direct shpjs processing failed, falling back to manual extraction:",u)}const r=await new mu().loadAsync(t);console.log("ZIP loaded, files:",Object.keys(r.files));const i=Object.keys(r.files),a=i.find(u=>u.toLowerCase().endsWith(".shp")),n=i.find(u=>u.toLowerCase().endsWith(".dbf"));if(a){console.log("Found shapefile components");const u=await r.file(a).async("arraybuffer"),h=n?await r.file(n).async("arraybuffer"):null;return jd(u,h)}const o=i.find(u=>u.toLowerCase().endsWith(".kml"));if(o){console.log("Found KML file in ZIP");const u=await r.file(o).async("arraybuffer");return qo(u)}const s=i.find(u=>u.toLowerCase().endsWith(".xml"));if(s){console.log("Found XML file in ZIP");const u=await r.file(s).async("text");return Go(u)}return console.log("No valid files found in ZIP"),{status:"error",message:"No valid data files found in the zip archive."}}catch(e){return console.error("ZIP processing error:",e),{status:"error",message:`Error processing the zip file: ${e.message}`}}}function Go(t){try{console.log("Processing ISOXML file...");const r=new To().parseFromString(t,"text/xml");if(!r.getElementsByTagName("ISO11783_TaskData")[0])return{status:"error",message:"Not a valid ISOXML file."};const a=[];let n=0;const o=r.getElementsByTagName("CTR")[0],s=o?o.getAttribute("B"):"Unknown Client",u=r.getElementsByTagName("FRM"),h=new Map;for(let f=0;f<u.length;f++){const c=u[f],g=c.getAttribute("A"),p=c.getAttribute("B");h.set(g,p)}const d=r.getElementsByTagName("PFD");for(let f=0;f<d.length;f++){const c=d[f],g=c.getAttribute("A"),p=c.getAttribute("C")||`ImportPaddock${f+1}`,_=c.getAttribute("D"),y=c.getAttribute("F"),E=h.get(y)||"Unknown Farm",M=c.getElementsByTagName("PLN");let C=[];for(let w=0;w<M.length;w++){const N=M[w].getElementsByTagName("LSG");let O=[];for(let k=0;k<N.length;k++){const L=N[k],H=L.getAttribute("A"),D=L.getElementsByTagName("PNT"),P=[];for(let v=0;v<D.length;v++){const z=D[v],rt=parseFloat(z.getAttribute("C")),G=parseFloat(z.getAttribute("D"));P.push([G,rt])}P.push(P[0]),H==="1"?O.unshift(P):H==="2"&&(O.push(P),n++)}O.length>0&&C.push(O)}if(C.length>0){const w={name:p,properties:{id:g,area:_,farmId:y,client:s,farm:E},boundary:{type:C.length>1?"MultiPolygon":"Polygon",coordinates:C.length>1?C:C[0]}};a.push(w)}}if(a.length===0)return{status:"error",message:"No valid paddocks found with boundary data in ISOXML file."};const l={type:"FeatureCollection",features:a.map(f=>({type:"Feature",properties:{...f.properties,name:f.name},geometry:f.boundary}))};return{status:"success",message:`Found ${a.length} valid paddock${a.length!==1?"s":""} in ISOXML file with a total of ${n} exclusion${n!==1?"s":""}.`,paddocks:a,geojson:l}}catch(e){return console.error("ISOXML processing error:",e),{status:"error",message:"Error processing the ISOXML file."}}}function Wa(t){const e=["name","NAME","Name","PaddockName","PADDOCK_NAME","paddock_name","PADDOCKNAME","FIELD_NAME"];for(const r of e)if(t[r])return t[r];return null}const Vd={async processFile(t){var e;try{console.log("Starting processing of file:",t);const{data:r}=await tn.auth.getSession();if(!((e=r==null?void 0:r.session)!=null&&e.user))throw new Error("Not authenticated");const i=r.session.user.id;if(!t)throw new Error("File name is required");const a=`user_${i}/${t}`;console.log("File path:",a),console.log("Downloading file from Supabase...");const{data:n,error:o}=await tn.storage.from("user_files_bucket").download(a);if(o)throw console.error("Download error:",o),new Error(`Download error: ${o.message}`);if(!n)throw console.error("No data received from download"),new Error("File not found");console.log("File downloaded successfully, size:",n.size);const s=await n.arrayBuffer();console.log("Converted to ArrayBuffer, size:",s.byteLength);const u=t.split(".").pop().toLowerCase();console.log("File extension:",u);let h;if(u==="kml")h=await qo(s);else if(u==="zip")h=await Hd(s);else if(u==="xml"){const l=new TextDecoder("utf-8").decode(new Uint8Array(s));h=Go(l)}else h={status:"error",message:"Invalid file type. Please upload a zip, KML, or XML file."};if(console.log("Processing result status:",h.status),h.status==="error")throw new Error(h.message);return{message:h.message,paddocks:h.paddocks||[],geojson:h.geojson}}catch(r){return console.error("Error in processFile:",r),{error:!0,message:r.message||"An error occurred while processing the file"}}}},Wd=async(t,e)=>{{const{toast:r}=await ts(()=>import("../chunks/index.d0a4644e.js"),["..\\chunks\\index.d0a4644e.js","..\\chunks\\Toaster.31dd4aea.js","..\\chunks\\scheduler.0ff5556b.js","..\\chunks\\index.e3d1f712.js","..\\chunks\\globals.7f7f1b26.js","..\\chunks\\each.1577e3f3.js","..\\chunks\\spread.8a54911c.js","..\\chunks\\Toaster.svelte_svelte_type_style_lang.7b1bf8eb.js","..\\chunks\\index.42bd087b.js","..\\assets\\Toaster.77cf5b64.css"],import.meta.url);return new Promise((i,a)=>{r.promise(t,{loading:`Processing ${e}...`,success:n=>(setTimeout(()=>i(n),500),`${e} processed: ${n.message}`),error:n=>(setTimeout(()=>a(n),500),`Error processing ${e}: ${n.message}`)})})}},Wn=async t=>{{const{toast:e}=await ts(()=>import("../chunks/index.d0a4644e.js"),["..\\chunks\\index.d0a4644e.js","..\\chunks\\Toaster.31dd4aea.js","..\\chunks\\scheduler.0ff5556b.js","..\\chunks\\index.e3d1f712.js","..\\chunks\\globals.7f7f1b26.js","..\\chunks\\each.1577e3f3.js","..\\chunks\\spread.8a54911c.js","..\\chunks\\Toaster.svelte_svelte_type_style_lang.7b1bf8eb.js","..\\chunks\\index.42bd087b.js","..\\assets\\Toaster.77cf5b64.css"],import.meta.url);e.error(t,{duration:5e3,position:"top-center"})}},Zd=async({url:t})=>{var o;const e=Qa(es);if(!e.is_connected||!e.id)throw await Wn("Please connect to a map before processing files."),aa(303,"/account/fieldview/");const r=t.searchParams.get("fileName"),i=t.searchParams.get("fileId");if(!r||!i)throw Wo(400,"Missing file information");const a=Qa(Yo);if(!((o=a==null?void 0:a.user)!=null&&o.id))throw await Wn("Please log in to process files."),aa(303,"/login");const n=async()=>{const s=await Vd.processFile(r);if(s.error)throw new Error(s.message||"Failed to process file");return s};try{const s=await Wd(n(),r);return Ya.update(u=>u.map(h=>h.id===i?{...h,message:s.message,status:"Processed"}:h)),{processedData:s,fileName:r,fileId:i}}catch(s){throw Ya.update(u=>u.map(h=>h.id===i?{...h,message:s.message,status:"Failed"}:h)),aa(303,"/account/fieldview/")}},K1=Object.freeze(Object.defineProperty({__proto__:null,load:Zd},Symbol.toStringTag,{value:"Module"}));function Xd(t){let e,r,i,a="Previous slide",n;return e=new hu({props:{class:"h-4 w-4"}}),{c(){wt(e.$$.fragment),r=jt(),i=Yt("span"),i.textContent=a,this.h()},l(o){At(e.$$.fragment,o),r=Ht(o),i=Qt(o,"SPAN",{class:!0,"data-svelte-h":!0}),Ma(i)!=="svelte-1tx67gn"&&(i.textContent=a),this.h()},h(){yt(i,"class","sr-only")},m(o,s){Dt(e,o,s),bt(o,r,s),bt(o,i,s),n=!0},p:or,i(o){n||(mt(e.$$.fragment,o),n=!0)},o(o){pt(e.$$.fragment,o),n=!1},d(o){o&&(ut(r),ut(i)),Ct(e,o)}}}function Yd(t){let e,r;const i=[{variant:t[1]},{size:t[2]},{class:Ii("absolute h-8 w-8 touch-manipulation rounded-full",t[3]==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t[0])},{disabled:!t[4]},t[9]];let a={$$slots:{default:[Xd]},$$scope:{ctx:t}};for(let n=0;n<i.length;n+=1)a=sr(a,i[n]);return e=new hr({props:a}),e.$on("click",t[7]),e.$on("keydown",t[8]),{c(){wt(e.$$.fragment)},l(n){At(e.$$.fragment,n)},m(n,o){Dt(e,n,o),r=!0},p(n,[o]){const s=o&543?hs(i,[o&2&&{variant:n[1]},o&4&&{size:n[2]},o&9&&{class:Ii("absolute h-8 w-8 touch-manipulation rounded-full",n[3]==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n[0])},o&16&&{disabled:!n[4]},o&512&&ls(n[9])]):{};o&1024&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(mt(e.$$.fragment,n),r=!0)},o(n){pt(e.$$.fragment,n),r=!1},d(n){Ct(e,n)}}}function Qd(t,e,r){const i=["class","variant","size"];let a=Ti(e,i),n,o,{class:s=void 0}=e,{variant:u="outline"}=e,{size:h="icon"}=e;const{orientation:d,canScrollPrev:l,scrollPrev:f,handleKeyDown:c}=us("<Carousel.Previous/>");return qr(t,d,g=>r(3,n=g)),qr(t,l,g=>r(4,o=g)),t.$$set=g=>{e=sr(sr({},e),rs(g)),r(9,a=Ti(e,i)),"class"in g&&r(0,s=g.class),"variant"in g&&r(1,u=g.variant),"size"in g&&r(2,h=g.size)},[s,u,h,n,o,d,l,f,c,a]}class Kd extends Gi{constructor(e){super(),ji(this,e,Qd,Yd,qi,{class:0,variant:1,size:2})}}function Jd(t){let e,r,i,a="Next slide",n;return e=new lu({props:{class:"h-4 w-4"}}),{c(){wt(e.$$.fragment),r=jt(),i=Yt("span"),i.textContent=a,this.h()},l(o){At(e.$$.fragment,o),r=Ht(o),i=Qt(o,"SPAN",{class:!0,"data-svelte-h":!0}),Ma(i)!=="svelte-vmesmf"&&(i.textContent=a),this.h()},h(){yt(i,"class","sr-only")},m(o,s){Dt(e,o,s),bt(o,r,s),bt(o,i,s),n=!0},p:or,i(o){n||(mt(e.$$.fragment,o),n=!0)},o(o){pt(e.$$.fragment,o),n=!1},d(o){o&&(ut(r),ut(i)),Ct(e,o)}}}function t1(t){let e,r;const i=[{variant:t[1]},{size:t[2]},{class:Ii("absolute h-8 w-8 touch-manipulation rounded-full",t[3]==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t[0])},{disabled:!t[4]},t[9]];let a={$$slots:{default:[Jd]},$$scope:{ctx:t}};for(let n=0;n<i.length;n+=1)a=sr(a,i[n]);return e=new hr({props:a}),e.$on("click",t[7]),e.$on("keydown",t[8]),{c(){wt(e.$$.fragment)},l(n){At(e.$$.fragment,n)},m(n,o){Dt(e,n,o),r=!0},p(n,[o]){const s=o&543?hs(i,[o&2&&{variant:n[1]},o&4&&{size:n[2]},o&9&&{class:Ii("absolute h-8 w-8 touch-manipulation rounded-full",n[3]==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n[0])},o&16&&{disabled:!n[4]},o&512&&ls(n[9])]):{};o&1024&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(mt(e.$$.fragment,n),r=!0)},o(n){pt(e.$$.fragment,n),r=!1},d(n){Ct(e,n)}}}function e1(t,e,r){const i=["class","variant","size"];let a=Ti(e,i),n,o,{class:s=void 0}=e,{variant:u="outline"}=e,{size:h="icon"}=e;const{orientation:d,canScrollNext:l,scrollNext:f,handleKeyDown:c}=us("<Carousel.Next/>");return qr(t,d,g=>r(3,n=g)),qr(t,l,g=>r(4,o=g)),t.$$set=g=>{e=sr(sr({},e),rs(g)),r(9,a=Ti(e,i)),"class"in g&&r(0,s=g.class),"variant"in g&&r(1,u=g.variant),"size"in g&&r(2,h=g.size)},[s,u,h,n,o,d,l,f,c,a]}class r1 extends Gi{constructor(e){super(),ji(this,e,e1,t1,qi,{class:0,variant:1,size:2})}}function i1(t){let e,r,i;return{c(){e=Ka("svg"),r=Ka("path"),this.h()},l(a){e=Ja(a,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0,class:!0});var n=re(e);r=Ja(n,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,filter:!0,"fill-rule":!0}),re(r).forEach(ut),n.forEach(ut),this.h()},h(){yt(r,"d",t[2]),yt(r,"fill","rgba(34, 197, 94, 0.45)"),yt(r,"stroke","#fefbf6"),yt(r,"stroke-width","2.5"),yt(r,"filter","drop-shadow(0 0 4px rgba(0, 0, 0, 0.5))"),yt(r,"fill-rule","evenodd"),yt(e,"width",t[0]),yt(e,"height",t[1]),yt(e,"viewBox",i="0 0 "+t[0]+" "+t[1]),yt(e,"xmlns","http://www.w3.org/2000/svg"),yt(e,"class","svelte-149zop")},m(a,n){bt(a,e,n),he(e,r)},p(a,[n]){n&4&&yt(r,"d",a[2]),n&1&&yt(e,"width",a[0]),n&2&&yt(e,"height",a[1]),n&3&&i!==(i="0 0 "+a[0]+" "+a[1])&&yt(e,"viewBox",i)},i:or,o:or,d(a){a&&ut(e)}}}function a1(t){return t&&(t.type==="Polygon"||t.type==="MultiPolygon")}function n1(t){let e=1/0,r=1/0,i=-1/0,a=-1/0;return t.forEach(n=>{n.forEach(([o,s])=>{e=Math.min(e,o),r=Math.min(r,s),i=Math.max(i,o),a=Math.max(a,s)})}),[e,r,i,a]}function Zn(t,e){const r=t[0].map(e),i=t.slice(1).map(a=>a.map(e));return`M${r.map(a=>a.join(",")).join("L")}Z ${i.map(a=>`M${a.map(n=>n.join(",")).join("L")}Z`).join(" ")}`}function s1(t,e,r){let{geojson:i}=e,{width:a=300}=e,{height:n=200}=e,{areaHectares:o=0}=e,s="";function u(f){return f.type==="Polygon"?h(f.coordinates):f.type==="MultiPolygon"?f.coordinates.reduce((c,g)=>c+h(g),0):0}function h(f){const c=f[0],g=f.slice(1),p=en(rn([c]))/1e4,_=g.reduce((y,E)=>y+en(rn([E]))/1e4,0);return p-_}function d(f){const[c,g,p,_]=f,y=a/(p-c),E=n/(_-g),M=Math.min(y,E)*.9,C=(c+p)/2,w=(g+_)/2;return([T,N])=>[(T-C)*M+a/2,(w-N)*M+n/2]}function l(f){let c=[];f.type==="Polygon"?c=f.coordinates:f.type==="MultiPolygon"&&(c=f.coordinates.flat());const g=n1(c),p=d(g);return f.type==="Polygon"?Zn(f.coordinates,p):f.type==="MultiPolygon"?f.coordinates.map(_=>Zn(_,p)).join(" "):""}return is(()=>{a1(i)?(r(2,s=l(i)),r(3,o=u(i))):console.error("Invalid GeoJSON structure")}),t.$$set=f=>{"geojson"in f&&r(4,i=f.geojson),"width"in f&&r(0,a=f.width),"height"in f&&r(1,n=f.height),"areaHectares"in f&&r(3,o=f.areaHectares)},[a,n,s,o,i]}class o1 extends Gi{constructor(e){super(),ji(this,e,s1,i1,qi,{geojson:4,width:0,height:1,areaHectares:3})}}function Xn(t,e,r){const i=t.slice();return i[18]=e[r],i[20]=r,i}function Yn(t,e,r){const i=t.slice();return i[18]=e[r],i[21]=e,i[20]=r,i}function u1(t){let e;return{c(){e=Gr("Paddock Collection")},l(r){e=jr(r,"Paddock Collection")},m(r,i){bt(r,e,i)},d(r){r&&ut(e)}}}function h1(t){let e,r;return e=new nu({props:{class:"flex justify-center text-2xl font-bold",$$slots:{default:[u1]},$$scope:{ctx:t}}}),{c(){wt(e.$$.fragment)},l(i){At(e.$$.fragment,i)},m(i,a){Dt(e,i,a),r=!0},p(i,a){const n={};a&4194304&&(n.$$scope={dirty:a,ctx:i}),e.$set(n)},i(i){r||(mt(e.$$.fragment,i),r=!0)},o(i){pt(e.$$.fragment,i),r=!1},d(i){Ct(e,i)}}}function l1(t){let e,r;return e=new fs({props:{class:"inline-block h-5 w-5 align-middle"}}),{c(){wt(e.$$.fragment)},l(i){At(e.$$.fragment,i)},m(i,a){Dt(e,i,a),r=!0},p:or,i(i){r||(mt(e.$$.fragment,i),r=!0)},o(i){pt(e.$$.fragment,i),r=!1},d(i){Ct(e,i)}}}function c1(t){let e,r;return e=new cs({props:{class:"inline-block h-5 w-5 align-middle"}}),{c(){wt(e.$$.fragment)},l(i){At(e.$$.fragment,i)},m(i,a){Dt(e,i,a),r=!0},p:or,i(i){r||(mt(e.$$.fragment,i),r=!0)},o(i){pt(e.$$.fragment,i),r=!1},d(i){Ct(e,i)}}}function Qn(t){let e,r="MultiPolygon detected.";return{c(){e=Yt("div"),e.textContent=r,this.h()},l(i){e=Qt(i,"DIV",{class:!0,"data-svelte-h":!0}),Ma(e)!=="svelte-zrl27z"&&(e.textContent=r),this.h()},h(){yt(e,"class","text-center text-sm text-blue-500")},m(i,a){bt(i,e,a)},d(i){i&&ut(e)}}}function f1(t){var k;let e,r,i,a,n,o,s,u,h=(((k=t[18].area)==null?void 0:k.toFixed(2))??"N/A")+"",d,l,f,c,g,p,_,y,E;function M(...L){return t[10](t[20],...L)}r=new Xo({props:{type:"text",value:t[18].name,class:"w-full bg-transparent text-base font-semibold sm:text-lg"}}),r.$on("input",M);function C(L){t[11](L,t[18])}let w={geojson:t[18].boundary,width:300,height:200};t[18].area!==void 0&&(w.areaHectares=t[18].area),n=new o1({props:w}),as.push(()=>ss(n,"areaHectares",C));function T(){return t[12](t[20])}g=new hr({props:{variant:t[18].status==="accepted"?"default":"outline",class:"mx-1.5 inline-block h-10 w-10 rounded-full p-0 align-middle leading-[2.5rem]",$$slots:{default:[l1]},$$scope:{ctx:t}}}),g.$on("click",T);function N(){return t[13](t[20])}_=new hr({props:{variant:t[18].status==="rejected"?"default":"outline",class:"mx-1.5 inline-block h-10 w-10 rounded-full p-0 align-middle leading-[2.5rem]",$$slots:{default:[c1]},$$scope:{ctx:t}}}),_.$on("click",N);let O=t[18].isMultiPolygon&&Qn();return{c(){e=Yt("div"),wt(r.$$.fragment),i=jt(),a=Yt("div"),wt(n.$$.fragment),s=jt(),u=Yt("div"),d=Gr(h),l=Gr(" hectares"),f=jt(),c=Yt("div"),wt(g.$$.fragment),p=jt(),wt(_.$$.fragment),y=jt(),O&&O.c(),this.h()},l(L){e=Qt(L,"DIV",{class:!0});var H=re(e);At(r.$$.fragment,H),i=Ht(H),a=Qt(H,"DIV",{class:!0});var D=re(a);At(n.$$.fragment,D),D.forEach(ut),s=Ht(H),u=Qt(H,"DIV",{class:!0});var P=re(u);d=jr(P,h),l=jr(P," hectares"),P.forEach(ut),f=Ht(H),c=Qt(H,"DIV",{class:!0});var v=re(c);At(g.$$.fragment,v),p=Ht(v),At(_.$$.fragment,v),v.forEach(ut),y=Ht(H),O&&O.l(H),H.forEach(ut),this.h()},h(){yt(a,"class","mx-auto aspect-[3/2] w-full max-w-[300px]"),yt(u,"class","text-center text-sm"),yt(c,"class","text-center"),yt(e,"class","flex flex-col space-y-2 p-2 sm:space-y-4 sm:p-4")},m(L,H){bt(L,e,H),Dt(r,e,null),he(e,i),he(e,a),Dt(n,a,null),he(e,s),he(e,u),he(u,d),he(u,l),he(e,f),he(e,c),Dt(g,c,null),he(c,p),Dt(_,c,null),he(e,y),O&&O.m(e,null),E=!0},p(L,H){var rt;t=L;const D={};H&1&&(D.value=t[18].name),r.$set(D);const P={};H&1&&(P.geojson=t[18].boundary),!o&&H&1&&(o=!0,P.areaHectares=t[18].area,ns(()=>o=!1)),n.$set(P),(!E||H&1)&&h!==(h=(((rt=t[18].area)==null?void 0:rt.toFixed(2))??"N/A")+"")&&Ko(d,h);const v={};H&1&&(v.variant=t[18].status==="accepted"?"default":"outline"),H&4194304&&(v.$$scope={dirty:H,ctx:t}),g.$set(v);const z={};H&1&&(z.variant=t[18].status==="rejected"?"default":"outline"),H&4194304&&(z.$$scope={dirty:H,ctx:t}),_.$set(z),t[18].isMultiPolygon?O||(O=Qn(),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i(L){E||(mt(r.$$.fragment,L),mt(n.$$.fragment,L),mt(g.$$.fragment,L),mt(_.$$.fragment,L),E=!0)},o(L){pt(r.$$.fragment,L),pt(n.$$.fragment,L),pt(g.$$.fragment,L),pt(_.$$.fragment,L),E=!1},d(L){L&&ut(e),Ct(r),Ct(n),Ct(g),Ct(_),O&&O.d()}}}function d1(t){let e,r,i;return e=new os({props:{$$slots:{default:[f1]},$$scope:{ctx:t}}}),{c(){wt(e.$$.fragment),r=jt()},l(a){At(e.$$.fragment,a),r=Ht(a)},m(a,n){Dt(e,a,n),bt(a,r,n),i=!0},p(a,n){const o={};n&4194305&&(o.$$scope={dirty:n,ctx:a}),e.$set(o)},i(a){i||(mt(e.$$.fragment,a),i=!0)},o(a){pt(e.$$.fragment,a),i=!1},d(a){a&&ut(r),Ct(e,a)}}}function Kn(t,e){let r,i,a;return i=new uu({props:{class:"w-full",$$slots:{default:[d1]},$$scope:{ctx:e}}}),{key:t,first:null,c(){r=ur(),wt(i.$$.fragment),this.h()},l(n){r=ur(),At(i.$$.fragment,n),this.h()},h(){this.first=r},m(n,o){bt(n,r,o),Dt(i,n,o),a=!0},p(n,o){e=n;const s={};o&4194305&&(s.$$scope={dirty:o,ctx:e}),i.$set(s)},i(n){a||(mt(i.$$.fragment,n),a=!0)},o(n){pt(i.$$.fragment,n),a=!1},d(n){n&&ut(r),Ct(i,n)}}}function m1(t){let e=[],r=new Map,i,a,n=Si(t[0]);const o=s=>s[20];for(let s=0;s<n.length;s+=1){let u=Yn(t,n,s),h=o(u);r.set(h,e[s]=Kn(h,u))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=ur()},l(s){for(let u=0;u<e.length;u+=1)e[u].l(s);i=ur()},m(s,u){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(s,u);bt(s,i,u),a=!0},p(s,u){u&113&&(n=Si(s[0]),wa(),e=tu(e,u,o,1,s,n,r,i.parentNode,eu,Kn,i,Yn),Aa())},i(s){if(!a){for(let u=0;u<n.length;u+=1)mt(e[u]);a=!0}},o(s){for(let u=0;u<e.length;u+=1)pt(e[u]);a=!1},d(s){s&&ut(i);for(let u=0;u<e.length;u+=1)e[u].d(s)}}}function p1(t){let e,r,i,a,n,o;return e=new ou({props:{$$slots:{default:[m1]},$$scope:{ctx:t}}}),i=new Kd({}),n=new r1({}),{c(){wt(e.$$.fragment),r=jt(),wt(i.$$.fragment),a=jt(),wt(n.$$.fragment)},l(s){At(e.$$.fragment,s),r=Ht(s),At(i.$$.fragment,s),a=Ht(s),At(n.$$.fragment,s)},m(s,u){Dt(e,s,u),bt(s,r,u),Dt(i,s,u),bt(s,a,u),Dt(n,s,u),o=!0},p(s,u){const h={};u&4194305&&(h.$$scope={dirty:u,ctx:s}),e.$set(h)},i(s){o||(mt(e.$$.fragment,s),mt(i.$$.fragment,s),mt(n.$$.fragment,s),o=!0)},o(s){pt(e.$$.fragment,s),pt(i.$$.fragment,s),pt(n.$$.fragment,s),o=!1},d(s){s&&(ut(r),ut(a)),Ct(e,s),Ct(i,s),Ct(n,s)}}}function g1(t){let e,r,i;return r=new fu({props:{class:"h-3 w-3 text-white"}}),{c(){e=Yt("div"),wt(r.$$.fragment),this.h()},l(a){e=Qt(a,"DIV",{class:!0});var n=re(e);At(r.$$.fragment,n),n.forEach(ut),this.h()},h(){yt(e,"class","flex h-full w-full items-center justify-center rounded-full bg-blue-200")},m(a,n){bt(a,e,n),Dt(r,e,null),i=!0},i(a){i||(mt(r.$$.fragment,a),i=!0)},o(a){pt(r.$$.fragment,a),i=!1},d(a){a&&ut(e),Ct(r)}}}function v1(t){let e,r,i;return r=new cs({props:{class:"h-3 w-3 text-white"}}),{c(){e=Yt("div"),wt(r.$$.fragment),this.h()},l(a){e=Qt(a,"DIV",{class:!0});var n=re(e);At(r.$$.fragment,n),n.forEach(ut),this.h()},h(){yt(e,"class","flex h-full w-full items-center justify-center rounded-full bg-red-500")},m(a,n){bt(a,e,n),Dt(r,e,null),i=!0},i(a){i||(mt(r.$$.fragment,a),i=!0)},o(a){pt(r.$$.fragment,a),i=!1},d(a){a&&ut(e),Ct(r)}}}function _1(t){let e,r,i;return r=new fs({props:{class:"h-3 w-3 text-white"}}),{c(){e=Yt("div"),wt(r.$$.fragment),this.h()},l(a){e=Qt(a,"DIV",{class:!0});var n=re(e);At(r.$$.fragment,n),n.forEach(ut),this.h()},h(){yt(e,"class","flex h-full w-full items-center justify-center rounded-full bg-green-500")},m(a,n){bt(a,e,n),Dt(r,e,null),i=!0},i(a){i||(mt(r.$$.fragment,a),i=!0)},o(a){pt(r.$$.fragment,a),i=!1},d(a){a&&ut(e),Ct(r)}}}function y1(t){let e;return{c(){e=Yt("div"),this.h()},l(r){e=Qt(r,"DIV",{class:!0}),re(e).forEach(ut),this.h()},h(){yt(e,"class","w-full")},m(r,i){bt(r,e,i)},d(r){r&&ut(e)}}}function Jn(t){let e,r,i,a,n,o;const s=[_1,v1,g1],u=[];function h(l,f){return l[18].status==="accepted"?0:l[18].status==="rejected"?1:l[18].status==="warning"?2:-1}~(r=h(t))&&(i=u[r]=s[r](t));let d=(t[20]+1)%10===0&&y1();return{c(){e=Yt("div"),i&&i.c(),a=jt(),d&&d.c(),n=ur(),this.h()},l(l){e=Qt(l,"DIV",{class:!0});var f=re(e);i&&i.l(f),f.forEach(ut),a=Ht(l),d&&d.l(l),n=ur(),this.h()},h(){yt(e,"class","m-1 flex h-4 w-4 cursor-pointer items-center justify-center rounded-full transition-all duration-300 ease-in-out"),pe(e,"bg-green-200",t[20]===t[2]),pe(e,"bg-muted",t[20]!==t[2]),pe(e,"outline-black-500",t[20]===t[2]),pe(e,"outline-2",t[20]===t[2]),pe(e,"outline",t[20]===t[2])},m(l,f){bt(l,e,f),~r&&u[r].m(e,null),bt(l,a,f),d&&d.m(l,f),bt(l,n,f),o=!0},p(l,f){let c=r;r=h(l),r!==c&&(i&&(wa(),pt(u[c],1,1,()=>{u[c]=null}),Aa()),~r?(i=u[r],i||(i=u[r]=s[r](l),i.c()),mt(i,1),i.m(e,null)):i=null),(!o||f&4)&&pe(e,"bg-green-200",l[20]===l[2]),(!o||f&4)&&pe(e,"bg-muted",l[20]!==l[2]),(!o||f&4)&&pe(e,"outline-black-500",l[20]===l[2]),(!o||f&4)&&pe(e,"outline-2",l[20]===l[2]),(!o||f&4)&&pe(e,"outline",l[20]===l[2])},i(l){o||(mt(i),o=!0)},o(l){pt(i),o=!1},d(l){l&&(ut(e),ut(a),ut(n)),~r&&u[r].d(),d&&d.d(l)}}}function E1(t){let e,r,i,a,n;function o(l){t[14](l)}let s={class:"mx-auto",style:"width: 100%; max-width: 50vw;",$$slots:{default:[p1]},$$scope:{ctx:t}};t[1]!==void 0&&(s.api=t[1]),e=new su({props:s}),as.push(()=>ss(e,"api",o));let u=Si(t[0]),h=[];for(let l=0;l<u.length;l+=1)h[l]=Jn(Xn(t,u,l));const d=l=>pt(h[l],1,1,()=>{h[l]=null});return{c(){wt(e.$$.fragment),i=jt(),a=Yt("div");for(let l=0;l<h.length;l+=1)h[l].c();this.h()},l(l){At(e.$$.fragment,l),i=Ht(l),a=Qt(l,"DIV",{class:!0});var f=re(a);for(let c=0;c<h.length;c+=1)h[c].l(f);f.forEach(ut),this.h()},h(){yt(a,"class","mt-4 flex flex-wrap justify-center")},m(l,f){Dt(e,l,f),bt(l,i,f),bt(l,a,f);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(a,null);n=!0},p(l,f){const c={};if(f&4194305&&(c.$$scope={dirty:f,ctx:l}),!r&&f&2&&(r=!0,c.api=l[1],ns(()=>r=!1)),e.$set(c),f&5){u=Si(l[0]);let g;for(g=0;g<u.length;g+=1){const p=Xn(l,u,g);h[g]?(h[g].p(p,f),mt(h[g],1)):(h[g]=Jn(p),h[g].c(),mt(h[g],1),h[g].m(a,null))}for(wa(),g=u.length;g<h.length;g+=1)d(g);Aa()}},i(l){if(!n){mt(e.$$.fragment,l);for(let f=0;f<u.length;f+=1)mt(h[f]);n=!0}},o(l){pt(e.$$.fragment,l),h=h.filter(Boolean);for(let f=0;f<h.length;f+=1)pt(h[f]);n=!1},d(l){l&&(ut(i),ut(a)),Ct(e,l),Qo(h,l)}}}function b1(t){let e;return{c(){e=Gr("Accept All")},l(r){e=jr(r,"Accept All")},m(r,i){bt(r,e,i)},d(r){r&&ut(e)}}}function M1(t){let e;return{c(){e=Gr("Load")},l(r){e=jr(r,"Load")},m(r,i){bt(r,e,i)},d(r){r&&ut(e)}}}function w1(t){let e,r,i,a;return e=new hr({props:{variant:"outline",$$slots:{default:[b1]},$$scope:{ctx:t}}}),e.$on("click",t[7]),i=new hr({props:{class:"bg-black",disabled:!t[3],$$slots:{default:[M1]},$$scope:{ctx:t}}}),i.$on("click",t[8]),{c(){wt(e.$$.fragment),r=jt(),wt(i.$$.fragment)},l(n){At(e.$$.fragment,n),r=Ht(n),At(i.$$.fragment,n)},m(n,o){Dt(e,n,o),bt(n,r,o),Dt(i,n,o),a=!0},p(n,o){const s={};o&4194304&&(s.$$scope={dirty:o,ctx:n}),e.$set(s);const u={};o&8&&(u.disabled=!n[3]),o&4194304&&(u.$$scope={dirty:o,ctx:n}),i.$set(u)},i(n){a||(mt(e.$$.fragment,n),mt(i.$$.fragment,n),a=!0)},o(n){pt(e.$$.fragment,n),pt(i.$$.fragment,n),a=!1},d(n){n&&ut(r),Ct(e,n),Ct(i,n)}}}function A1(t){let e,r,i,a,n,o;return e=new iu({props:{$$slots:{default:[h1]},$$scope:{ctx:t}}}),i=new au({props:{$$slots:{default:[E1]},$$scope:{ctx:t}}}),n=new Zo({props:{class:"flex justify-center space-x-4",$$slots:{default:[w1]},$$scope:{ctx:t}}}),{c(){wt(e.$$.fragment),r=jt(),wt(i.$$.fragment),a=jt(),wt(n.$$.fragment)},l(s){At(e.$$.fragment,s),r=Ht(s),At(i.$$.fragment,s),a=Ht(s),At(n.$$.fragment,s)},m(s,u){Dt(e,s,u),bt(s,r,u),Dt(i,s,u),bt(s,a,u),Dt(n,s,u),o=!0},p(s,u){const h={};u&4194304&&(h.$$scope={dirty:u,ctx:s}),e.$set(h);const d={};u&4194311&&(d.$$scope={dirty:u,ctx:s}),i.$set(d);const l={};u&4194312&&(l.$$scope={dirty:u,ctx:s}),n.$set(l)},i(s){o||(mt(e.$$.fragment,s),mt(i.$$.fragment,s),mt(n.$$.fragment,s),o=!0)},o(s){pt(e.$$.fragment,s),pt(i.$$.fragment,s),pt(n.$$.fragment,s),o=!1},d(s){s&&(ut(r),ut(a)),Ct(e,s),Ct(i,s),Ct(n,s)}}}function D1(t){let e,r,i;return r=new os({props:{class:"mx-auto w-full max-w-4xl",$$slots:{default:[A1]},$$scope:{ctx:t}}}),{c(){e=Yt("div"),wt(r.$$.fragment),this.h()},l(a){e=Qt(a,"DIV",{class:!0});var n=re(e);At(r.$$.fragment,n),n.forEach(ut),this.h()},h(){yt(e,"class","container mx-auto px-4")},m(a,n){bt(a,e,n),Dt(r,e,null),i=!0},p(a,[n]){const o={};n&4194319&&(o.$$scope={dirty:n,ctx:a}),r.$set(o)},i(a){i||(mt(r.$$.fragment,a),i=!0)},o(a){pt(r.$$.fragment,a),i=!1},d(a){a&&ut(e),Ct(r)}}}function C1(t,e,r){let i,a;qr(t,es,w=>r(16,a=w));let{data:n}=e,o=[];is(()=>{var w;(w=n.processedData)!=null&&w.paddocks&&r(0,o=n.processedData.paddocks.map(T=>{const N=T.boundary.type==="MultiPolygon";return{...T,status:N?"warning":null,area:void 0,isMultiPolygon:N}}))});let s,u=0,h=0;function d(w,T){const N=T.target;r(0,o[w].name=N.value,o),r(0,o=[...o])}function l(w){r(0,o[w].status="accepted",o),r(0,o=[...o]),c()}function f(w){r(0,o[w].status="rejected",o),r(0,o=[...o]),c()}function c(){u<h-1&&s.scrollNext()}function g(){r(0,o=o.map(w=>({...w,status:"accepted"})))}async function p(){const w=a.id,T=cu.uploadFields(w,o).then(N=>{if(!N.success)throw new Error(N.message);return N});an.promise(T,{loading:"Submitting paddocks...",success:N=>{const O=N.insertedFields.length;return O===1?`Paddock "${N.insertedFields[0].name}" was uploaded.`:`${O} paddocks were uploaded.`},error:N=>N.message});try{const N=await T;if(N.rejectedFields&&N.rejectedFields.length>0){const O=N.rejectedFields.reduce((L,H)=>(L[H.reason]=(L[H.reason]||0)+1,L),{});let k=`${N.rejectedFields.length} paddock(s) were rejected:`;for(const[L,H]of Object.entries(O))k+=`
${H} ${H===1?"paddock":"paddocks"} rejected for ${L}`;an.error(k,{duration:7e3})}}catch{}finally{setTimeout(()=>{ru("/account/fieldview/")},500)}}const _=(w,T)=>d(w,T);function y(w,T){t.$$.not_equal(T.area,w)&&(T.area=w,r(0,o))}const E=w=>l(w),M=w=>f(w);function C(w){s=w,r(1,s)}return t.$$set=w=>{"data"in w&&r(9,n=w.data)},t.$$.update=()=>{t.$$.dirty&2&&s&&(h=s.scrollSnapList().length,r(2,u=s.selectedScrollSnap()),s.on("select",()=>{r(2,u=s.selectedScrollSnap())})),t.$$.dirty&1&&r(3,i=o.every(w=>w.status!==null))},[o,s,u,i,d,l,f,g,p,n,_,y,E,M,C]}class J1 extends Gi{constructor(e){super(),ji(this,e,C1,D1,qi,{data:9})}}export{J1 as component,K1 as universal};
