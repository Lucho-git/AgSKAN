import{s as je,r as ye,v as Pe,m as ze,u as Oe,o as He,p as Re,d as h,K as Ke,U as z,i as Se,a as l,A as O,b as r,c as p,e as _,g as G,f as w,h as Be,j as f,k as y,t as Ue,l as Ze,q as Ge,E as xe,F as Me}from"../chunks/Bqk-ehBx.js";import{S as Xe,i as qe,d as ie,t as J,a as Q,m as ue,c as ce,b as pe}from"../chunks/BSIXs_Xe.js";import{g as Je}from"../chunks/kCv0HOyK.js";import{a as Ve}from"../chunks/DsDOFx4q.js";import{p as Ae}from"../chunks/BRXscziQ.js";import{s as Qe}from"../chunks/D9tfuetc.js";import{t as Fe}from"../chunks/7sStqI9Q.js";import{U as We}from"../chunks/D8Sxnvj3.js";import{g as Ye,a as et}from"../chunks/CgU5AtxT.js";import{I as tt}from"../chunks/nF2i7bx_.js";import{P as st}from"../chunks/cuFfa1C_.js";function at(n){let e;const t=n[2].default,s=ze(t,n,n[3],null);return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,a){s&&s.m(o,a),e=!0},p(o,a){s&&s.p&&(!e||a&8)&&Oe(s,t,o,o[3],e?Re(t,o[3],a,null):He(o[3]),null)},i(o){e||(Q(s,o),e=!0)},o(o){J(s,o),e=!1},d(o){s&&s.d(o)}}}function lt(n){let e,t;const s=[{name:"building-2"},n[1],{iconNode:n[0]}];let o={$$slots:{default:[at]},$$scope:{ctx:n}};for(let a=0;a<s.length;a+=1)o=ye(o,s[a]);return e=new tt({props:o}),{c(){pe(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,u){ue(e,a,u),t=!0},p(a,[u]){const d=u&3?Ye(s,[s[0],u&2&&et(a[1]),u&1&&{iconNode:a[0]}]):{};u&8&&(d.$$scope={dirty:u,ctx:a}),e.$set(d)},i(a){t||(Q(e.$$.fragment,a),t=!0)},o(a){J(e.$$.fragment,a),t=!1},d(a){ie(e,a)}}}function rt(n,e,t){let{$$slots:s={},$$scope:o}=e;const a=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"}],["path",{d:"M10 6h4"}],["path",{d:"M10 10h4"}],["path",{d:"M10 14h4"}],["path",{d:"M10 18h4"}]];return n.$$set=u=>{t(1,e=ye(ye({},e),Pe(u))),"$$scope"in u&&t(3,o=u.$$scope)},e=Pe(e),[a,e,s,o]}class nt extends Xe{constructor(e){super(),qe(this,e,rt,lt,je,{})}}const ot=()=>({}),yt=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));function Le(n){let e,t,s,o,a,u;return{c(){e=f("div"),t=Me("svg"),s=Me("path"),o=y(),a=f("span"),u=Ue(n[3]),this.h()},l(d){e=p(d,"DIV",{class:!0});var i=_(e);t=xe(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var b=_(t);s=xe(b,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(s).forEach(h),b.forEach(h),o=w(i),a=p(i,"SPAN",{});var v=_(a);u=Be(v,n[3]),v.forEach(h),i.forEach(h),this.h()},h(){r(s,"stroke-linecap","round"),r(s,"stroke-linejoin","round"),r(s,"stroke-width","2"),r(s,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","h-6 w-6 shrink-0 stroke-current"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(e,"class","alert alert-error mb-6")},m(d,i){Se(d,e,i),l(e,t),l(t,s),l(e,o),l(e,a),l(a,u)},p(d,i){i&8&&Ge(u,d[3])},d(d){d&&h(e)}}}function Te(n){let e;return{c(){e=f("span"),this.h()},l(t){e=p(t,"SPAN",{class:!0}),_(e).forEach(h),this.h()},h(){r(e,"class","loading loading-spinner")},m(t,s){Se(t,e,s)},d(t){t&&h(e)}}}function it(n){let e,t,s,o='<h1 class="mb-4 text-5xl font-bold text-base-content">Farm Details</h1> <p class="text-xl text-base-content/70">Tell us about your operation</p>',a,u,d,i,b,v,P,H,x,W="Full Name",R,S,K,m,k,M,fe,T,ke="Company/Farm Name",de,I,me,V,A,j,he,B,Ie="Mobile Number",_e,$,be,X,F,L,ge,U,$e="I agree to be contacted for setup assistance and important updates",ve,N,Y,ee,Z,Ee,Ne,g=n[3]&&Le(n);P=new We({props:{size:18,class:"text-base-content/70"}}),M=new nt({props:{size:18,class:"text-base-content/70"}}),j=new st({props:{size:18,class:"text-base-content/70"}});let E=n[5]&&Te();return{c(){e=f("div"),t=f("div"),s=f("div"),s.innerHTML=o,a=y(),g&&g.c(),u=y(),d=f("div"),i=f("div"),b=f("div"),v=f("label"),pe(P.$$.fragment),H=y(),x=f("span"),x.textContent=W,R=y(),S=f("input"),K=y(),m=f("div"),k=f("label"),pe(M.$$.fragment),fe=y(),T=f("span"),T.textContent=ke,de=y(),I=f("input"),me=y(),V=f("div"),A=f("label"),pe(j.$$.fragment),he=y(),B=f("span"),B.textContent=Ie,_e=y(),$=f("input"),be=y(),X=f("div"),F=f("label"),L=f("input"),ge=y(),U=f("span"),U.textContent=$e,ve=y(),N=f("button"),E&&E.c(),Y=Ue(`\r
          Continue to Map Setup`),this.h()},l(c){e=p(c,"DIV",{class:!0});var D=_(e);t=p(D,"DIV",{class:!0});var q=_(t);s=p(q,"DIV",{class:!0,"data-svelte-h":!0}),G(s)!=="svelte-vz9j3r"&&(s.innerHTML=o),a=w(q),g&&g.l(q),u=w(q),d=p(q,"DIV",{class:!0});var De=_(d);i=p(De,"DIV",{class:!0});var C=_(i);b=p(C,"DIV",{class:!0});var te=_(b);v=p(te,"LABEL",{class:!0});var se=_(v);ce(P.$$.fragment,se),H=w(se),x=p(se,"SPAN",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-8nvrpr"&&(x.textContent=W),se.forEach(h),R=w(te),S=p(te,"INPUT",{type:!0,placeholder:!0,class:!0}),te.forEach(h),K=w(C),m=p(C,"DIV",{class:!0});var ae=_(m);k=p(ae,"LABEL",{class:!0});var le=_(k);ce(M.$$.fragment,le),fe=w(le),T=p(le,"SPAN",{class:!0,"data-svelte-h":!0}),G(T)!=="svelte-7sy78g"&&(T.textContent=ke),le.forEach(h),de=w(ae),I=p(ae,"INPUT",{type:!0,placeholder:!0,class:!0}),ae.forEach(h),me=w(C),V=p(C,"DIV",{class:!0});var re=_(V);A=p(re,"LABEL",{class:!0});var ne=_(A);ce(j.$$.fragment,ne),he=w(ne),B=p(ne,"SPAN",{class:!0,"data-svelte-h":!0}),G(B)!=="svelte-1gejwx0"&&(B.textContent=Ie),ne.forEach(h),_e=w(re),$=p(re,"INPUT",{type:!0,placeholder:!0,class:!0}),re.forEach(h),be=w(C),X=p(C,"DIV",{class:!0});var Ce=_(X);F=p(Ce,"LABEL",{class:!0});var oe=_(F);L=p(oe,"INPUT",{type:!0,class:!0}),ge=w(oe),U=p(oe,"SPAN",{class:!0,"data-svelte-h":!0}),G(U)!=="svelte-a47vvs"&&(U.textContent=$e),oe.forEach(h),Ce.forEach(h),ve=w(C),N=p(C,"BUTTON",{class:!0});var we=_(N);E&&E.l(we),Y=Be(we,`\r
          Continue to Map Setup`),we.forEach(h),C.forEach(h),De.forEach(h),q.forEach(h),D.forEach(h),this.h()},h(){r(s,"class","mb-16 text-center"),r(x,"class","label-text"),r(v,"class","label items-center gap-2"),r(S,"type","text"),r(S,"placeholder","Enter your full name"),r(S,"class","input input-bordered w-full"),S.required=!0,r(b,"class","form-control mb-6"),r(T,"class","label-text"),r(k,"class","label items-center gap-2"),r(I,"type","text"),r(I,"placeholder","Enter your company name"),r(I,"class","input input-bordered w-full"),I.required=!0,r(m,"class","form-control mb-6"),r(B,"class","label-text"),r(A,"class","label items-center gap-2"),r($,"type","tel"),r($,"placeholder","04XX XXX XXX"),r($,"class","input input-bordered w-full"),$.required=!0,r(V,"class","form-control mb-6"),r(L,"type","checkbox"),r(L,"class","checkbox checkbox-sm"),r(U,"class","label-text"),r(F,"class","label cursor-pointer justify-start gap-2"),r(X,"class","form-control mb-8"),r(N,"class","btn btn-primary w-full"),N.disabled=ee=!n[6]||n[5],r(i,"class","card-body"),r(d,"class","card bg-base-100 shadow-xl"),r(t,"class","mx-auto max-w-xl"),r(e,"class","min-h-screen bg-base-200 px-4 py-12")},m(c,D){Se(c,e,D),l(e,t),l(t,s),l(t,a),g&&g.m(t,null),l(t,u),l(t,d),l(d,i),l(i,b),l(b,v),ue(P,v,null),l(v,H),l(v,x),l(b,R),l(b,S),z(S,n[0]),l(i,K),l(i,m),l(m,k),ue(M,k,null),l(k,fe),l(k,T),l(m,de),l(m,I),z(I,n[1]),l(i,me),l(i,V),l(V,A),ue(j,A,null),l(A,he),l(A,B),l(V,_e),l(V,$),z($,n[2]),l(i,be),l(i,X),l(X,F),l(F,L),L.checked=n[4],l(F,ge),l(F,U),l(i,ve),l(i,N),E&&E.m(N,null),l(N,Y),Z=!0,Ee||(Ne=[O(S,"input",n[9]),O(I,"input",n[10]),O($,"input",n[11]),O($,"input",n[7]),O(L,"change",n[12]),O(N,"click",n[8])],Ee=!0)},p(c,[D]){c[3]?g?g.p(c,D):(g=Le(c),g.c(),g.m(t,u)):g&&(g.d(1),g=null),D&1&&S.value!==c[0]&&z(S,c[0]),D&2&&I.value!==c[1]&&z(I,c[1]),D&4&&z($,c[2]),D&16&&(L.checked=c[4]),c[5]?E||(E=Te(),E.c(),E.m(N,Y)):E&&(E.d(1),E=null),(!Z||D&96&&ee!==(ee=!c[6]||c[5]))&&(N.disabled=ee)},i(c){Z||(Q(P.$$.fragment,c),Q(M.$$.fragment,c),Q(j.$$.fragment,c),Z=!0)},o(c){J(P.$$.fragment,c),J(M.$$.fragment,c),J(j.$$.fragment,c),Z=!1},d(c){c&&h(e),g&&g.d(),ie(P),ie(M),ie(j),E&&E.d(),Ee=!1,Ke(Ne)}}}function ut(n){const e=n.replace(/\D/g,"");return e.length<=4?e:e.length<=7?`${e.slice(0,4)} ${e.slice(4)}`:`${e.slice(0,4)} ${e.slice(4,7)} ${e.slice(7,10)}`}function ct(n,e,t){let s,o;Ze(n,Ae,m=>t(13,o=m));let a=null,u="",d="",i="",b=!0,v=!1;function P(m){const k=m.target,M=ut(k.value);t(2,i=M)}async function H(){try{const{error:m}=await Ve.from("user_subscriptions").upsert({user_id:o.id,subscription:"FREE",marker_limit:100,trail_limit:1e4,current_seats:5,lingering_seats:0,next_billing_date:new Date(Date.now()+31536e6).toISOString()});if(m)throw m;Qe.set({subscription:"FREE",marker_limit:100,trail_limit:1e4,lingering_seats:0,current_seats:5,next_billing_date:new Date(Date.now()+365*24*60*60*1e3).toISOString()})}catch(m){throw console.error("Failed to setup subscription:",m),new Error("Failed to setup subscription")}}async function x(){if(!s){t(3,a="Please fill out all required fields");return}t(5,v=!0),t(3,a=null);try{await H();const{error:m}=await Ve.from("profiles").update({full_name:u,company_name:d,mobile:i,contactable:b,role:"manager",onboarded:!0,updated_at:new Date().toISOString()}).eq("id",o.id);if(m)throw m;Ae.update(k=>({...k,full_name:u,company_name:d,user_type:"manager"})),Fe.success("Setup completed successfully!"),Je("/account/user_survey")}catch(m){console.error("Error:",m),t(3,a=m.message||"Failed to update profile"),Fe.error(a)}finally{t(5,v=!1)}}function W(){u=this.value,t(0,u)}function R(){d=this.value,t(1,d)}function S(){i=this.value,t(2,i)}function K(){b=this.checked,t(4,b)}return n.$$.update=()=>{n.$$.dirty&7&&t(6,s=u.trim().length>0&&d.trim().length>0&&i.replace(/\D/g,"").length>=8&&i.replace(/\D/g,"").length<=10)},[u,d,i,a,b,v,s,P,x,W,R,S,K]}class St extends Xe{constructor(e){super(),qe(this,e,ct,it,je,{})}}export{St as component,yt as universal};
