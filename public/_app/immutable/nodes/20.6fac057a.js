import{s as T,a as v,e as x,w as P,x as H,d as m,f as y,c as S,g as $,i as C,j as p,l as R,y as M,z as N,n as f}from"../chunks/scheduler.78aa6f0d.js";import{S as V,i as j,b as w,e as B,t as h,g as L,c as q,a as z,m as A,d as E}from"../chunks/index.9a12d9f3.js";import{s as I}from"../chunks/sessionStore.4d48270f.js";import{g as k}from"../chunks/navigation.dd464073.js";import{u as O}from"../chunks/userSettingsApi.502733fc.js";import{S as D}from"../chunks/settings_module.3839c345.js";function F(r){let e,n;return e=new D({props:{title:"Reset Password",editable:!0,saveButtonTitle:"Reset Password",successTitle:"Password Changed",successBody:"On next sign in, use your new password.",apiHandler:r[1],fields:[{id:"newPassword1",label:"New Password",initialValue:"",inputType:"password"},{id:"newPassword2",label:"Confirm New Password",initialValue:"",inputType:"password"}]}}),e.$on("success",r[2]),{c(){q(e.$$.fragment)},l(s){z(e.$$.fragment,s)},m(s,l){A(e,s,l),n=!0},p:f,i(s){n||(h(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function G(r){let e,n='<div class="loading loading-spinner loading-lg"></div>';return{c(){e=x("div"),e.innerHTML=n,this.h()},l(s){e=S(s,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-asr66p"&&(e.innerHTML=n),this.h()},h(){C(e,"class","flex h-64 items-center justify-center")},m(s,l){p(s,e,l)},p:f,i:f,o:f,d(s){s&&m(e)}}}function J(r){let e,n,s="Settings",l,o,a,u,c;const g=[G,F],d=[];function b(t,i){return t[0]?0:1}return o=b(r),a=d[o]=g[o](r),{c(){e=v(),n=x("h1"),n.textContent=s,l=v(),a.c(),u=P(),this.h()},l(t){H("svelte-1w1powp",document.head).forEach(m),e=y(t),n=S(t,"H1",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-mlvd3d"&&(n.textContent=s),l=y(t),a.l(t),u=P(),this.h()},h(){document.title="Reset Password",C(n,"class","mb-6 text-2xl font-bold")},m(t,i){p(t,e,i),p(t,n,i),p(t,l,i),d[o].m(t,i),p(t,u,i),c=!0},p(t,[i]){let _=o;o=b(t),o===_?d[o].p(t,i):(L(),w(d[_],1,1,()=>{d[_]=null}),B(),a=d[o],a?a.p(t,i):(a=d[o]=g[o](t),a.c()),h(a,1),a.m(u.parentNode,u))},i(t){c||(h(a),c=!0)},o(t){w(a),c=!1},d(t){t&&(m(e),m(n),m(l),m(u)),d[o].d(t)}}}function K(r,e,n){let s;R(r,I,c=>n(3,s=c)),M("adminSection").set("settings");let o=!0;N(()=>{n(0,o=!1)});async function a(c){return await O.updatePassword(c.newPassword1,c.newPassword2,"")}function u(){setTimeout(()=>{s?k("/account/settings"):k("/login")},1500)}return[o,a,u]}class ee extends V{constructor(e){super(),j(this,e,K,J,T,{})}}export{ee as component};
