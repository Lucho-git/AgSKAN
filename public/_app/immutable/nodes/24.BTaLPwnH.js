import{s as je,x as we,y as xe,m as ze,u as Fe,o as Oe,p as He,d as m,K as Ke,U as O,i as $e,a as s,w as H,b as n,c as p,e as h,g as J,f as E,h as Be,j as f,k as y,t as Ue,l as Ze,q as Ge,E as De,F as Me}from"../chunks/DjMlahvE.js";import{S as Xe,i as qe,d as ie,t as Q,a as R,m as ue,c as ce,b as pe}from"../chunks/KhAD1Hhl.js";import{g as Je}from"../chunks/CsvQbYGG.js";import{a as Qe}from"../chunks/DSS83BMa.js";import{p as Ve}from"../chunks/C1kVPyTF.js";import{t as Ae}from"../chunks/C31GE7Pe.js";import{U as Re}from"../chunks/DWpPqQw9.js";import{g as We,a as Ye}from"../chunks/CgU5AtxT.js";import{I as et}from"../chunks/BQRQFwEA.js";import{P as tt}from"../chunks/DPSufgcr.js";function lt(r){let e;const t=r[2].default,l=ze(t,r,r[3],null);return{c(){l&&l.c()},l(o){l&&l.l(o)},m(o,a){l&&l.m(o,a),e=!0},p(o,a){l&&l.p&&(!e||a&8)&&Fe(l,t,o,o[3],e?He(t,o[3],a,null):Oe(o[3]),null)},i(o){e||(R(l,o),e=!0)},o(o){Q(l,o),e=!1},d(o){l&&l.d(o)}}}function at(r){let e,t;const l=[{name:"building-2"},r[1],{iconNode:r[0]}];let o={$$slots:{default:[lt]},$$scope:{ctx:r}};for(let a=0;a<l.length;a+=1)o=we(o,l[a]);return e=new et({props:o}),{c(){pe(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,u){ue(e,a,u),t=!0},p(a,[u]){const d=u&3?We(l,[l[0],u&2&&Ye(a[1]),u&1&&{iconNode:a[0]}]):{};u&8&&(d.$$scope={dirty:u,ctx:a}),e.$set(d)},i(a){t||(R(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){ie(e,a)}}}function st(r,e,t){let{$$slots:l={},$$scope:o}=e;const a=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"}],["path",{d:"M10 6h4"}],["path",{d:"M10 10h4"}],["path",{d:"M10 14h4"}],["path",{d:"M10 18h4"}]];return r.$$set=u=>{t(1,e=we(we({},e),xe(u))),"$$scope"in u&&t(3,o=u.$$scope)},e=xe(e),[a,e,l,o]}class nt extends Xe{constructor(e){super(),qe(this,e,st,at,je,{})}}const rt=()=>({}),Et=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"}));function Le(r){let e,t,l,o,a,u;return{c(){e=f("div"),t=Me("svg"),l=Me("path"),o=y(),a=f("span"),u=Ue(r[3]),this.h()},l(d){e=p(d,"DIV",{class:!0});var i=h(e);t=De(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var _=h(t);l=De(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(l).forEach(m),_.forEach(m),o=E(i),a=p(i,"SPAN",{});var g=h(a);u=Be(g,r[3]),g.forEach(m),i.forEach(m),this.h()},h(){n(l,"stroke-linecap","round"),n(l,"stroke-linejoin","round"),n(l,"stroke-width","2"),n(l,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),n(t,"xmlns","http://www.w3.org/2000/svg"),n(t,"class","h-6 w-6 shrink-0 stroke-current"),n(t,"fill","none"),n(t,"viewBox","0 0 24 24"),n(e,"class","alert alert-error mb-6")},m(d,i){$e(d,e,i),s(e,t),s(t,l),s(e,o),s(e,a),s(a,u)},p(d,i){i&8&&Ge(u,d[3])},d(d){d&&m(e)}}}function Te(r){let e;return{c(){e=f("span"),this.h()},l(t){e=p(t,"SPAN",{class:!0}),h(e).forEach(m),this.h()},h(){n(e,"class","loading loading-spinner")},m(t,l){$e(t,e,l)},d(t){t&&m(e)}}}function ot(r){let e,t,l,o='<h1 class="mb-4 text-5xl font-bold text-base-content">Farm Details</h1> <p class="text-xl text-base-content/70">Tell us about your operation</p>',a,u,d,i,_,g,D,K,M,W="Full Name",Z,w,$,k,P,j,fe,B,ke="Company/Farm Name",de,N,me,V,A,U,he,X,Ne="Mobile Number",_e,I,be,z,L,T,ge,q,Ie="I agree to be contacted for setup assistance and important updates",ve,S,Y,ee,G,Ee,Se,b=r[3]&&Le(r);D=new Re({props:{size:18,class:"text-base-content/70"}}),j=new nt({props:{size:18,class:"text-base-content/70"}}),U=new tt({props:{size:18,class:"text-base-content/70"}});let v=r[5]&&Te();return{c(){e=f("div"),t=f("div"),l=f("div"),l.innerHTML=o,a=y(),b&&b.c(),u=y(),d=f("div"),i=f("div"),_=f("div"),g=f("label"),pe(D.$$.fragment),K=y(),M=f("span"),M.textContent=W,Z=y(),w=f("input"),$=y(),k=f("div"),P=f("label"),pe(j.$$.fragment),fe=y(),B=f("span"),B.textContent=ke,de=y(),N=f("input"),me=y(),V=f("div"),A=f("label"),pe(U.$$.fragment),he=y(),X=f("span"),X.textContent=Ne,_e=y(),I=f("input"),be=y(),z=f("div"),L=f("label"),T=f("input"),ge=y(),q=f("span"),q.textContent=Ie,ve=y(),S=f("button"),v&&v.c(),Y=Ue(`\r
          Continue to Map Setup`),this.h()},l(c){e=p(c,"DIV",{class:!0});var C=h(e);t=p(C,"DIV",{class:!0});var F=h(t);l=p(F,"DIV",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-vz9j3r"&&(l.innerHTML=o),a=E(F),b&&b.l(F),u=E(F),d=p(F,"DIV",{class:!0});var Ce=h(d);i=p(Ce,"DIV",{class:!0});var x=h(i);_=p(x,"DIV",{class:!0});var te=h(_);g=p(te,"LABEL",{class:!0});var le=h(g);ce(D.$$.fragment,le),K=E(le),M=p(le,"SPAN",{class:!0,"data-svelte-h":!0}),J(M)!=="svelte-8nvrpr"&&(M.textContent=W),le.forEach(m),Z=E(te),w=p(te,"INPUT",{type:!0,placeholder:!0,class:!0}),te.forEach(m),$=E(x),k=p(x,"DIV",{class:!0});var ae=h(k);P=p(ae,"LABEL",{class:!0});var se=h(P);ce(j.$$.fragment,se),fe=E(se),B=p(se,"SPAN",{class:!0,"data-svelte-h":!0}),J(B)!=="svelte-7sy78g"&&(B.textContent=ke),se.forEach(m),de=E(ae),N=p(ae,"INPUT",{type:!0,placeholder:!0,class:!0}),ae.forEach(m),me=E(x),V=p(x,"DIV",{class:!0});var ne=h(V);A=p(ne,"LABEL",{class:!0});var re=h(A);ce(U.$$.fragment,re),he=E(re),X=p(re,"SPAN",{class:!0,"data-svelte-h":!0}),J(X)!=="svelte-1gejwx0"&&(X.textContent=Ne),re.forEach(m),_e=E(ne),I=p(ne,"INPUT",{type:!0,placeholder:!0,class:!0}),ne.forEach(m),be=E(x),z=p(x,"DIV",{class:!0});var Pe=h(z);L=p(Pe,"LABEL",{class:!0});var oe=h(L);T=p(oe,"INPUT",{type:!0,class:!0}),ge=E(oe),q=p(oe,"SPAN",{class:!0,"data-svelte-h":!0}),J(q)!=="svelte-a47vvs"&&(q.textContent=Ie),oe.forEach(m),Pe.forEach(m),ve=E(x),S=p(x,"BUTTON",{class:!0});var ye=h(S);v&&v.l(ye),Y=Be(ye,`\r
          Continue to Map Setup`),ye.forEach(m),x.forEach(m),Ce.forEach(m),F.forEach(m),C.forEach(m),this.h()},h(){n(l,"class","mb-16 text-center"),n(M,"class","label-text"),n(g,"class","label items-center gap-2"),n(w,"type","text"),n(w,"placeholder","Enter your full name"),n(w,"class","input input-bordered w-full"),w.required=!0,n(_,"class","form-control mb-6"),n(B,"class","label-text"),n(P,"class","label items-center gap-2"),n(N,"type","text"),n(N,"placeholder","Enter your company name"),n(N,"class","input input-bordered w-full"),N.required=!0,n(k,"class","form-control mb-6"),n(X,"class","label-text"),n(A,"class","label items-center gap-2"),n(I,"type","tel"),n(I,"placeholder","04XX XXX XXX"),n(I,"class","input input-bordered w-full"),I.required=!0,n(V,"class","form-control mb-6"),n(T,"type","checkbox"),n(T,"class","checkbox checkbox-sm"),n(q,"class","label-text"),n(L,"class","label cursor-pointer justify-start gap-2"),n(z,"class","form-control mb-8"),n(S,"class","btn btn-primary w-full"),S.disabled=ee=!r[6]||r[5],n(i,"class","card-body"),n(d,"class","card bg-base-100 shadow-xl"),n(t,"class","mx-auto max-w-xl"),n(e,"class","min-h-screen bg-base-200 px-4 py-12")},m(c,C){$e(c,e,C),s(e,t),s(t,l),s(t,a),b&&b.m(t,null),s(t,u),s(t,d),s(d,i),s(i,_),s(_,g),ue(D,g,null),s(g,K),s(g,M),s(_,Z),s(_,w),O(w,r[0]),s(i,$),s(i,k),s(k,P),ue(j,P,null),s(P,fe),s(P,B),s(k,de),s(k,N),O(N,r[1]),s(i,me),s(i,V),s(V,A),ue(U,A,null),s(A,he),s(A,X),s(V,_e),s(V,I),O(I,r[2]),s(i,be),s(i,z),s(z,L),s(L,T),T.checked=r[4],s(L,ge),s(L,q),s(i,ve),s(i,S),v&&v.m(S,null),s(S,Y),G=!0,Ee||(Se=[H(w,"input",r[9]),H(N,"input",r[10]),H(I,"input",r[11]),H(I,"input",r[7]),H(T,"change",r[12]),H(S,"click",r[8])],Ee=!0)},p(c,[C]){c[3]?b?b.p(c,C):(b=Le(c),b.c(),b.m(t,u)):b&&(b.d(1),b=null),C&1&&w.value!==c[0]&&O(w,c[0]),C&2&&N.value!==c[1]&&O(N,c[1]),C&4&&O(I,c[2]),C&16&&(T.checked=c[4]),c[5]?v||(v=Te(),v.c(),v.m(S,Y)):v&&(v.d(1),v=null),(!G||C&96&&ee!==(ee=!c[6]||c[5]))&&(S.disabled=ee)},i(c){G||(R(D.$$.fragment,c),R(j.$$.fragment,c),R(U.$$.fragment,c),G=!0)},o(c){Q(D.$$.fragment,c),Q(j.$$.fragment,c),Q(U.$$.fragment,c),G=!1},d(c){c&&m(e),b&&b.d(),ie(D),ie(j),ie(U),v&&v.d(),Ee=!1,Ke(Se)}}}function it(r){const e=r.replace(/\D/g,"");return e.length<=4?e:e.length<=7?`${e.slice(0,4)} ${e.slice(4)}`:`${e.slice(0,4)} ${e.slice(4,7)} ${e.slice(7,10)}`}function ut(r,e,t){let l,o;Ze(r,Ve,$=>t(13,o=$));let a=null,u="",d="",i="",_=!0,g=!1;function D($){const k=$.target,P=it(k.value);t(2,i=P)}async function K(){if(!l){t(3,a="Please fill out all required fields");return}t(5,g=!0),t(3,a=null);try{const{error:$}=await Qe.from("profiles").update({full_name:u,company_name:d,mobile:i,contactable:_,role:"manager",onboarded:!0,updated_at:new Date().toISOString()}).eq("id",o.id);if($)throw $;Ve.update(k=>({...k,full_name:u,company_name:d,user_type:"manager"})),Ae.success("Setup completed successfully!"),Je("/account/user_survey")}catch($){console.error("Error:",$),t(3,a=$.message||"Failed to update profile"),Ae.error(a)}finally{t(5,g=!1)}}function M(){u=this.value,t(0,u)}function W(){d=this.value,t(1,d)}function Z(){i=this.value,t(2,i)}function w(){_=this.checked,t(4,_)}return r.$$.update=()=>{r.$$.dirty&7&&t(6,l=u.trim().length>0&&d.trim().length>0&&i.replace(/\D/g,"").length>=8&&i.replace(/\D/g,"").length<=10)},[u,d,i,a,_,g,l,D,K,M,W,Z,w]}class yt extends Xe{constructor(e){super(),qe(this,e,ut,ot,je,{})}}export{yt as component,Et as universal};
