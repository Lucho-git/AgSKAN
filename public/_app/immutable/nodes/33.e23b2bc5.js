import{s as J,a as L,e as m,t as q,w as z,x as Q,d as l,f as S,c as b,b as x,h as O,i as d,j as I,k as p,B as F,K as W,l as X,z as Y,g as G}from"../chunks/scheduler.0ff5556b.js";import{S as Z,i as ee,c as te,a as se,m as ae,t as ne,b as re,d as oe}from"../chunks/index.e3d1f712.js";import{A as ie,o as le,s as ce}from"../chunks/login_config.359ed4e4.js";import{p as ue}from"../chunks/stores.1e905000.js";import{a as de,b as pe}from"../chunks/sessionStore.a0feee67.js";import{s as fe}from"../chunks/authHelpers.f0dc33ba.js";function K(r){let e,a='<a class="px-5 py-2 transition-all duration-200 hover:border-b-2 hover:border-black hover:font-bold" href="/login/forgot_password">Forgot Password?</a>';return{c(){e=m("div"),e.innerHTML=a,this.h()},l(t){e=b(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1sw0qy6"&&(e.innerHTML=a),this.h()},h(){d(e,"class","mt-4 text-center")},m(t,n){I(t,e,n)},d(t){t&&l(e)}}}function R(r){let e,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Email verified! Please sign in.</span>';return{c(){e=m("div"),e.innerHTML=a,this.h()},l(t){e=b(t,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),G(e)!=="svelte-13on4c"&&(e.innerHTML=a),this.h()},h(){d(e,"role","alert"),d(e,"class","alert alert-success mt-5")},m(t,n){I(t,e,n)},d(t){t&&l(e)}}}function _e(r){let e,a,t,n,P,v,g,u,T,k,U,f,w,_,V,E,A=r[0].url.searchParams.get("verified")=="true",y,$,B,C;_=new ie({props:{supabaseClient:de,view:r[1],redirectTo:`${r[0].url.origin}/auth/callback?next=/account`,providers:le,socialLayout:"horizontal",showLinks:!1,appearance:ce}});let o=r[1]==="sign_in"&&K(),i=A&&R();return{c(){e=L(),a=m("div"),t=m("div"),n=m("button"),P=q("Sign In"),g=L(),u=m("button"),T=q("Sign Up"),U=L(),f=m("div"),w=m("div"),te(_.$$.fragment),V=L(),o&&o.c(),E=L(),i&&i.c(),y=z(),this.h()},l(s){Q("svelte-1wvh9q6",document.head).forEach(l),e=S(s),a=b(s,"DIV",{class:!0});var h=x(a);t=b(h,"DIV",{class:!0});var M=x(t);n=b(M,"BUTTON",{class:!0});var H=x(n);P=O(H,"Sign In"),H.forEach(l),g=S(M),u=b(M,"BUTTON",{class:!0});var N=x(u);T=O(N,"Sign Up"),N.forEach(l),M.forEach(l),U=S(h),f=b(h,"DIV",{class:!0});var D=x(f);w=b(D,"DIV",{class:!0});var j=x(w);se(_.$$.fragment,j),j.forEach(l),V=S(D),o&&o.l(D),D.forEach(l),h.forEach(l),E=S(s),i&&i.l(s),y=z(),this.h()},h(){document.title="Sign In / Sign Up",d(n,"class",v=`px-5 py-2 ${r[1]==="sign_in"?"border-b-2 border-black font-bold":""}`),d(u,"class",k=`px-5 py-2 ${r[1]==="sign_up"?"border-b-2 border-black font-bold":""}`),d(t,"class","mb-5 flex justify-around"),d(w,"class","auth-wrapper"),d(f,"class","rounded-lg border border-gray-300 p-5"),d(a,"class","mx-auto w-full max-w-2xl")},m(s,c){I(s,e,c),I(s,a,c),p(a,t),p(t,n),p(n,P),p(t,g),p(t,u),p(u,T),p(a,U),p(a,f),p(f,w),ae(_,w,null),p(f,V),o&&o.m(f,null),I(s,E,c),i&&i.m(s,c),I(s,y,c),$=!0,B||(C=[F(n,"click",r[2]),F(u,"click",r[3])],B=!0)},p(s,[c]){(!$||c&2&&v!==(v=`px-5 py-2 ${s[1]==="sign_in"?"border-b-2 border-black font-bold":""}`))&&d(n,"class",v),(!$||c&2&&k!==(k=`px-5 py-2 ${s[1]==="sign_up"?"border-b-2 border-black font-bold":""}`))&&d(u,"class",k);const h={};c&2&&(h.view=s[1]),c&1&&(h.redirectTo=`${s[0].url.origin}/auth/callback?next=/account`),_.$set(h),s[1]==="sign_in"?o||(o=K(),o.c(),o.m(f,null)):o&&(o.d(1),o=null),c&1&&(A=s[0].url.searchParams.get("verified")=="true"),A?i||(i=R(),i.c(),i.m(y.parentNode,y)):i&&(i.d(1),i=null)},i(s){$||(ne(_.$$.fragment,s),$=!0)},o(s){re(_.$$.fragment,s),$=!1},d(s){s&&(l(e),l(a),l(E),l(y)),oe(_),o&&o.d(),i&&i.d(s),B=!1,W(C)}}}function he(r,e,a){let t,n;X(r,ue,g=>a(0,n=g)),Y(()=>{{console.log("Login page mounted");const u=new URLSearchParams(window.location.search).get("map_id");u&&pe(u);const{data:{subscription:T},checkNow:k}=fe("/account");return k(),()=>{T.unsubscribe()}}});const P=()=>a(1,t="sign_in"),v=()=>a(1,t="sign_up");return r.$$.update=()=>{r.$$.dirty&1&&a(1,t=n.url.searchParams.get("tab")==="sign_up"?"sign_up":"sign_in")},[n,t,P,v]}class ye extends Z{constructor(e){super(),ee(this,e,he,_e,J,{})}}export{ye as component};
