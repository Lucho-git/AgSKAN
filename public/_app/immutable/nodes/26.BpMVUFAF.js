import{s as fe,r as X,v as x,m as me,u as pe,o as ge,p as ve,d as v,G as Be,b as u,i as te,a as f,A as ie,c as k,e as E,g as _e,f as H,h as oe,j as w,k as B,t as se,l as Oe,q as qe,E as Ce,F as Me,X as Z,a3 as Re,K as We,U as Ge,a4 as Le}from"../chunks/Bqk-ehBx.js";import{S as ue,i as de,d as W,t as j,a as N,m as G,c as ee,b as K,e as re,g as ne}from"../chunks/BSIXs_Xe.js";import{e as ce}from"../chunks/3VE9X77f.js";import{g as Ve}from"../chunks/DwAXOYQ9.js";import{a as Ke}from"../chunks/DsDOFx4q.js";import{p as De}from"../chunks/BRXscziQ.js";import{t as Xe}from"../chunks/7sStqI9Q.js";import{M as Ye}from"../chunks/7OVCJ1Hg.js";import{g as be,a as $e}from"../chunks/CgU5AtxT.js";import{I as ke}from"../chunks/nF2i7bx_.js";import{U as Je}from"../chunks/pimC7tDU.js";import{N as Qe}from"../chunks/CGeGZ_fa.js";function Ze(o){let e;const r=o[2].default,t=me(r,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&8)&&pe(t,r,n,n[3],e?ve(r,n[3],l,null):ge(n[3]),null)},i(n){e||(N(t,n),e=!0)},o(n){j(t,n),e=!1},d(n){t&&t.d(n)}}}function xe(o){let e,r;const t=[{name:"clipboard-check"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Ze]},$$scope:{ctx:o}};for(let l=0;l<t.length;l+=1)n=X(n,t[l]);return e=new ke({props:n}),{c(){K(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){G(e,l,s),r=!0},p(l,[s]){const c=s&3?be(t,[t[0],s&2&&$e(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),r=!1},d(l){W(e,l)}}}function et(o,e,r){let{$$slots:t={},$$scope:n}=e;const l=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"m9 14 2 2 4-4"}]];return o.$$set=s=>{r(1,e=X(X({},e),x(s))),"$$scope"in s&&r(3,n=s.$$scope)},e=x(e),[l,e,t,n]}class tt extends ue{constructor(e){super(),de(this,e,et,xe,fe,{})}}function lt(o){let e;const r=o[2].default,t=me(r,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&8)&&pe(t,r,n,n[3],e?ve(r,n[3],l,null):ge(n[3]),null)},i(n){e||(N(t,n),e=!0)},o(n){j(t,n),e=!1},d(n){t&&t.d(n)}}}function rt(o){let e,r;const t=[{name:"tractor"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[lt]},$$scope:{ctx:o}};for(let l=0;l<t.length;l+=1)n=X(n,t[l]);return e=new ke({props:n}),{c(){K(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){G(e,l,s),r=!0},p(l,[s]){const c=s&3?be(t,[t[0],s&2&&$e(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),r=!1},d(l){W(e,l)}}}function nt(o,e,r){let{$$slots:t={},$$scope:n}=e;const l=[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20"}],["path",{d:"M16 18h-5"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246"}],["path",{d:"M4 11V4"}],["path",{d:"M7 15h.01"}],["path",{d:"M8 10.1V4"}],["circle",{cx:"18",cy:"18",r:"2"}],["circle",{cx:"7",cy:"15",r:"5"}]];return o.$$set=s=>{r(1,e=X(X({},e),x(s))),"$$scope"in s&&r(3,n=s.$$scope)},e=x(e),[l,e,t,n]}class ot extends ue{constructor(e){super(),de(this,e,nt,rt,fe,{})}}function st(o){let e;const r=o[2].default,t=me(r,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&8)&&pe(t,r,n,n[3],e?ve(r,n[3],l,null):ge(n[3]),null)},i(n){e||(N(t,n),e=!0)},o(n){j(t,n),e=!1},d(n){t&&t.d(n)}}}function at(o){let e,r;const t=[{name:"user-plus"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[st]},$$scope:{ctx:o}};for(let l=0;l<t.length;l+=1)n=X(n,t[l]);return e=new ke({props:n}),{c(){K(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){G(e,l,s),r=!0},p(l,[s]){const c=s&3?be(t,[t[0],s&2&&$e(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),r=!1},d(l){W(e,l)}}}function it(o,e,r){let{$$slots:t={},$$scope:n}=e;const l=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];return o.$$set=s=>{r(1,e=X(X({},e),x(s))),"$$scope"in s&&r(3,n=s.$$scope)},e=x(e),[l,e,t,n]}class ct extends ue{constructor(e){super(),de(this,e,it,at,fe,{})}}const ft=()=>({}),It=Object.freeze(Object.defineProperty({__proto__:null,load:ft},Symbol.toStringTag,{value:"Module"}));function Ne(o,e,r){const t=o.slice();return t[11]=e[r],t}function Se(o,e,r){const t=o.slice();return t[14]=e[r],t}function je(o){let e,r,t,n,l,s;return{c(){e=w("div"),r=Me("svg"),t=Me("path"),n=B(),l=w("span"),s=se(o[1]),this.h()},l(c){e=k(c,"DIV",{class:!0});var a=E(e);r=Ce(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var S=E(r);t=Ce(S,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),E(t).forEach(v),S.forEach(v),n=H(a),l=k(a,"SPAN",{});var i=E(l);s=oe(i,o[1]),i.forEach(v),a.forEach(v),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),u(r,"xmlns","http://www.w3.org/2000/svg"),u(r,"class","h-6 w-6 shrink-0 stroke-current"),u(r,"fill","none"),u(r,"viewBox","0 0 24 24"),u(e,"class","alert alert-error mb-6")},m(c,a){te(c,e,a),f(e,r),f(r,t),f(e,n),f(e,l),f(l,s)},p(c,a){a&2&&qe(s,c[1])},d(c){c&&v(e)}}}function Te(o){let e,r,t,n,l,s=o[14].text+"",c,a,S;var i=o[14].icon;function I(b,D){return{props:{size:32}}}return i&&(t=Z(i,I())),{c(){e=w("div"),r=w("div"),t&&K(t.$$.fragment),n=B(),l=w("span"),c=se(s),a=B(),this.h()},l(b){e=k(b,"DIV",{class:!0});var D=E(e);r=k(D,"DIV",{class:!0});var $=E(r);t&&ee(t.$$.fragment,$),$.forEach(v),n=H(D),l=k(D,"SPAN",{class:!0});var T=E(l);c=oe(T,s),T.forEach(v),a=H(D),D.forEach(v),this.h()},h(){u(r,"class",Le(`${o[11].iconColor} mb-2`)+" svelte-1ul6ogj"),u(l,"class","text-sm"),u(e,"class","text-center")},m(b,D){te(b,e,D),f(e,r),t&&G(t,r,null),f(e,n),f(e,l),f(l,c),f(e,a),S=!0},p(b,D){if(i!==(i=b[14].icon)){if(t){ne();const $=t;j($.$$.fragment,1,0,()=>{W($,1)}),re()}i?(t=Z(i,I()),K(t.$$.fragment),N(t.$$.fragment,1),G(t,r,null)):t=null}},i(b){S||(t&&N(t.$$.fragment,b),S=!0)},o(b){t&&j(t.$$.fragment,b),S=!1},d(b){b&&v(e),t&&W(t)}}}function Pe(o){let e,r='<div class="badge badge-primary badge-lg p-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>';return{c(){e=w("div"),e.innerHTML=r,this.h()},l(t){e=k(t,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-1hgfm9s"&&(e.innerHTML=r),this.h()},h(){u(e,"class","scale-in-center absolute right-4 top-4 svelte-1ul6ogj")},m(t,n){te(t,e,n)},d(t){t&&v(e)}}}function ze(o){let e,r,t,n,l,s,c,a,S,i,I,b,D=o[11].title+"",$,T,z,le=o[11].description+"",F,Y,O,M,U,p,J,V,d,C;var h=o[11].Icon;function q(_,y){return{props:{size:80,strokeWidth:1.5}}}h&&(a=Z(h,q()));var R=o[11].Icon;function Q(_,y){return{props:{size:80,strokeWidth:1.5}}}R&&(i=Z(R,Q()));let A=ce(o[11].features),g=[];for(let _=0;_<A.length;_+=1)g[_]=Te(Se(o,A,_));const Ue=_=>j(g[_],1,1,()=>{g[_]=null});let P=o[0]===o[11].id&&Pe();function Ae(){return o[7](o[11])}function Fe(..._){return o[8](o[11],..._)}return V=Re(o[6][0]),{c(){e=w("div"),r=w("input"),t=B(),n=w("div"),l=w("div"),s=w("div"),c=w("div"),a&&K(a.$$.fragment),S=B(),i&&K(i.$$.fragment),I=B(),b=w("h2"),$=se(D),T=B(),z=w("p"),F=se(le),Y=B(),O=w("div");for(let _=0;_<g.length;_+=1)g[_].c();M=B(),P&&P.c(),p=B(),this.h()},l(_){e=k(_,"DIV",{class:!0,role:!0,tabindex:!0});var y=E(e);r=k(y,"INPUT",{type:!0,id:!0,name:!0,class:!0}),t=H(y),n=k(y,"DIV",{class:!0});var m=E(n);l=k(m,"DIV",{class:!0});var L=E(l);s=k(L,"DIV",{class:!0});var ae=E(s);c=k(ae,"DIV",{class:!0});var we=E(c);a&&ee(a.$$.fragment,we),we.forEach(v),S=H(ae),i&&ee(i.$$.fragment,ae),ae.forEach(v),I=H(L),b=k(L,"H2",{class:!0});var ye=E(b);$=oe(ye,D),ye.forEach(v),T=H(L),z=k(L,"P",{class:!0});var Ee=E(z);F=oe(Ee,le),Ee.forEach(v),Y=H(L),O=k(L,"DIV",{class:!0});var Ie=E(O);for(let he=0;he<g.length;he+=1)g[he].l(Ie);Ie.forEach(v),M=H(L),P&&P.l(L),L.forEach(v),m.forEach(v),p=H(y),y.forEach(v),this.h()},h(){u(r,"type","radio"),u(r,"id",o[11].id),u(r,"name","role"),r.__value=o[11].id,Ge(r,r.__value),u(r,"class","hidden"),u(c,"class","absolute inset-0 scale-150 opacity-30 blur-xl"),u(s,"class",Le(`${o[11].iconColor} relative mb-6`)+" svelte-1ul6ogj"),u(b,"class","card-title mb-2 text-3xl"),u(z,"class","mb-6 text-lg text-base-content/70"),u(O,"class","flex justify-center gap-8"),u(l,"class","card-body relative z-10 items-center p-8 text-center"),u(n,"class",U="card relative cursor-pointer overflow-hidden border-2 bg-base-100 shadow-xl transition-all hover:scale-105 "+o[11].color+" "+o[11].borderColor+" "+o[11].cardStyle+" "+(o[0]===o[11].id?"ring-0 ring-offset-4":"")+" svelte-1ul6ogj"),u(e,"class","transition-all duration-200"),u(e,"role","button"),u(e,"tabindex","0"),V.p(r)},m(_,y){te(_,e,y),f(e,r),r.checked=r.__value===o[0],f(e,t),f(e,n),f(n,l),f(l,s),f(s,c),a&&G(a,c,null),f(s,S),i&&G(i,s,null),f(l,I),f(l,b),f(b,$),f(l,T),f(l,z),f(z,F),f(l,Y),f(l,O);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(O,null);f(l,M),P&&P.m(l,null),f(e,p),J=!0,d||(C=[ie(r,"change",o[5]),ie(e,"click",Ae),ie(e,"keydown",Fe)],d=!0)},p(_,y){if(o=_,y&1&&(r.checked=r.__value===o[0]),h!==(h=o[11].Icon)){if(a){ne();const m=a;j(m.$$.fragment,1,0,()=>{W(m,1)}),re()}h?(a=Z(h,q()),K(a.$$.fragment),N(a.$$.fragment,1),G(a,c,null)):a=null}if(R!==(R=o[11].Icon)){if(i){ne();const m=i;j(m.$$.fragment,1,0,()=>{W(m,1)}),re()}R?(i=Z(R,Q()),K(i.$$.fragment),N(i.$$.fragment,1),G(i,s,null)):i=null}if(y&8){A=ce(o[11].features);let m;for(m=0;m<A.length;m+=1){const L=Se(o,A,m);g[m]?(g[m].p(L,y),N(g[m],1)):(g[m]=Te(L),g[m].c(),N(g[m],1),g[m].m(O,null))}for(ne(),m=A.length;m<g.length;m+=1)Ue(m);re()}o[0]===o[11].id?P||(P=Pe(),P.c(),P.m(l,null)):P&&(P.d(1),P=null),(!J||y&1&&U!==(U="card relative cursor-pointer overflow-hidden border-2 bg-base-100 shadow-xl transition-all hover:scale-105 "+o[11].color+" "+o[11].borderColor+" "+o[11].cardStyle+" "+(o[0]===o[11].id?"ring-0 ring-offset-4":"")+" svelte-1ul6ogj"))&&u(n,"class",U)},i(_){if(!J){a&&N(a.$$.fragment,_),i&&N(i.$$.fragment,_);for(let y=0;y<A.length;y+=1)N(g[y]);J=!0}},o(_){a&&j(a.$$.fragment,_),i&&j(i.$$.fragment,_),g=g.filter(Boolean);for(let y=0;y<g.length;y+=1)j(g[y]);J=!1},d(_){_&&v(e),a&&W(a),i&&W(i),Be(g,_),P&&P.d(),V.r(),d=!1,We(C)}}}function He(o){let e;return{c(){e=w("span"),this.h()},l(r){e=k(r,"SPAN",{class:!0}),E(e).forEach(v),this.h()},h(){u(e,"class","loading loading-spinner")},m(r,t){te(r,e,t)},d(r){r&&v(e)}}}function ut(o){let e,r,t,n='<h1 class="mb-4 text-5xl font-bold text-base-content">Choose Your Role</h1>',l,s,c,a,S,i,I,b,D,$,T,z,le=`Don't worry - you can access all features regardless of your role\r
          selection`,F,Y,O,M=o[1]&&je(o),U=ce(o[3]),p=[];for(let d=0;d<U.length;d+=1)p[d]=ze(Ne(o,U,d));const J=d=>j(p[d],1,1,()=>{p[d]=null});let V=o[2]&&He();return{c(){e=w("div"),r=w("div"),t=w("div"),t.innerHTML=n,l=B(),M&&M.c(),s=B(),c=w("div"),a=w("div");for(let d=0;d<p.length;d+=1)p[d].c();S=B(),i=w("div"),I=w("button"),V&&V.c(),b=se(`\r
          Continue`),T=B(),z=w("p"),z.textContent=le,this.h()},l(d){e=k(d,"DIV",{class:!0});var C=E(e);r=k(C,"DIV",{class:!0});var h=E(r);t=k(h,"DIV",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-z1vtzy"&&(t.innerHTML=n),l=H(h),M&&M.l(h),s=H(h),c=k(h,"DIV",{});var q=E(c);a=k(q,"DIV",{class:!0});var R=E(a);for(let g=0;g<p.length;g+=1)p[g].l(R);R.forEach(v),S=H(q),i=k(q,"DIV",{class:!0});var Q=E(i);I=k(Q,"BUTTON",{class:!0});var A=E(I);V&&V.l(A),b=oe(A,`\r
          Continue`),A.forEach(v),T=H(Q),z=k(Q,"P",{class:!0,"data-svelte-h":!0}),_e(z)!=="svelte-ig222v"&&(z.textContent=le),Q.forEach(v),q.forEach(v),h.forEach(v),C.forEach(v),this.h()},h(){u(t,"class","mb-16 text-center"),u(a,"class","grid gap-8 md:grid-cols-2"),u(I,"class",D="btn btn-primary btn-lg px-12 text-lg "+(!o[0]||o[2]?"btn-disabled":"")),I.disabled=$=!o[0]||o[2],u(z,"class","mt-6 text-sm italic text-base-content/50"),u(i,"class","mt-12 text-center"),u(r,"class","mx-auto max-w-4xl"),u(e,"class","min-h-screen bg-base-200 px-4 py-12")},m(d,C){te(d,e,C),f(e,r),f(r,t),f(r,l),M&&M.m(r,null),f(r,s),f(r,c),f(c,a);for(let h=0;h<p.length;h+=1)p[h]&&p[h].m(a,null);f(c,S),f(c,i),f(i,I),V&&V.m(I,null),f(I,b),f(i,T),f(i,z),F=!0,Y||(O=ie(I,"click",o[4]),Y=!0)},p(d,[C]){if(d[1]?M?M.p(d,C):(M=je(d),M.c(),M.m(r,s)):M&&(M.d(1),M=null),C&9){U=ce(d[3]);let h;for(h=0;h<U.length;h+=1){const q=Ne(d,U,h);p[h]?(p[h].p(q,C),N(p[h],1)):(p[h]=ze(q),p[h].c(),N(p[h],1),p[h].m(a,null))}for(ne(),h=U.length;h<p.length;h+=1)J(h);re()}d[2]?V||(V=He(),V.c(),V.m(I,b)):V&&(V.d(1),V=null),(!F||C&5&&D!==(D="btn btn-primary btn-lg px-12 text-lg "+(!d[0]||d[2]?"btn-disabled":"")))&&u(I,"class",D),(!F||C&5&&$!==($=!d[0]||d[2]))&&(I.disabled=$)},i(d){if(!F){for(let C=0;C<U.length;C+=1)N(p[C]);F=!0}},o(d){p=p.filter(Boolean);for(let C=0;C<p.length;C+=1)j(p[C]);F=!1},d(d){d&&v(e),M&&M.d(),Be(p,d),V&&V.d(),Y=!1,O()}}}function dt(o,e,r){let t;Oe(o,De,$=>r(9,t=$));let n=null,l=null,s=!1;const c=[{color:"bg-gradient-to-br from-info/10 to-info/20",borderColor:"border-info/30",iconColor:"text-info",cardStyle:"after:absolute after:inset-0 after:bg-info/5 after:opacity-40 after:rounded-box hover:after:opacity-60 after:transition-opacity"},{color:"bg-gradient-to-br from-warning/10 to-warning/20",borderColor:"border-warning/30",iconColor:"text-warning",cardStyle:"after:absolute after:inset-0 after:bg-warning/5 after:opacity-40 after:rounded-box hover:after:opacity-60 after:transition-opacity"}],a=[{id:"manager",title:"Farm Manager",Icon:Je,description:"Create and oversee farm operations",...c[0],features:[{text:"Manage Maps",icon:Ye},{text:"Team Control",icon:ct}]},{id:"operator",title:"Field Operator",Icon:ot,description:"Execute field operations",...c[1],features:[{text:"View Tasks",icon:tt},{text:"Track Progress",icon:Qe}]}];async function S(){if(!n){r(1,l="Please select a role");return}r(2,s=!0),r(1,l=null);try{const{error:$}=await Ke.from("profiles").update({role:n}).eq("id",t.id);if($)throw $;De.update(T=>({...T,user_type:n})),n==="operator"?Ve("/account/join_map"):n==="manager"&&Ve("/account/onboard_manager")}catch($){console.error("Error:",$),r(1,l="Failed to update role"),Xe.error(l)}finally{r(2,s=!1)}}const i=[[]];function I(){n=this.__value,r(0,n)}return[n,l,s,a,S,I,i,$=>r(0,n=$.id),($,T)=>{(T.key==="Enter"||T.key===" ")&&r(0,n=$.id)}]}class Ct extends ue{constructor(e){super(),de(this,e,dt,ut,fe,{})}}export{Ct as component,It as universal};
