import{s as H,d as _,i as b,b as P,w as T,f as w,c as V,g as x,x as N,k as S,j as $,l as k,y as D,z as E,n as h}from"../chunks/Bqk-ehBx.js";import{S as M,i as j,t as y,a as g,e as L,d as U,m as W,c as q,b as z,g as A}from"../chunks/BSIXs_Xe.js";import{s as B}from"../chunks/DsDOFx4q.js";import{p as C}from"../chunks/BRXscziQ.js";import{g as v}from"../chunks/BiA4Ub6q.js";import{u as I}from"../chunks/DXkjmLxB.js";import{S as F}from"../chunks/BaQY6ctr.js";function G(i){var s,c,o;let t,n;return t=new F({props:{editable:!0,title:"Edit Profile",successTitle:"Profile Updated",successBody:"Your profile has been updated successfully.",apiHandler:i[2],fields:[{id:"fullName",label:"Name",initialValue:((s=i[1])==null?void 0:s.full_name)??"",placeholder:"Your full name"},{id:"companyName",label:"Company Name",initialValue:((c=i[1])==null?void 0:c.company_name)??"",placeholder:"Your company name"},{id:"website",label:"Company Website",initialValue:((o=i[1])==null?void 0:o.website)??"",placeholder:"https://example.com"}]}}),t.$on("success",i[3]),{c(){z(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,r){W(t,e,r),n=!0},p(e,r){var d,l,p;const u={};r&2&&(u.fields=[{id:"fullName",label:"Name",initialValue:((d=e[1])==null?void 0:d.full_name)??"",placeholder:"Your full name"},{id:"companyName",label:"Company Name",initialValue:((l=e[1])==null?void 0:l.company_name)??"",placeholder:"Your company name"},{id:"website",label:"Company Website",initialValue:((p=e[1])==null?void 0:p.website)??"",placeholder:"https://example.com"}]),t.$set(u)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function J(i){let t,n='<div class="loading loading-spinner loading-lg"></div>';return{c(){t=$("div"),t.innerHTML=n,this.h()},l(s){t=V(s,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-asr66p"&&(t.innerHTML=n),this.h()},h(){P(t,"class","flex h-64 items-center justify-center")},m(s,c){b(s,t,c)},p:h,i:h,o:h,d(s){s&&_(t)}}}function K(i){let t,n,s="Settings",c,o,e,r,u;const d=[J,G],l=[];function p(a,m){return a[0]?0:1}return o=p(i),e=l[o]=d[o](i),{c(){t=S(),n=$("h1"),n.textContent=s,c=S(),e.c(),r=N(),this.h()},l(a){T("svelte-ewap0i",document.head).forEach(_),t=w(a),n=V(a,"H1",{class:!0,"data-svelte-h":!0}),x(n)!=="svelte-mlvd3d"&&(n.textContent=s),c=w(a),e.l(a),r=N(),this.h()},h(){document.title="Edit Profile",P(n,"class","mb-6 text-2xl font-bold")},m(a,m){b(a,t,m),b(a,n,m),b(a,c,m),l[o].m(a,m),b(a,r,m),u=!0},p(a,[m]){let f=o;o=p(a),o===f?l[o].p(a,m):(A(),y(l[f],1,1,()=>{l[f]=null}),L(),e=l[o],e?e.p(a,m):(e=l[o]=d[o](a),e.c()),g(e,1),e.m(r.parentNode,r))},i(a){u||(g(e),u=!0)},o(a){y(e),u=!1},d(a){a&&(_(t),_(n),_(c),_(r)),l[o].d(a)}}}function O(i,t,n){let s,c;k(i,C,l=>n(4,s=l)),k(i,B,l=>n(5,c=l)),D("adminSection").set("settings");let e=!0,r=null;E(async()=>{if(!c){v("/login");return}n(1,r=s),n(0,e=!1)});async function u(l){return await I.updateProfile(l.fullName,l.companyName,l.website)}function d(l){var a,m,f;const p=l.detail.data||{};if(s){const Y={...s,full_name:p.full_name||((a=l.detail.formData)==null?void 0:a.fullName)||s.full_name,company_name:p.company_name||((m=l.detail.formData)==null?void 0:m.companyName)||s.company_name,website:p.website||((f=l.detail.formData)==null?void 0:f.website)||s.website};C.set(Y)}setTimeout(()=>{v("/account/settings")},1500)}return[e,r,u,d]}class le extends M{constructor(t){super(),j(this,t,O,K,H,{})}}export{le as component};
