import{s as C,d as m,i as f,b as w,w as D,f as v,c as x,g as T,x as k,k as S,j as A,l as H,y as M,z as j,n as p}from"../chunks/scheduler.BVGjjnGO.js";import{S as P,i as B,t as h,a as g,e as E,d as L,m as V,c as Y,b as q,g as z}from"../chunks/index.Vv2yv23T.js";import{s as I}from"../chunks/sessionStore.rIZpZ3yf.js";import{g as $}from"../chunks/entry.BMnqIGFd.js";import{u as N}from"../chunks/userSettingsApi.TEb_rvKp.js";import{S as F}from"../chunks/settings_module.Dc9kTMrV.js";function G(l){let e,n;return e=new F({props:{editable:!0,dangerous:!0,title:"Delete Account",message:"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",successTitle:"Account Deleted",successBody:"Your account has been successfully deleted. You will be redirected to the home page.",saveButtonTitle:"Delete My Account",apiHandler:l[1],fields:[{id:"currentPassword",label:"Enter your password to confirm",initialValue:"",inputType:"password"}]}}),e.$on("success",l[2]),{c(){q(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,i){V(e,s,i),n=!0},p,i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){h(e.$$.fragment,s),n=!1},d(s){L(e,s)}}}function J(l){let e,n='<div class="loading loading-spinner loading-lg"></div>';return{c(){e=A("div"),e.innerHTML=n,this.h()},l(s){e=x(s,"DIV",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-asr66p"&&(e.innerHTML=n),this.h()},h(){w(e,"class","flex h-64 items-center justify-center")},m(s,i){f(s,e,i)},p,i:p,o:p,d(s){s&&m(e)}}}function K(l){let e,n,s="Settings",i,o,a,c,u;const b=[J,G],d=[];function y(t,r){return t[0]?0:1}return o=y(l),a=d[o]=b[o](l),{c(){e=S(),n=A("h1"),n.textContent=s,i=S(),a.c(),c=k(),this.h()},l(t){D("svelte-7jomat",document.head).forEach(m),e=v(t),n=x(t,"H1",{class:!0,"data-svelte-h":!0}),T(n)!=="svelte-mlvd3d"&&(n.textContent=s),i=v(t),a.l(t),c=k(),this.h()},h(){document.title="Delete Account",w(n,"class","mb-6 text-2xl font-bold")},m(t,r){f(t,e,r),f(t,n,r),f(t,i,r),d[o].m(t,r),f(t,c,r),u=!0},p(t,[r]){let _=o;o=y(t),o===_?d[o].p(t,r):(z(),h(d[_],1,1,()=>{d[_]=null}),E(),a=d[o],a?a.p(t,r):(a=d[o]=b[o](t),a.c()),g(a,1),a.m(c.parentNode,c))},i(t){u||(g(a),u=!0)},o(t){h(a),u=!1},d(t){t&&(m(e),m(n),m(i),m(c)),d[o].d(t)}}}function O(l,e,n){let s;H(l,I,u=>n(3,s=u)),M("adminSection").set("settings");let o=!0;j(()=>{if(!s){$("/login");return}n(0,o=!1)});async function a(u){return await N.deleteAccount(u.currentPassword)}function c(){setTimeout(()=>{$("/")},1500)}return[o,a,c]}class ee extends P{constructor(e){super(),B(this,e,O,K,C,{})}}export{ee as component};
