import{s as fe,r as X,v as x,m as me,u as pe,o as ge,p as ve,e as k,a as H,t as oe,c as w,b as E,g as he,f as B,d as v,h as se,i as u,j as te,k as f,B as ie,G as Be,l as qe,E as Ce,F as Me,q as Ae,X as Z,a5 as Re,U as We,a6 as Ue,K as Ge}from"../chunks/scheduler.78aa6f0d.js";import{S as ue,i as de,c as W,a as ee,m as G,t as N,b as j,d as K,e as re,g as ne}from"../chunks/index.9a12d9f3.js";import{e as ce}from"../chunks/each.13a24068.js";import{g as Ve}from"../chunks/navigation.dd464073.js";import{a as Ke}from"../chunks/sessionStore.4d48270f.js";import{p as De}from"../chunks/profileStore.16c3ff97.js";import{t as Xe}from"../chunks/Toaster.svelte_svelte_type_style_lang.006f4a9b.js";import{g as be,a as $e}from"../chunks/spread.8a54911c.js";import{I as ke}from"../chunks/Icon.78e39609.js";import{N as Ye}from"../chunks/navigation.a70a4775.js";import{U as Je}from"../chunks/users.05b20989.js";import{M as Qe}from"../chunks/map-pin.424a142c.js";function Ze(o){let e;const r=o[2].default,t=me(r,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&8)&&pe(t,r,n,n[3],e?ve(r,n[3],l,null):ge(n[3]),null)},i(n){e||(N(t,n),e=!0)},o(n){j(t,n),e=!1},d(n){t&&t.d(n)}}}function xe(o){let e,r;const t=[{name:"clipboard-check"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Ze]},$$scope:{ctx:o}};for(let l=0;l<t.length;l+=1)n=X(n,t[l]);return e=new ke({props:n}),{c(){W(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){G(e,l,s),r=!0},p(l,[s]){const c=s&3?be(t,[t[0],s&2&&$e(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),r=!1},d(l){K(e,l)}}}function et(o,e,r){let{$$slots:t={},$$scope:n}=e;const l=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"m9 14 2 2 4-4"}]];return o.$$set=s=>{r(1,e=X(X({},e),x(s))),"$$scope"in s&&r(3,n=s.$$scope)},e=x(e),[l,e,t,n]}class tt extends ue{constructor(e){super(),de(this,e,et,xe,fe,{})}}const lt=tt;function rt(o){let e;const r=o[2].default,t=me(r,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&8)&&pe(t,r,n,n[3],e?ve(r,n[3],l,null):ge(n[3]),null)},i(n){e||(N(t,n),e=!0)},o(n){j(t,n),e=!1},d(n){t&&t.d(n)}}}function nt(o){let e,r;const t=[{name:"tractor"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[rt]},$$scope:{ctx:o}};for(let l=0;l<t.length;l+=1)n=X(n,t[l]);return e=new ke({props:n}),{c(){W(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){G(e,l,s),r=!0},p(l,[s]){const c=s&3?be(t,[t[0],s&2&&$e(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),r=!1},d(l){K(e,l)}}}function ot(o,e,r){let{$$slots:t={},$$scope:n}=e;const l=[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20"}],["path",{d:"M16 18h-5"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246"}],["path",{d:"M4 11V4"}],["path",{d:"M7 15h.01"}],["path",{d:"M8 10.1V4"}],["circle",{cx:"18",cy:"18",r:"2"}],["circle",{cx:"7",cy:"15",r:"5"}]];return o.$$set=s=>{r(1,e=X(X({},e),x(s))),"$$scope"in s&&r(3,n=s.$$scope)},e=x(e),[l,e,t,n]}class st extends ue{constructor(e){super(),de(this,e,ot,nt,fe,{})}}const at=st;function it(o){let e;const r=o[2].default,t=me(r,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&8)&&pe(t,r,n,n[3],e?ve(r,n[3],l,null):ge(n[3]),null)},i(n){e||(N(t,n),e=!0)},o(n){j(t,n),e=!1},d(n){t&&t.d(n)}}}function ct(o){let e,r;const t=[{name:"user-plus"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[it]},$$scope:{ctx:o}};for(let l=0;l<t.length;l+=1)n=X(n,t[l]);return e=new ke({props:n}),{c(){W(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){G(e,l,s),r=!0},p(l,[s]){const c=s&3?be(t,[t[0],s&2&&$e(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){j(e.$$.fragment,l),r=!1},d(l){K(e,l)}}}function ft(o,e,r){let{$$slots:t={},$$scope:n}=e;const l=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];return o.$$set=s=>{r(1,e=X(X({},e),x(s))),"$$scope"in s&&r(3,n=s.$$scope)},e=x(e),[l,e,t,n]}class ut extends ue{constructor(e){super(),de(this,e,ft,ct,fe,{})}}const dt=ut,_t=()=>({}),Vt=Object.freeze(Object.defineProperty({__proto__:null,load:_t},Symbol.toStringTag,{value:"Module"}));function Ne(o,e,r){const t=o.slice();return t[11]=e[r],t}function Se(o,e,r){const t=o.slice();return t[14]=e[r],t}function je(o){let e,r,t,n,l,s;return{c(){e=k("div"),r=Ce("svg"),t=Ce("path"),n=H(),l=k("span"),s=oe(o[1]),this.h()},l(c){e=w(c,"DIV",{class:!0});var a=E(e);r=Me(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var S=E(r);t=Me(S,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),E(t).forEach(v),S.forEach(v),n=B(a),l=w(a,"SPAN",{});var i=E(l);s=se(i,o[1]),i.forEach(v),a.forEach(v),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),u(r,"xmlns","http://www.w3.org/2000/svg"),u(r,"class","h-6 w-6 shrink-0 stroke-current"),u(r,"fill","none"),u(r,"viewBox","0 0 24 24"),u(e,"class","alert alert-error mb-6")},m(c,a){te(c,e,a),f(e,r),f(r,t),f(e,n),f(e,l),f(l,s)},p(c,a){a&2&&Ae(s,c[1])},d(c){c&&v(e)}}}function Te(o){let e,r,t,n,l,s=o[14].text+"",c,a,S;var i=o[14].icon;function I(b,D){return{props:{size:32}}}return i&&(t=Z(i,I())),{c(){e=k("div"),r=k("div"),t&&W(t.$$.fragment),n=H(),l=k("span"),c=oe(s),a=H(),this.h()},l(b){e=w(b,"DIV",{class:!0});var D=E(e);r=w(D,"DIV",{class:!0});var $=E(r);t&&ee(t.$$.fragment,$),$.forEach(v),n=B(D),l=w(D,"SPAN",{class:!0});var T=E(l);c=se(T,s),T.forEach(v),a=B(D),D.forEach(v),this.h()},h(){u(r,"class",Ue(`${o[11].iconColor} mb-2`)+" svelte-1ul6ogj"),u(l,"class","text-sm"),u(e,"class","text-center")},m(b,D){te(b,e,D),f(e,r),t&&G(t,r,null),f(e,n),f(e,l),f(l,c),f(e,a),S=!0},p(b,D){if(i!==(i=b[14].icon)){if(t){ne();const $=t;j($.$$.fragment,1,0,()=>{K($,1)}),re()}i?(t=Z(i,I()),W(t.$$.fragment),N(t.$$.fragment,1),G(t,r,null)):t=null}},i(b){S||(t&&N(t.$$.fragment,b),S=!0)},o(b){t&&j(t.$$.fragment,b),S=!1},d(b){b&&v(e),t&&K(t)}}}function Pe(o){let e,r='<div class="badge badge-primary badge-lg p-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>';return{c(){e=k("div"),e.innerHTML=r,this.h()},l(t){e=w(t,"DIV",{class:!0,"data-svelte-h":!0}),he(e)!=="svelte-1hgfm9s"&&(e.innerHTML=r),this.h()},h(){u(e,"class","scale-in-center absolute right-4 top-4 svelte-1ul6ogj")},m(t,n){te(t,e,n)},d(t){t&&v(e)}}}function ze(o){let e,r,t,n,l,s,c,a,S,i,I,b,D=o[11].title+"",$,T,z,le=o[11].description+"",O,Y,q,M,L,p,J,V,d,C;var _=o[11].Icon;function A(h,y){return{props:{size:80,strokeWidth:1.5}}}_&&(a=Z(_,A()));var R=o[11].Icon;function Q(h,y){return{props:{size:80,strokeWidth:1.5}}}R&&(i=Z(R,Q()));let F=ce(o[11].features),g=[];for(let h=0;h<F.length;h+=1)g[h]=Te(Se(o,F,h));const Le=h=>j(g[h],1,1,()=>{g[h]=null});let P=o[0]===o[11].id&&Pe();function Fe(){return o[7](o[11])}function Oe(...h){return o[8](o[11],...h)}return V=Re(o[6][0]),{c(){e=k("div"),r=k("input"),t=H(),n=k("div"),l=k("div"),s=k("div"),c=k("div"),a&&W(a.$$.fragment),S=H(),i&&W(i.$$.fragment),I=H(),b=k("h2"),$=oe(D),T=H(),z=k("p"),O=oe(le),Y=H(),q=k("div");for(let h=0;h<g.length;h+=1)g[h].c();M=H(),P&&P.c(),p=H(),this.h()},l(h){e=w(h,"DIV",{class:!0,role:!0,tabindex:!0});var y=E(e);r=w(y,"INPUT",{type:!0,id:!0,name:!0,class:!0}),t=B(y),n=w(y,"DIV",{class:!0});var m=E(n);l=w(m,"DIV",{class:!0});var U=E(l);s=w(U,"DIV",{class:!0});var ae=E(s);c=w(ae,"DIV",{class:!0});var we=E(c);a&&ee(a.$$.fragment,we),we.forEach(v),S=B(ae),i&&ee(i.$$.fragment,ae),ae.forEach(v),I=B(U),b=w(U,"H2",{class:!0});var ye=E(b);$=se(ye,D),ye.forEach(v),T=B(U),z=w(U,"P",{class:!0});var Ee=E(z);O=se(Ee,le),Ee.forEach(v),Y=B(U),q=w(U,"DIV",{class:!0});var Ie=E(q);for(let _e=0;_e<g.length;_e+=1)g[_e].l(Ie);Ie.forEach(v),M=B(U),P&&P.l(U),U.forEach(v),m.forEach(v),p=B(y),y.forEach(v),this.h()},h(){u(r,"type","radio"),u(r,"id",o[11].id),u(r,"name","role"),r.__value=o[11].id,We(r,r.__value),u(r,"class","hidden"),u(c,"class","absolute inset-0 scale-150 opacity-30 blur-xl"),u(s,"class",Ue(`${o[11].iconColor} relative mb-6`)+" svelte-1ul6ogj"),u(b,"class","card-title mb-2 text-3xl"),u(z,"class","mb-6 text-lg text-base-content/70"),u(q,"class","flex justify-center gap-8"),u(l,"class","card-body relative z-10 items-center p-8 text-center"),u(n,"class",L="card relative cursor-pointer overflow-hidden border-2 bg-base-100 shadow-xl transition-all hover:scale-105 "+o[11].color+" "+o[11].borderColor+" "+o[11].cardStyle+" "+(o[0]===o[11].id?"ring-0 ring-offset-4":"")+" svelte-1ul6ogj"),u(e,"class","transition-all duration-200"),u(e,"role","button"),u(e,"tabindex","0"),V.p(r)},m(h,y){te(h,e,y),f(e,r),r.checked=r.__value===o[0],f(e,t),f(e,n),f(n,l),f(l,s),f(s,c),a&&G(a,c,null),f(s,S),i&&G(i,s,null),f(l,I),f(l,b),f(b,$),f(l,T),f(l,z),f(z,O),f(l,Y),f(l,q);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(q,null);f(l,M),P&&P.m(l,null),f(e,p),J=!0,d||(C=[ie(r,"change",o[5]),ie(e,"click",Fe),ie(e,"keydown",Oe)],d=!0)},p(h,y){if(o=h,y&1&&(r.checked=r.__value===o[0]),_!==(_=o[11].Icon)){if(a){ne();const m=a;j(m.$$.fragment,1,0,()=>{K(m,1)}),re()}_?(a=Z(_,A()),W(a.$$.fragment),N(a.$$.fragment,1),G(a,c,null)):a=null}if(R!==(R=o[11].Icon)){if(i){ne();const m=i;j(m.$$.fragment,1,0,()=>{K(m,1)}),re()}R?(i=Z(R,Q()),W(i.$$.fragment),N(i.$$.fragment,1),G(i,s,null)):i=null}if(y&8){F=ce(o[11].features);let m;for(m=0;m<F.length;m+=1){const U=Se(o,F,m);g[m]?(g[m].p(U,y),N(g[m],1)):(g[m]=Te(U),g[m].c(),N(g[m],1),g[m].m(q,null))}for(ne(),m=F.length;m<g.length;m+=1)Le(m);re()}o[0]===o[11].id?P||(P=Pe(),P.c(),P.m(l,null)):P&&(P.d(1),P=null),(!J||y&1&&L!==(L="card relative cursor-pointer overflow-hidden border-2 bg-base-100 shadow-xl transition-all hover:scale-105 "+o[11].color+" "+o[11].borderColor+" "+o[11].cardStyle+" "+(o[0]===o[11].id?"ring-0 ring-offset-4":"")+" svelte-1ul6ogj"))&&u(n,"class",L)},i(h){if(!J){a&&N(a.$$.fragment,h),i&&N(i.$$.fragment,h);for(let y=0;y<F.length;y+=1)N(g[y]);J=!0}},o(h){a&&j(a.$$.fragment,h),i&&j(i.$$.fragment,h),g=g.filter(Boolean);for(let y=0;y<g.length;y+=1)j(g[y]);J=!1},d(h){h&&v(e),a&&K(a),i&&K(i),Be(g,h),P&&P.d(),V.r(),d=!1,Ge(C)}}}function He(o){let e;return{c(){e=k("span"),this.h()},l(r){e=w(r,"SPAN",{class:!0}),E(e).forEach(v),this.h()},h(){u(e,"class","loading loading-spinner")},m(r,t){te(r,e,t)},d(r){r&&v(e)}}}function ht(o){let e,r,t,n='<h1 class="mb-4 text-5xl font-bold text-base-content">Choose Your Role</h1>',l,s,c,a,S,i,I,b,D,$,T,z,le=`Don't worry - you can access all features regardless of your role\r
          selection`,O,Y,q,M=o[1]&&je(o),L=ce(o[3]),p=[];for(let d=0;d<L.length;d+=1)p[d]=ze(Ne(o,L,d));const J=d=>j(p[d],1,1,()=>{p[d]=null});let V=o[2]&&He();return{c(){e=k("div"),r=k("div"),t=k("div"),t.innerHTML=n,l=H(),M&&M.c(),s=H(),c=k("div"),a=k("div");for(let d=0;d<p.length;d+=1)p[d].c();S=H(),i=k("div"),I=k("button"),V&&V.c(),b=oe(`\r
          Continue`),T=H(),z=k("p"),z.textContent=le,this.h()},l(d){e=w(d,"DIV",{class:!0});var C=E(e);r=w(C,"DIV",{class:!0});var _=E(r);t=w(_,"DIV",{class:!0,"data-svelte-h":!0}),he(t)!=="svelte-z1vtzy"&&(t.innerHTML=n),l=B(_),M&&M.l(_),s=B(_),c=w(_,"DIV",{});var A=E(c);a=w(A,"DIV",{class:!0});var R=E(a);for(let g=0;g<p.length;g+=1)p[g].l(R);R.forEach(v),S=B(A),i=w(A,"DIV",{class:!0});var Q=E(i);I=w(Q,"BUTTON",{class:!0});var F=E(I);V&&V.l(F),b=se(F,`\r
          Continue`),F.forEach(v),T=B(Q),z=w(Q,"P",{class:!0,"data-svelte-h":!0}),he(z)!=="svelte-ig222v"&&(z.textContent=le),Q.forEach(v),A.forEach(v),_.forEach(v),C.forEach(v),this.h()},h(){u(t,"class","mb-16 text-center"),u(a,"class","grid gap-8 md:grid-cols-2"),u(I,"class",D="btn btn-primary btn-lg px-12 text-lg "+(!o[0]||o[2]?"btn-disabled":"")),I.disabled=$=!o[0]||o[2],u(z,"class","mt-6 text-sm italic text-base-content/50"),u(i,"class","mt-12 text-center"),u(r,"class","mx-auto max-w-4xl"),u(e,"class","min-h-screen bg-base-200 px-4 py-12")},m(d,C){te(d,e,C),f(e,r),f(r,t),f(r,l),M&&M.m(r,null),f(r,s),f(r,c),f(c,a);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(a,null);f(c,S),f(c,i),f(i,I),V&&V.m(I,null),f(I,b),f(i,T),f(i,z),O=!0,Y||(q=ie(I,"click",o[4]),Y=!0)},p(d,[C]){if(d[1]?M?M.p(d,C):(M=je(d),M.c(),M.m(r,s)):M&&(M.d(1),M=null),C&9){L=ce(d[3]);let _;for(_=0;_<L.length;_+=1){const A=Ne(d,L,_);p[_]?(p[_].p(A,C),N(p[_],1)):(p[_]=ze(A),p[_].c(),N(p[_],1),p[_].m(a,null))}for(ne(),_=L.length;_<p.length;_+=1)J(_);re()}d[2]?V||(V=He(),V.c(),V.m(I,b)):V&&(V.d(1),V=null),(!O||C&5&&D!==(D="btn btn-primary btn-lg px-12 text-lg "+(!d[0]||d[2]?"btn-disabled":"")))&&u(I,"class",D),(!O||C&5&&$!==($=!d[0]||d[2]))&&(I.disabled=$)},i(d){if(!O){for(let C=0;C<L.length;C+=1)N(p[C]);O=!0}},o(d){p=p.filter(Boolean);for(let C=0;C<p.length;C+=1)j(p[C]);O=!1},d(d){d&&v(e),M&&M.d(),Be(p,d),V&&V.d(),Y=!1,q()}}}function mt(o,e,r){let t;qe(o,De,$=>r(9,t=$));let n=null,l=null,s=!1;const c=[{color:"bg-gradient-to-br from-info/10 to-info/20",borderColor:"border-info/30",iconColor:"text-info",cardStyle:"after:absolute after:inset-0 after:bg-info/5 after:opacity-40 after:rounded-box hover:after:opacity-60 after:transition-opacity"},{color:"bg-gradient-to-br from-warning/10 to-warning/20",borderColor:"border-warning/30",iconColor:"text-warning",cardStyle:"after:absolute after:inset-0 after:bg-warning/5 after:opacity-40 after:rounded-box hover:after:opacity-60 after:transition-opacity"}],a=[{id:"manager",title:"Farm Manager",Icon:Je,description:"Create and oversee farm operations",...c[0],features:[{text:"Manage Maps",icon:Qe},{text:"Team Control",icon:dt}]},{id:"operator",title:"Field Operator",Icon:at,description:"Execute field operations",...c[1],features:[{text:"View Tasks",icon:lt},{text:"Track Progress",icon:Ye}]}];async function S(){if(!n){r(1,l="Please select a role");return}r(2,s=!0),r(1,l=null);try{const{error:$}=await Ke.from("profiles").update({role:n}).eq("id",t.id);if($)throw $;De.update(T=>({...T,user_type:n})),n==="operator"?Ve("/account/join_map"):n==="manager"&&Ve("/account/onboard_manager")}catch($){console.error("Error:",$),r(1,l="Failed to update role"),Xe.error(l)}finally{r(2,s=!1)}}const i=[[]];function I(){n=this.__value,r(0,n)}return[n,l,s,a,S,I,i,$=>r(0,n=$.id),($,T)=>{(T.key==="Enter"||T.key===" ")&&r(0,n=$.id)}]}class Dt extends ue{constructor(e){super(),de(this,e,mt,ht,fe,{})}}export{Dt as component,Vt as universal};
