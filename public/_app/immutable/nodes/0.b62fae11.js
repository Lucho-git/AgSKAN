import{P as M,s as D,m as K,e as V,a as y,c as z,b as A,f as b,d as g,i as _,j as I,k as v,u as P,o as F,p as O,l as w,z as R,H as Q,n as B}from"../chunks/scheduler.78aa6f0d.js";import{S as H,i as U,c as x,a as G,m as J,t as p,b as k,d as W,j as X}from"../chunks/index.9a12d9f3.js";/* empty css                    */import{u as Y,n as Z}from"../chunks/stores.0d5f4774.js";import{e as ee}from"../chunks/index.bef399e8.js";import{s as te}from"../chunks/index.339a43bd.js";import{T as ne}from"../chunks/Toaster.61985541.js";import{t as oe}from"../chunks/Toaster.svelte_svelte_type_style_lang.006f4a9b.js";import{d as N,w as m}from"../chunks/index.75457b94.js";import{i as se}from"../chunks/sessionStore.4d48270f.js";const ie=!1,re=!0,Ne=Object.freeze(Object.defineProperty({__proto__:null,prerender:re,ssr:ie},Symbol.toStringTag,{value:"Module"}));let S,E;function $(n){if(typeof document>"u")return;clearTimeout(S),clearTimeout(E);const e=document.createElement("style"),i=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);e.appendChild(i);const t=()=>document.head.appendChild(e),r=()=>document.head.removeChild(e);if(typeof window.getComputedStyle<"u"){t(),n(),window.getComputedStyle(e).opacity,r();return}if(typeof window.requestAnimationFrame<"u"){t(),n(),window.requestAnimationFrame(r);return}t(),S=window.setTimeout(()=>{n(),E=window.setTimeout(r,120)},120)}function C(n){return n.filter(e=>e.length>0)}const q={getItem:n=>null,setItem:(n,e)=>{}},f=typeof document<"u",ae=["dark","light","system"],le=m("mode-watcher-mode"),ce=m("mode-watcher-theme"),ue=ge(),de=ye(),me=m(void 0),fe=_e(),j=m(!0),pe=m([]),he=m([]);be();ve();function ge(){const n="system",e=f?localStorage:q,i=e.getItem(r());let t=T(i)?i:n;function r(){return M(le)}const{subscribe:d,set:a}=m(t,()=>{if(!f)return;const s=c=>{if(c.key!==r())return;const l=c.newValue;T(l)?a(t=l):a(t=n)};return addEventListener("storage",s),()=>removeEventListener("storage",s)});function o(s){a(t=s),e.setItem(r(),t)}return{subscribe:d,set:o}}function _e(){const n=f?localStorage:q,e=n.getItem(t());let i=e??"";function t(){return M(ce)}const{subscribe:r,set:d}=m(i,()=>{if(!f)return;const o=s=>{if(s.key!==t())return;const c=s.newValue;d(c===null?i="":i=c)};return addEventListener("storage",o),()=>removeEventListener("storage",o)});function a(o){d(i=o),n.setItem(t(),i)}return{subscribe:r,set:a}}function ye(){let e=!0;const{subscribe:i,set:t}=m(void 0,()=>{if(!f)return;const a=s=>{e&&t(s.matches?"light":"dark")},o=window.matchMedia("(prefers-color-scheme: light)");return o.addEventListener("change",a),()=>o.removeEventListener("change",a)});function r(){if(!f)return;const a=window.matchMedia("(prefers-color-scheme: light)");t(a.matches?"light":"dark")}function d(a){e=a}return{subscribe:i,query:r,tracking:d}}function be(){const{subscribe:n}=N([ue,de,me,j,pe,he],([e,i,t,r,d,a])=>{if(!f)return;const o=e==="system"?i:e,s=C(d),c=C(a);function l(){const u=document.documentElement,h=document.querySelector('meta[name="theme-color"]');o==="light"?(s.length&&u.classList.remove(...s),c.length&&u.classList.add(...c),u.style.colorScheme="light",h&&t&&h.setAttribute("content",t.light)):(c.length&&u.classList.remove(...c),s.length&&u.classList.add(...s),u.style.colorScheme="dark",h&&t&&h.setAttribute("content",t.dark))}return r?$(l):l(),o});return{subscribe:n}}function ve(){const{subscribe:n}=N([fe,j],([e,i])=>{if(!f)return;function t(){document.documentElement.setAttribute("data-theme",e)}return i?$(t):t(),e});return{subscribe:n}}function T(n){return typeof n!="string"?!1:ae.includes(n)}function L(n){let e,i;return{c(){e=V("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),A(e).forEach(g),this.h()},h(){_(e,"class","fixed left-0 right-0 top-0 z-50 h-1 w-full bg-primary")},m(t,r){I(t,e,r)},i(t){t&&(i||Q(()=>{i=X(e,te,{delay:100,duration:12e3,axis:"x",easing:ee}),i.start()}))},o:B,d(t){t&&g(e)}}}function we(n){let e,i,t,r,d,a,o=n[1]&&L();const s=n[3].default,c=K(s,n,n[2],null);return r=new ne({props:{expand:!0,position:"top-center",richColors:!0}}),{c(){e=V("main"),o&&o.c(),i=y(),c&&c.c(),t=y(),x(r.$$.fragment),this.h()},l(l){e=z(l,"MAIN",{"data-sveltekit-reload":!0});var u=A(e);o&&o.l(u),i=b(u),c&&c.l(u),t=b(u),G(r.$$.fragment,u),u.forEach(g),this.h()},h(){_(e,"data-sveltekit-reload",d=n[0]?"":"off")},m(l,u){I(l,e,u),o&&o.m(e,null),v(e,i),c&&c.m(e,null),v(e,t),J(r,e,null),a=!0},p(l,[u]){l[1]?o?u&2&&p(o,1):(o=L(),o.c(),p(o,1),o.m(e,i)):o&&(o.d(1),o=null),c&&c.p&&(!a||u&4)&&P(c,s,l,l[2],a?O(s,l[2],u,null):F(l[2]),null),(!a||u&1&&d!==(d=l[0]?"":"off"))&&_(e,"data-sveltekit-reload",d)},i(l){a||(p(o),p(c,l),p(r.$$.fragment,l),a=!0)},o(l){k(c,l),k(r.$$.fragment,l),a=!1},d(l){l&&g(e),o&&o.d(),c&&c.d(l),W(r)}}}function ke(n,e,i){let t,r;w(n,Y,s=>i(0,t=s)),w(n,Z,s=>i(1,r=s));let{$$slots:d={},$$scope:a}=e,o;return R(()=>(console.log("Root layout mounted, initializing session"),se().then(s=>{s&&(o=s)}).catch(s=>{console.error("Failed to initialize session:",s)}),()=>{o&&(console.log("Cleaning up session subscription in root layout"),o())})),n.$$set=s=>{"$$scope"in s&&i(2,a=s.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t&&oe.info("An update is available. Refresh to see the latest version.",{action:{label:"Refresh",onClick:()=>location.reload()},duration:5e6})},[t,r,a,d]}class $e extends H{constructor(e){super(),U(this,e,ke,we,D,{})}}export{$e as component,Ne as universal};
