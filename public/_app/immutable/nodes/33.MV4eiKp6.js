import{s as J,d as l,K as Q,b as d,i as P,a as f,A as z,w as W,f as L,c as _,e as x,h as B,x as O,k as S,j as b,t as R,l as X,z as Y,g as G}from"../chunks/Bqk-ehBx.js";import{S as Z,i as ee,d as te,t as se,a as ae,m as ne,c as re,b as oe}from"../chunks/BSIXs_Xe.js";import{A as ie,s as le,o as ce}from"../chunks/C9aSubn0.js";import{p as ue}from"../chunks/Bm0PEI1T.js";import{a as de,b as fe}from"../chunks/DsDOFx4q.js";import{s as pe}from"../chunks/uEpJLpSx.js";function F(r){let e,a='<a class="px-5 py-2 transition-all duration-200 hover:border-b-2 hover:border-black hover:font-bold" href="/login/forgot_password">Forgot Password?</a>';return{c(){e=b("div"),e.innerHTML=a,this.h()},l(t){e=_(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1sw0qy6"&&(e.innerHTML=a),this.h()},h(){d(e,"class","mt-4 text-center")},m(t,n){P(t,e,n)},d(t){t&&l(e)}}}function K(r){let e,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Email verified! Please sign in.</span>';return{c(){e=b("div"),e.innerHTML=a,this.h()},l(t){e=_(t,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),G(e)!=="svelte-13on4c"&&(e.innerHTML=a),this.h()},h(){d(e,"role","alert"),d(e,"class","alert alert-success mt-5")},m(t,n){P(t,e,n)},d(t){t&&l(e)}}}function he(r){let e,a,t,n,T,g,v,c,y,k,U,p,w,h,V,E,A=r[0].url.searchParams.get("verified")=="true",$,I,C,H;h=new ie({props:{supabaseClient:de,view:r[1],redirectTo:`${r[0].url.origin}/auth/callback?next=/account`,providers:ce,socialLayout:"horizontal",showLinks:!1,appearance:le}});let o=r[1]==="sign_in"&&F(),i=A&&K();return{c(){e=S(),a=b("div"),t=b("div"),n=b("button"),T=R("Sign In"),v=S(),c=b("button"),y=R("Sign Up"),U=S(),p=b("div"),w=b("div"),oe(h.$$.fragment),V=S(),o&&o.c(),E=S(),i&&i.c(),$=O(),this.h()},l(s){W("svelte-1wvh9q6",document.head).forEach(l),e=L(s),a=_(s,"DIV",{class:!0});var m=x(a);t=_(m,"DIV",{class:!0});var M=x(t);n=_(M,"BUTTON",{class:!0});var N=x(n);T=B(N,"Sign In"),N.forEach(l),v=L(M),c=_(M,"BUTTON",{class:!0});var j=x(c);y=B(j,"Sign Up"),j.forEach(l),M.forEach(l),U=L(m),p=_(m,"DIV",{class:!0});var D=x(p);w=_(D,"DIV",{class:!0});var q=x(w);re(h.$$.fragment,q),q.forEach(l),V=L(D),o&&o.l(D),D.forEach(l),m.forEach(l),E=L(s),i&&i.l(s),$=O(),this.h()},h(){document.title="Sign In / Sign Up",d(n,"class",g=`px-5 py-2 ${r[1]==="sign_in"?"border-b-2 border-black font-bold":""}`),d(c,"class",k=`px-5 py-2 ${r[1]==="sign_up"?"border-b-2 border-black font-bold":""}`),d(t,"class","mb-5 flex justify-around"),d(w,"class","auth-wrapper"),d(p,"class","rounded-lg border border-gray-300 p-5"),d(a,"class","mx-auto w-full max-w-2xl")},m(s,u){P(s,e,u),P(s,a,u),f(a,t),f(t,n),f(n,T),f(t,v),f(t,c),f(c,y),f(a,U),f(a,p),f(p,w),ne(h,w,null),f(p,V),o&&o.m(p,null),P(s,E,u),i&&i.m(s,u),P(s,$,u),I=!0,C||(H=[z(n,"click",r[2]),z(c,"click",r[3])],C=!0)},p(s,[u]){(!I||u&2&&g!==(g=`px-5 py-2 ${s[1]==="sign_in"?"border-b-2 border-black font-bold":""}`))&&d(n,"class",g),(!I||u&2&&k!==(k=`px-5 py-2 ${s[1]==="sign_up"?"border-b-2 border-black font-bold":""}`))&&d(c,"class",k);const m={};u&2&&(m.view=s[1]),u&1&&(m.redirectTo=`${s[0].url.origin}/auth/callback?next=/account`),h.$set(m),s[1]==="sign_in"?o||(o=F(),o.c(),o.m(p,null)):o&&(o.d(1),o=null),u&1&&(A=s[0].url.searchParams.get("verified")=="true"),A?i||(i=K(),i.c(),i.m($.parentNode,$)):i&&(i.d(1),i=null)},i(s){I||(ae(h.$$.fragment,s),I=!0)},o(s){se(h.$$.fragment,s),I=!1},d(s){s&&(l(e),l(a),l(E),l($)),te(h),o&&o.d(),i&&i.d(s),C=!1,Q(H)}}}function me(r,e,a){let t,n;X(r,ue,v=>a(0,n=v)),Y(()=>{{console.log("Login page mounted");const c=new URLSearchParams(window.location.search).get("map_id");c&&(console.log(`Map ID found in URL: ${c}`),fe(c));const{data:{subscription:y},checkNow:k}=pe("/account");return k(),()=>{y.unsubscribe()}}});const T=()=>a(1,t="sign_in"),g=()=>a(1,t="sign_up");return r.$$.update=()=>{r.$$.dirty&1&&a(1,t=n.url.searchParams.get("tab")==="sign_up"?"sign_up":"sign_in")},[n,t,T,g]}class $e extends Z{constructor(e){super(),ee(this,e,me,he,J,{})}}export{$e as component};
