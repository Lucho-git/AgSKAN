import{s as J,d as l,K as Q,b as d,i as P,a as f,A as z,w as W,f as L,c as _,e as I,h as B,x as O,k as S,j as b,t as F,l as X,z as Y,g as G}from"../chunks/scheduler.BVGjjnGO.js";import{S as Z,i as ee,d as te,t as se,a as ae,m as ne,c as re,b as oe}from"../chunks/index.Vv2yv23T.js";import{A as ie,s as le,o as ce}from"../chunks/login_config.DXCtXWvU.js";import{p as ue}from"../chunks/stores.CPPq2u7A.js";import{a as de,b as fe}from"../chunks/sessionStore.BfE2Ui_i.js";import{s as pe}from"../chunks/authHelpers.3aS44nzk.js";function K(r){let e,a='<a class="px-5 py-2 transition-all duration-200 hover:border-b-2 hover:border-black hover:font-bold" href="/login/forgot_password">Forgot Password?</a>';return{c(){e=b("div"),e.innerHTML=a,this.h()},l(t){e=_(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1sw0qy6"&&(e.innerHTML=a),this.h()},h(){d(e,"class","mt-4 text-center")},m(t,n){P(t,e,n)},d(t){t&&l(e)}}}function R(r){let e,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Email verified! Please sign in.</span>';return{c(){e=b("div"),e.innerHTML=a,this.h()},l(t){e=_(t,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),G(e)!=="svelte-13on4c"&&(e.innerHTML=a),this.h()},h(){d(e,"role","alert"),d(e,"class","alert alert-success mt-5")},m(t,n){P(t,e,n)},d(t){t&&l(e)}}}function he(r){let e,a,t,n,T,v,g,u,y,k,U,p,w,h,V,E,A=r[0].url.searchParams.get("verified")=="true",$,x,C,H;h=new ie({props:{supabaseClient:de,view:r[1],redirectTo:`${r[0].url.origin}/auth/callback?next=/account`,providers:ce,socialLayout:"horizontal",showLinks:!1,appearance:le}});let o=r[1]==="sign_in"&&K(),i=A&&R();return{c(){e=S(),a=b("div"),t=b("div"),n=b("button"),T=F("Sign In"),g=S(),u=b("button"),y=F("Sign Up"),U=S(),p=b("div"),w=b("div"),oe(h.$$.fragment),V=S(),o&&o.c(),E=S(),i&&i.c(),$=O(),this.h()},l(s){W("svelte-1wvh9q6",document.head).forEach(l),e=L(s),a=_(s,"DIV",{class:!0});var m=I(a);t=_(m,"DIV",{class:!0});var M=I(t);n=_(M,"BUTTON",{class:!0});var N=I(n);T=B(N,"Sign In"),N.forEach(l),g=L(M),u=_(M,"BUTTON",{class:!0});var j=I(u);y=B(j,"Sign Up"),j.forEach(l),M.forEach(l),U=L(m),p=_(m,"DIV",{class:!0});var D=I(p);w=_(D,"DIV",{class:!0});var q=I(w);re(h.$$.fragment,q),q.forEach(l),V=L(D),o&&o.l(D),D.forEach(l),m.forEach(l),E=L(s),i&&i.l(s),$=O(),this.h()},h(){document.title="Sign In / Sign Up",d(n,"class",v=`px-5 py-2 ${r[1]==="sign_in"?"border-b-2 border-black font-bold":""}`),d(u,"class",k=`px-5 py-2 ${r[1]==="sign_up"?"border-b-2 border-black font-bold":""}`),d(t,"class","mb-5 flex justify-around"),d(w,"class","auth-wrapper"),d(p,"class","rounded-lg border border-gray-300 p-5"),d(a,"class","mx-auto w-full max-w-2xl")},m(s,c){P(s,e,c),P(s,a,c),f(a,t),f(t,n),f(n,T),f(t,g),f(t,u),f(u,y),f(a,U),f(a,p),f(p,w),ne(h,w,null),f(p,V),o&&o.m(p,null),P(s,E,c),i&&i.m(s,c),P(s,$,c),x=!0,C||(H=[z(n,"click",r[2]),z(u,"click",r[3])],C=!0)},p(s,[c]){(!x||c&2&&v!==(v=`px-5 py-2 ${s[1]==="sign_in"?"border-b-2 border-black font-bold":""}`))&&d(n,"class",v),(!x||c&2&&k!==(k=`px-5 py-2 ${s[1]==="sign_up"?"border-b-2 border-black font-bold":""}`))&&d(u,"class",k);const m={};c&2&&(m.view=s[1]),c&1&&(m.redirectTo=`${s[0].url.origin}/auth/callback?next=/account`),h.$set(m),s[1]==="sign_in"?o||(o=K(),o.c(),o.m(p,null)):o&&(o.d(1),o=null),c&1&&(A=s[0].url.searchParams.get("verified")=="true"),A?i||(i=R(),i.c(),i.m($.parentNode,$)):i&&(i.d(1),i=null)},i(s){x||(ae(h.$$.fragment,s),x=!0)},o(s){se(h.$$.fragment,s),x=!1},d(s){s&&(l(e),l(a),l(E),l($)),te(h),o&&o.d(),i&&i.d(s),C=!1,Q(H)}}}function me(r,e,a){let t,n;X(r,ue,g=>a(0,n=g)),Y(()=>{{console.log("Login page mounted");const u=new URLSearchParams(window.location.search).get("map_id");u&&fe(u);const{data:{subscription:y},checkNow:k}=pe("/account");return k(),()=>{y.unsubscribe()}}});const T=()=>a(1,t="sign_in"),v=()=>a(1,t="sign_up");return r.$$.update=()=>{r.$$.dirty&1&&a(1,t=n.url.searchParams.get("tab")==="sign_up"?"sign_up":"sign_in")},[n,t,T,v]}class $e extends Z{constructor(e){super(),ee(this,e,me,he,J,{})}}export{$e as component};
