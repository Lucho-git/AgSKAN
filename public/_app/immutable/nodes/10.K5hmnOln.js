import{s as D,n as b,d as c,i as _,b as f,r as H,f as k,c as h,e as x,k as C,j as p,v as I,g,q as P,a as v,w as V,h as q,t as z}from"../chunks/DjMlahvE.js";import{S as L,i as B}from"../chunks/KhAD1Hhl.js";import{s as j}from"../chunks/Ehf4wK3b.js";import{t as T}from"../chunks/C31GE7Pe.js";import{g as A}from"../chunks/BEF5l8Zs.js";function R(a){let e,t='<div class="skeleton mb-4 h-12 w-12 rounded-full"></div> <p class="text-lg">Redirecting to Stripe...</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(r){e=h(r,"DIV",{class:!0,"data-svelte-h":!0}),g(e)!=="svelte-18k1t0m"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex flex-col items-center")},m(r,n){_(r,e,n)},p:b,d(r){r&&c(e)}}}function F(a){let e,t,r="Error Creating Portal Session",n,l,s,o,d,u,w="Return to Billing",y,E;return{c(){e=p("div"),t=p("h2"),t.textContent=r,n=C(),l=p("p"),s=z(a[1]),o=C(),d=p("div"),u=p("button"),u.textContent=w,this.h()},l(m){e=h(m,"DIV",{class:!0});var i=x(e);t=h(i,"H2",{class:!0,"data-svelte-h":!0}),g(t)!=="svelte-zqz6f0"&&(t.textContent=r),n=k(i),l=h(i,"P",{class:!0});var M=x(l);s=q(M,a[1]),M.forEach(c),o=k(i),d=h(i,"DIV",{class:!0});var S=x(d);u=h(S,"BUTTON",{class:!0,"data-svelte-h":!0}),g(u)!=="svelte-1xynl7z"&&(u.textContent=w),S.forEach(c),i.forEach(c),this.h()},h(){f(t,"class","mb-4 text-xl font-bold text-red-700"),f(l,"class","text-red-600"),f(u,"class","rounded bg-primary px-4 py-2 text-white"),f(d,"class","mt-4"),f(e,"class","mx-auto my-8 max-w-xl rounded-lg bg-red-50 p-6 text-center")},m(m,i){_(m,e,i),v(e,t),v(e,n),v(e,l),v(l,s),v(e,o),v(e,d),v(d,u),y||(E=V(u,"click",a[2]),y=!0)},p(m,i){i&2&&P(s,m[1])},d(m){m&&c(e),y=!1,E()}}}function N(a){let e,t='<div class="skeleton mb-4 h-12 w-12 rounded-full"></div> <p class="text-lg">Preparing your billing portal...</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(r){e=h(r,"DIV",{class:!0,"data-svelte-h":!0}),g(e)!=="svelte-qnr3b6"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex flex-col items-center")},m(r,n){_(r,e,n)},p:b,d(r){r&&c(e)}}}function O(a){let e,t;function r(s,o){return s[0]?N:s[1]?F:R}let n=r(a),l=n(a);return{c(){e=C(),t=p("div"),l.c(),this.h()},l(s){H("svelte-12e1bz1",document.head).forEach(c),e=k(s),t=h(s,"DIV",{class:!0});var d=x(t);l.l(d),d.forEach(c),this.h()},h(){document.title="Manage Subscription",f(t,"class","container mx-auto flex h-[60vh] flex-col items-center justify-center px-4")},m(s,o){_(s,e,o),_(s,t,o),l.m(t,null)},p(s,[o]){n===(n=r(s))&&l?l.p(s,o):(l.d(1),l=n(s),l&&(l.c(),l.m(t,null)))},i:b,o:b,d(s){s&&(c(e),c(t)),l.d()}}}function U(a,e,t){let r=!0,n=null;I(async()=>{try{t(0,r=!0);const s=await j.createPortalSession();s.success&&s.url?window.location.href=s.url:(t(1,n=s.message||"Failed to create portal session"),T.error(n))}catch(s){t(1,n=s.message||"An unexpected error occurred"),T.error(n)}finally{t(0,r=!1)}});function l(){A("/account/billing")}return[r,n,l]}class X extends L{constructor(e){super(),B(this,e,U,O,D,{})}}export{X as component};
