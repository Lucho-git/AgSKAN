import{s as B,a as j,e as b,x as H,d as o,f as C,c as k,b as x,g as M,i as h,j as y,k as w,n as T,l as U,t as z,w as S,h as N,B as q,q as O,K as A}from"../chunks/scheduler.0ff5556b.js";import{S as K,i as R}from"../chunks/index.e3d1f712.js";import{p as Y}from"../chunks/stores.3b20c088.js";import{s as F}from"../chunks/supabaseClient.998d708c.js";const G=!1,J=async({params:u})=>({token:u.token}),ae=Object.freeze(Object.defineProperty({__proto__:null,load:J,prerender:G},Symbol.toStringTag,{value:"Module"}));function Q(u){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>There was an error processing your request. Please try again
              later.</span>`;return{c(){e=b("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-5zknmj"&&(e.innerHTML=t),this.h()},h(){h(e,"class","alert alert-error")},m(s,n){y(s,e,n)},p:T,d(s){s&&o(e)}}}function W(u){let e,t,s,n="Receive important updates",d,l,g,m,f,p=u[2]?"Processing...":"Update Preferences",i,r,_,E,P,c=u[3]&&L();return{c(){e=b("div"),t=b("label"),s=b("span"),s.textContent=n,d=j(),l=b("input"),g=j(),m=b("div"),f=b("button"),i=z(p),r=j(),c&&c.c(),_=S(),this.h()},l(a){e=k(a,"DIV",{class:!0});var v=x(e);t=k(v,"LABEL",{class:!0});var I=x(t);s=k(I,"SPAN",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-1046da"&&(s.textContent=n),d=C(I),l=k(I,"INPUT",{type:!0,class:!0}),I.forEach(o),v.forEach(o),g=C(a),m=k(a,"DIV",{class:!0});var D=x(m);f=k(D,"BUTTON",{class:!0});var V=x(f);i=N(V,p),V.forEach(o),D.forEach(o),r=C(a),c&&c.l(a),_=S(),this.h()},h(){h(s,"class","label-text"),h(l,"type","checkbox"),h(l,"class","checkbox"),h(t,"class","label cursor-pointer"),h(e,"class","form-control"),h(f,"class","btn btn-primary w-full sm:w-auto"),f.disabled=u[2],h(m,"class","card-actions justify-center mt-6")},m(a,v){y(a,e,v),w(e,t),w(t,s),w(t,d),w(t,l),l.checked=u[0],y(a,g,v),y(a,m,v),w(m,f),w(f,i),y(a,r,v),c&&c.m(a,v),y(a,_,v),E||(P=[q(l,"change",u[5]),q(f,"click",u[4])],E=!0)},p(a,v){v&1&&(l.checked=a[0]),v&4&&p!==(p=a[2]?"Processing...":"Update Preferences")&&O(i,p),v&4&&(f.disabled=a[2]),a[3]?c||(c=L(),c.c(),c.m(_.parentNode,_)):c&&(c.d(1),c=null)},d(a){a&&(o(e),o(g),o(m),o(r),o(_)),c&&c.d(a),E=!1,A(P)}}}function L(u){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Your email preferences have been updated successfully.</span>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-w42y8"&&(e.innerHTML=t),this.h()},h(){h(e,"class","alert alert-success mt-4")},m(s,n){y(s,e,n)},d(s){s&&o(e)}}}function X(u){let e,t,s,n,d,l,g="Manage Email Preferences",m;function f(r,_){return r[1]?Q:W}let p=f(u),i=p(u);return{c(){e=j(),t=b("div"),s=b("div"),n=b("div"),d=b("div"),l=b("h1"),l.textContent=g,m=j(),i.c(),this.h()},l(r){H("svelte-102ykcq",document.head).forEach(o),e=C(r),t=k(r,"DIV",{class:!0});var E=x(t);s=k(E,"DIV",{class:!0});var P=x(s);n=k(P,"DIV",{class:!0});var c=x(n);d=k(c,"DIV",{class:!0});var a=x(d);l=k(a,"H1",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-p9mq6q"&&(l.textContent=g),m=C(a),i.l(a),a.forEach(o),c.forEach(o),P.forEach(o),E.forEach(o),this.h()},h(){document.title="Manage Email Preferences",h(l,"class","card-title text-2xl font-bold mb-6 justify-center"),h(d,"class","card-body"),h(n,"class","card bg-base-100 shadow-xl"),h(s,"class","container mx-auto px-4 max-w-2xl"),h(t,"class","flex justify-center items-center min-h-screen bg-base-200")},m(r,_){y(r,e,_),y(r,t,_),w(t,s),w(s,n),w(n,d),w(d,l),w(d,m),i.m(d,null)},p(r,[_]){p===(p=f(r))&&i?i.p(r,_):(i.d(1),i=p(r),i&&(i.c(),i.m(d,null)))},i:T,o:T,d(r){r&&(o(e),o(t)),i.d()}}}function Z(u,e,t){let s;U(u,Y,p=>t(6,s=p));let n=!0,d=!1,l=!1,g=!1;async function m(){t(2,l=!0),t(3,g=!1);const{token:p}=s.params,{data:i,error:r}=await F.from("email_subscribers").update({is_subscribed:n}).match({unsubscribe_token:p});r?(console.error("Error updating preferences:",r),t(1,d=!0)):t(3,g=!0),t(2,l=!1)}function f(){n=this.checked,t(0,n)}return[n,d,l,g,m,f]}class re extends K{constructor(e){super(),R(this,e,Z,X,B,{})}}export{re as component,ae as universal};
