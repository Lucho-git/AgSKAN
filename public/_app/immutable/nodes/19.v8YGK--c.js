import{s as Y,d,i as f,b as P,w as H,f as w,c as V,g as x,x as N,k as S,j as $,l as k,y as T,z as D,n as h}from"../chunks/scheduler.BVGjjnGO.js";import{S as E,i as M,t as y,a as g,e as j,d as L,m as U,c as W,b as q,g as z}from"../chunks/index.Vv2yv23T.js";import{s as A}from"../chunks/sessionStore.BfE2Ui_i.js";import{p as C}from"../chunks/profileStore.DorDk9Q6.js";import{g as v}from"../chunks/entry.DlOh58KF.js";import{u as B}from"../chunks/userSettingsApi.CDyqeY90.js";import{S as I}from"../chunks/settings_module.Bj_slZnK.js";function F(i){let t,l;return t=new I({props:{editable:!0,title:"Edit Profile",successTitle:"Profile Updated",successBody:"Your profile has been updated successfully.",apiHandler:i[2],fields:[{id:"fullName",label:"Name",initialValue:i[1]?.full_name??"",placeholder:"Your full name"},{id:"companyName",label:"Company Name",initialValue:i[1]?.company_name??"",placeholder:"Your company name"},{id:"website",label:"Company Website",initialValue:i[1]?.website??"",placeholder:"https://example.com"}]}}),t.$on("success",i[3]),{c(){q(t.$$.fragment)},l(e){W(t.$$.fragment,e)},m(e,r){U(t,e,r),l=!0},p(e,r){const s={};r&2&&(s.fields=[{id:"fullName",label:"Name",initialValue:e[1]?.full_name??"",placeholder:"Your full name"},{id:"companyName",label:"Company Name",initialValue:e[1]?.company_name??"",placeholder:"Your company name"},{id:"website",label:"Company Website",initialValue:e[1]?.website??"",placeholder:"https://example.com"}]),t.$set(s)},i(e){l||(g(t.$$.fragment,e),l=!0)},o(e){y(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function G(i){let t,l='<div class="loading loading-spinner loading-lg"></div>';return{c(){t=$("div"),t.innerHTML=l,this.h()},l(e){t=V(e,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-asr66p"&&(t.innerHTML=l),this.h()},h(){P(t,"class","flex h-64 items-center justify-center")},m(e,r){f(e,t,r)},p:h,i:h,o:h,d(e){e&&d(t)}}}function J(i){let t,l,e="Settings",r,s,o,c,u;const _=[G,F],n=[];function p(a,m){return a[0]?0:1}return s=p(i),o=n[s]=_[s](i),{c(){t=S(),l=$("h1"),l.textContent=e,r=S(),o.c(),c=N(),this.h()},l(a){H("svelte-ewap0i",document.head).forEach(d),t=w(a),l=V(a,"H1",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-mlvd3d"&&(l.textContent=e),r=w(a),o.l(a),c=N(),this.h()},h(){document.title="Edit Profile",P(l,"class","mb-6 text-2xl font-bold")},m(a,m){f(a,t,m),f(a,l,m),f(a,r,m),n[s].m(a,m),f(a,c,m),u=!0},p(a,[m]){let b=s;s=p(a),s===b?n[s].p(a,m):(z(),y(n[b],1,1,()=>{n[b]=null}),j(),o=n[s],o?o.p(a,m):(o=n[s]=_[s](a),o.c()),g(o,1),o.m(c.parentNode,c))},i(a){u||(g(o),u=!0)},o(a){y(o),u=!1},d(a){a&&(d(t),d(l),d(r),d(c)),n[s].d(a)}}}function K(i,t,l){let e,r;k(i,C,n=>l(4,e=n)),k(i,A,n=>l(5,r=n)),T("adminSection").set("settings");let o=!0,c=null;D(async()=>{if(!r){v("/login");return}l(1,c=e),l(0,o=!1)});async function u(n){return await B.updateProfile(n.fullName,n.companyName,n.website)}function _(n){const p=n.detail.data||{};if(e){const a={...e,full_name:p.full_name||n.detail.formData?.fullName||e.full_name,company_name:p.company_name||n.detail.formData?.companyName||e.company_name,website:p.website||n.detail.formData?.website||e.website};C.set(a)}setTimeout(()=>{v("/account/settings")},1500)}return[o,c,u,_]}class ae extends E{constructor(t){super(),M(this,t,K,J,Y,{})}}export{ae as component};
